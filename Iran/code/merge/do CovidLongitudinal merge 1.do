
clear all

cd "$pathCovidLongitudinal"

cd merge

capture log close 

log using "log CovidLongitudinal merge 1.smcl", replace

***************************************************************************
* This is "do CovidLongitudinal merge 1.do"

* Project: Longitudinal assessment of COVID-19 models                                                                         
* Person: Farshad Pourmalek pourmalek_farshad at yahoo dotcom
***************************************************************************


* merge models' files

* input file(s):
* output data files: "CovidLongitudinal JOHN.dta"
* Final data output file: "CovidLongitudinal DELP 2.dta"
* Final data output file: "CovidLongitudinal IHME 2.dta"
* Final data output file: "CovidLongitudinal IMPE 3.dta"
* Final data output file: "CovidLongitudinal LANL 3.dta"
* Final data output file: "CovidLongitudinal SRIV 2.dta"

* output file(s):
* "CovidLongitudinal merge.dta"



/* update dates:
DELP 68
IHME 63
IMPE 93
LANL 128
SRIV 572

Unique dates all 589

date		number of models with updates in this date

var1	_freq
20200417	1
20200424	1
20200426	1
20200429	1
20200501	1
20200502	1
20200503	1
20200504	1
20200505	1
20200507	1
20200508	1
20200511	1
20200512	1
20200514	1
20200515	1
20200516	1
20200518	1
20200519	1
20200521	1
20200522	1
20200523	1
20200525	1
20200526	1
20200528	1
20200529	1
20200530	1
20200601	1
20200602	1
20200604	1
20200605	1
20200606	1
20200608	1
20200609	1
20200611	1
20200612	1
20200615	1
20200618	1
20200620	1
20200622	1
20200624	1
20200626	1
20200627	1
20200630	1
20200706	1
20200709	1
20200710	1
20200713	1
20200716	1
20200717	1
20200721	1
20200724	1
20200728	1
20200803	1
20200804	1
20200807	1
20200818	1
20200820	1
20200822	1
20200824	1
20200828	1
20200901	1
20200904	1
20200905	1
20200907	1
20200910	1
20200914	1
20200917	1
20200921	1
20200922	1
20200928	1
20200929	1
20201001	1
20201010	1
20201013	1
20201016	1
20201017	1
20201020	1
20201023	1
20201024	1
20201026	1
20201027	1
20201030	1
20201031	1
20201102	1
20201103	1
20201106	1
20201107	1
20201109	1
20201113	1
20201116	1
20201117	1
20201120	1
20201121	1
20201124	1
20201126	1
20201127	1
20201128	1
20201130	1
20201201	1
20201205	1
20201207	1
20201208	1
20201211	1
20201214	1
20201218	1
20201219	1
20201221	1
20201222	1
20201224	1
20201225	1
20201227	1
20201229	1
20201230	1
20210101	1
20210102	1
20210104	1
20210106	1
20210107	1
20210108	1
20210109	1
20210111	1
20210116	1
20210119	1
20210121	1
20210123	1
20210125	1
20210126	1
20210129	1
20210201	1
20210202	1
20210205	1
20210206	1
20210208	1
20210209	1
20210213	1
20210215	1
20210216	1
20210218	1
20210219	1
20210222	1
20210223	1
20210227	1
20210301	1
20210302	1
20210304	1
20210308	1
20210309	1
20210313	1
20210315	1
20210316	1
20210318	1
20210320	1
20210322	1
20210323	1
20210326	1
20210327	1
20210330	1
20210402	1
20210403	1
20210405	1
20210410	1
20210412	1
20210413	1
20210415	1
20210419	1
20210420	1
20210426	1
20210427	1
20210429	1
20210430	1
20210501	1
20210503	1
20210504	1
20210507	1
20210508	1
20210511	1
20210513	1
20210515	1
20210517	1
20210518	1
20210524	1
20210525	1
20210529	1
20210530	1
20210531	1
20210601	1
20210605	1
20210607	1
20210608	1
20210609	1
20210612	1
20210614	1
20210615	1
20210616	1
20210619	1
20210621	1
20210622	1
20210623	1
20210625	1
20210626	1
20210630	1
20210701	1
20210703	1
20210705	1
20210706	1
20210707	1
20210710	1
20210712	1
20210713	1
20210714	1
20210716	1
20210717	1
20210720	1
20210721	1
20210724	1
20210726	1
20210727	1
20210728	1
20210731	1
20210805	1
20210809	1
20210810	1
20210811	1
20210812	1
20210813	1
20210814	1
20210816	1
20210817	1
20210818	1
20210821	1
20210823	1
20210824	1
20210827	1
20210828	1
20210830	1
20210831	1
20210901	1
20210903	1
20210904	1
20210906	1
20210907	1
20210908	1
20210911	1
20210913	1
20210914	1
20210915	1
20210917	1
20210918	1
20210920	1
20210921	1
20210922	1
20210925	1
20210927	1
20210928	1
20210929	1
20211001	1
20211002	1
20211003	1
20211004	1
20211005	1
20211008	1
20211009	1
20211010	1
20211011	1
20211012	1
20211013	1
20211016	1
20211017	1
20211024	1
20211025	1
20211026	1
20211029	1
20211030	1
20211031	1
20211101	1
20211102	1
20211105	1
20211106	1
20211107	1
20211108	1
20211109	1
20211110	1
20211112	1
20211114	1
20211116	1
20211117	1
20211119	1
20211120	1
20211122	1
20211124	1
20211125	1
20211126	1
20211127	1
20211128	1
20211130	1
20211201	1
20211203	1
20211207	1
20211208	1
20211210	1
20211211	1
20211212	1
20211214	1
20211215	1
20211217	1
20211218	1
20211219	1
20211221	1
20211223	1
20211227	1
20211230	1
20200506	2
20200509	2
20200510	2
20200513	2
20200520	2
20200527	2
20200603	2
20200610	2
20200613	2
20200616	2
20200617	2
20200619	2
20200625	2
20200629	2
20200701	2
20200702	2
20200703	2
20200705	2
20200708	2
20200711	2
20200712	2
20200719	2
20200720	2
20200723	2
20200725	2
20200726	2
20200727	2
20200729	2
20200730	2
20200731	2
20200801	2
20200802	2
20200805	2
20200806	2
20200808	2
20200809	2
20200810	2
20200811	2
20200812	2
20200813	2
20200814	2
20200815	2
20200816	2
20200817	2
20200819	2
20200821	2
20200825	2
20200826	2
20200829	2
20200830	2
20200831	2
20200903	2
20200908	2
20200909	2
20200911	2
20200913	2
20200915	2
20200916	2
20200918	2
20200919	2
20200920	2
20200924	2
20200925	2
20200926	2
20200927	2
20200930	2
20201002	2
20201003	2
20201004	2
20201006	2
20201007	2
20201008	2
20201009	2
20201011	2
20201012	2
20201014	2
20201015	2
20201018	2
20201019	2
20201021	2
20201029	2
20201104	2
20201105	2
20201108	2
20201110	2
20201111	2
20201112	2
20201114	2
20201115	2
20201122	2
20201123	2
20201125	2
20201202	2
20201204	2
20201206	2
20201209	2
20201210	2
20201212	2
20201213	2
20201216	2
20201226	2
20201231	2
20210103	2
20210105	2
20210112	2
20210113	2
20210114	2
20210115	2
20210117	2
20210118	2
20210120	2
20210122	2
20210127	2
20210130	2
20210131	2
20210204	2
20210207	2
20210211	2
20210212	2
20210214	2
20210220	2
20210221	2
20210224	2
20210226	2
20210228	2
20210303	2
20210305	2
20210306	2
20210307	2
20210310	2
20210312	2
20210314	2
20210317	2
20210319	2
20210321	2
20210324	2
20210328	2
20210329	2
20210331	2
20210401	2
20210404	2
20210406	2
20210407	2
20210408	2
20210409	2
20210411	2
20210414	2
20210416	2
20210417	2
20210418	2
20210421	2
20210422	2
20210423	2
20210424	2
20210425	2
20210428	2
20210502	2
20210505	2
20210509	2
20210510	2
20210512	2
20210514	2
20210519	2
20210520	2
20210521	2
20210522	2
20210523	2
20210526	2
20210527	2
20210528	2
20210602	2
20210603	2
20210606	2
20210611	2
20210613	2
20210617	2
20210620	2
20210624	2
20210627	2
20210702	2
20210704	2
20210708	2
20210709	2
20210711	2
20210718	2
20210719	2
20210722	2
20210723	2
20210725	2
20210729	2
20210730	2
20210801	2
20210806	2
20210808	2
20210815	2
20210820	2
20210822	2
20210825	2
20210829	2
20210905	2
20210910	2
20210912	2
20210919	2
20210924	2
20210926	2
20211006	2
20211007	2
20211014	2
20211015	2
20211027	2
20211028	2
20211103	2
20211111	2
20211115	2
20211118	2
20211121	2
20211129	2
20211202	2
20211205	2
20211209	2
20211213	2
20211216	2
20211226	2
20200517	3
20200524	3
20200531	3
20200607	3
20200614	3
20200621	3
20200623	3
20200628	3
20200704	3
20200707	3
20200714	3
20200715	3
20200718	3
20200823	3
20200827	3
20200902	3
20200906	3
20200912	3
20200923	3
20201022	3
20201025	3
20201028	3
20201101	3
20201118	3
20201129	3
20201203	3
20201217	3
20201220	3
20201223	3
20210110	3
20210124	3
20210128	3
20210203	3
20210210	3
20210217	3
20210225	3
20210311	3
20210325	3
20210506	3
20210516	3
20210604	3
20210610	3
20210618	3
20210715	3
20210819	3
20210826	3
20210902	3
20210909	3
20210916	3
20210923	3
20210930	3
20211021	3
20211104	3
20200722	4
20201119	4


*/ 



**************************************
* prepare models' final files

cd ..
cd JOHN
use "CovidLongitudinal JOHN.dta", clear

isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal JOHN.dta", replace
*


cd ..
cd DELP
use "CovidLongitudinal DELP 2.dta", clear

codebook DayDeaMeSmA0120200417
isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal DELP.dta", replace
*


cd ..
cd IHME
use "CovidLongitudinal IHME 2.dta", clear

isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal IHME.dta", replace
*


cd ..
cd IMPE
use "CovidLongitudinal IMPE 3.dta", clear

isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal IMPE.dta", replace
*


cd ..
cd LANL
use "CovidLongitudinal LANL 3.dta", clear


isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal LANL.dta", replace
*


cd ..
cd SRIV
use "CovidLongitudinal SRIV 2.dta", clear

isid date
tsset, clear

cd ..
cd merge
save "CovidLongitudinal SRIV.dta", replace
*





**************************************
* merge models' files

use "CovidLongitudinal SRIV.dta", clear 

local list DELP IHME IMPE LANL JOHN 

foreach model of local list {

	merge m:m date using "CovidLongitudinal `model'.dta"
	
	drop _merge

	
}
*	

drop update_date

keep if date >= td(01jan2020) & date <= td(01jan2022)


* 




local datelist ///
20200417 ///
20200424 ///
20200426 ///
20200429 ///
20200501 ///
20200502 ///
20200503 ///
20200504 ///
20200505 ///
20200506 ///
20200507 ///
20200508 ///
20200509 ///
20200510 ///
20200511 ///
20200512 ///
20200513 ///
20200514 ///
20200515 ///
20200516 ///
20200517 ///
20200518 ///
20200519 ///
20200520 ///
20200521 ///
20200522 ///
20200523 ///
20200524 ///
20200525 ///
20200526 ///
20200527 ///
20200528 ///
20200529 ///
20200530 ///
20200531 ///
20200601 ///
20200602 ///
20200603 ///
20200604 ///
20200605 ///
20200606 ///
20200607 ///
20200608 ///
20200609 ///
20200610 ///
20200611 ///
20200612 ///
20200613 ///
20200614 ///
20200615 ///
20200616 ///
20200617 ///
20200618 ///
20200619 ///
20200620 ///
20200621 ///
20200622 ///
20200623 ///
20200624 ///
20200625 ///
20200626 ///
20200627 ///
20200628 ///
20200629 ///
20200630 ///
20200701 ///
20200702 ///
20200703 ///
20200704 ///
20200705 ///
20200706 ///
20200707 ///
20200708 ///
20200709 ///
20200710 ///
20200711 ///
20200712 ///
20200713 ///
20200714 ///
20200715 ///
20200716 ///
20200717 ///
20200718 ///
20200719 ///
20200720 ///
20200721 ///
20200722 ///
20200723 ///
20200724 ///
20200725 ///
20200726 ///
20200727 ///
20200728 ///
20200729 ///
20200730 ///
20200731 ///
20200801 ///
20200802 ///
20200803 ///
20200804 ///
20200805 ///
20200806 ///
20200807 ///
20200808 ///
20200809 ///
20200810 ///
20200811 ///
20200812 ///
20200813 ///
20200814 ///
20200815 ///
20200816 ///
20200817 ///
20200818 ///
20200819 ///
20200820 ///
20200821 ///
20200822 ///
20200823 ///
20200824 ///
20200825 ///
20200826 ///
20200827 ///
20200828 ///
20200829 ///
20200830 ///
20200831 ///
20200901 ///
20200902 ///
20200903 ///
20200904 ///
20200905 ///
20200906 ///
20200907 ///
20200908 ///
20200909 ///
20200910 ///
20200911 ///
20200912 ///
20200913 ///
20200914 ///
20200915 ///
20200916 ///
20200917 ///
20200918 ///
20200919 ///
20200920 ///
20200921 ///
20200922 ///
20200923 ///
20200924 ///
20200925 ///
20200926 ///
20200927 ///
20200928 ///
20200929 ///
20200930 ///
20201001 ///
20201002 ///
20201003 ///
20201004 ///
20201005 ///
20201006 ///
20201007 ///
20201008 ///
20201009 ///
20201010 ///
20201011 ///
20201012 ///
20201013 ///
20201014 ///
20201015 ///
20201016 ///
20201017 ///
20201018 ///
20201019 ///
20201020 ///
20201021 ///
20201022 ///
20201023 ///
20201024 ///
20201025 ///
20201026 ///
20201027 ///
20201028 ///
20201029 ///
20201030 ///
20201031 ///
20201101 ///
20201102 ///
20201103 ///
20201104 ///
20201105 ///
20201106 ///
20201107 ///
20201108 ///
20201109 ///
20201110 ///
20201111 ///
20201112 ///
20201113 ///
20201114 ///
20201115 ///
20201116 ///
20201117 ///
20201118 ///
20201119 ///
20201120 ///
20201121 ///
20201122 ///
20201123 ///
20201124 ///
20201125 ///
20201126 ///
20201127 ///
20201128 ///
20201129 ///
20201130 ///
20201201 ///
20201202 ///
20201203 ///
20201204 ///
20201205 ///
20201206 ///
20201207 ///
20201208 ///
20201209 ///
20201210 ///
20201211 ///
20201212 ///
20201213 ///
20201214 ///
20201216 ///
20201217 ///
20201218 ///
20201219 ///
20201220 ///
20201221 ///
20201222 ///
20201223 ///
20201224 ///
20201225 ///
20201226 ///
20201227 ///
20201229 ///
20201230 ///
20201231 ///
20210101 ///
20210102 ///
20210103 ///
20210104 ///
20210105 ///
20210106 ///
20210107 ///
20210108 ///
20210109 ///
20210110 ///
20210111 ///
20210112 ///
20210113 ///
20210114 ///
20210115 ///
20210116 ///
20210117 ///
20210118 ///
20210119 ///
20210120 ///
20210121 ///
20210122 ///
20210123 ///
20210124 ///
20210125 ///
20210126 ///
20210127 ///
20210128 ///
20210129 ///
20210130 ///
20210131 ///
20210201 ///
20210202 ///
20210203 ///
20210204 ///
20210205 ///
20210206 ///
20210207 ///
20210208 ///
20210209 ///
20210210 ///
20210211 ///
20210212 ///
20210213 ///
20210214 ///
20210215 ///
20210216 ///
20210217 ///
20210218 ///
20210219 ///
20210220 ///
20210221 ///
20210222 ///
20210223 ///
20210224 ///
20210225 ///
20210226 ///
20210227 ///
20210228 ///
20210301 ///
20210302 ///
20210303 ///
20210304 ///
20210305 ///
20210306 ///
20210307 ///
20210308 ///
20210309 ///
20210310 ///
20210311 ///
20210312 ///
20210313 ///
20210314 ///
20210315 ///
20210316 ///
20210317 ///
20210318 ///
20210319 ///
20210320 ///
20210321 ///
20210322 ///
20210323 ///
20210324 ///
20210325 ///
20210326 ///
20210327 ///
20210328 ///
20210329 ///
20210330 ///
20210331 ///
20210401 ///
20210402 ///
20210403 ///
20210404 ///
20210405 ///
20210406 ///
20210407 ///
20210408 ///
20210409 ///
20210410 ///
20210411 ///
20210412 ///
20210413 ///
20210414 ///
20210415 ///
20210416 ///
20210417 ///
20210418 ///
20210419 ///
20210420 ///
20210421 ///
20210422 ///
20210423 ///
20210424 ///
20210425 ///
20210426 ///
20210427 ///
20210428 ///
20210429 ///
20210430 ///
20210501 ///
20210502 ///
20210503 ///
20210504 ///
20210505 ///
20210506 ///
20210507 ///
20210508 ///
20210509 ///
20210510 ///
20210511 ///
20210512 ///
20210513 ///
20210514 ///
20210515 ///
20210516 ///
20210517 ///
20210518 ///
20210519 ///
20210520 ///
20210521 ///
20210522 ///
20210523 ///
20210524 ///
20210525 ///
20210526 ///
20210527 ///
20210528 ///
20210529 ///
20210530 ///
20210531 ///
20210601 ///
20210602 ///
20210603 ///
20210604 ///
20210605 ///
20210606 ///
20210607 ///
20210608 ///
20210609 ///
20210610 ///
20210611 ///
20210612 ///
20210613 ///
20210614 ///
20210615 ///
20210616 ///
20210617 ///
20210618 ///
20210619 ///
20210620 ///
20210621 ///
20210622 ///
20210623 ///
20210624 ///
20210625 ///
20210626 ///
20210627 ///
20210630 ///
20210701 ///
20210702 ///
20210703 ///
20210704 ///
20210705 ///
20210706 ///
20210707 ///
20210708 ///
20210709 ///
20210710 ///
20210711 ///
20210712 ///
20210713 ///
20210714 ///
20210715 ///
20210716 ///
20210717 ///
20210718 ///
20210719 ///
20210720 ///
20210721 ///
20210722 ///
20210723 ///
20210724 ///
20210725 ///
20210726 ///
20210727 ///
20210728 ///
20210729 ///
20210730 ///
20210731 ///
20210801 ///
20210805 ///
20210806 ///
20210808 ///
20210809 ///
20210810 ///
20210811 ///
20210812 ///
20210813 ///
20210814 ///
20210815 ///
20210816 ///
20210817 ///
20210818 ///
20210819 ///
20210820 ///
20210821 ///
20210822 ///
20210823 ///
20210824 ///
20210825 ///
20210826 ///
20210827 ///
20210828 ///
20210829 ///
20210830 ///
20210831 ///
20210901 ///
20210902 ///
20210903 ///
20210904 ///
20210905 ///
20210906 ///
20210907 ///
20210908 ///
20210909 ///
20210910 ///
20210911 ///
20210912 ///
20210913 ///
20210914 ///
20210915 ///
20210916 ///
20210917 ///
20210918 ///
20210919 ///
20210920 ///
20210921 ///
20210922 ///
20210923 ///
20210924 ///
20210925 ///
20210926 ///
20210927 ///
20210928 ///
20210929 ///
20210930 ///
20211001 ///
20211002 ///
20211003 ///
20211004 ///
20211005 ///
20211006 ///
20211007 ///
20211008 ///
20211009 ///
20211010 ///
20211011 ///
20211012 ///
20211013 ///
20211014 ///
20211015 ///
20211016 ///
20211017 ///
20211021 ///
20211024 ///
20211025 ///
20211026 ///
20211027 ///
20211028 ///
20211029 ///
20211030 ///
20211031 ///
20211101 ///
20211102 ///
20211103 ///
20211104 ///
20211105 ///
20211106 ///
20211107 ///
20211108 ///
20211109 ///
20211110 ///
20211111 ///
20211112 ///
20211114 ///
20211115 ///
20211116 ///
20211117 ///
20211118 ///
20211119 ///
20211120 ///
20211121 ///
20211122 ///
20211124 ///
20211125 ///
20211126 ///
20211127 ///
20211128 ///
20211129 ///
20211130 ///
20211201 ///
20211202 ///
20211203 ///
20211205 ///
20211207 ///
20211208 ///
20211209 ///
20211210 ///
20211211 ///
20211212 ///
20211213 ///
20211214 ///
20211215 ///
20211216 ///
20211217 ///
20211218 ///
20211219 ///
20211221 ///
20211223 ///
20211226 ///
20211227 ///
20211230 



**************************************
* gen blank vars for list of all updates

foreach update of local datelist {

	local modellist A01 A02 A03 A04 A05 // DELP IHME IMPE LANL SRIV
	
	foreach model of local modellist {
			
			
		* DayDeaMeSm
		
		capture confirm var DayDeaMeSm`model'`update'

		if c(rc) == 0 {
			di "VARIABLE DayDeaMeSm FOUND:  " "DayDeaMeSm`model'`update'"
		}
			
		else if c(rc) == 111 {    // VARIABLE NOT FOUND
			gen DayDeaMeSm`model'`update' = .
			di in red "VARIABLE DayDeaMeSm GENERATED:  " "DayDeaMeSm`model'`update'"
		}	
		
		
		* DayDeaFORE
		
		capture confirm var DayDeaFORE`model'`update'
		
		if c(rc) == 0 {
			di "VARIABLE DayDeaFORE FOUND:  " "DayDeaFORE`model'`update'"
		}
			
		else if c(rc) == 111 {    // VARIABLE NOT FOUND
			gen DayDeaFORE`model'`update' = .
			di in red "VARIABLE DayDeaFORE GENERATED:  " "DayDeaFORE`model'`update'"
		}	

	}
}
*	





qui compress

save "CovidLongitudinal merge.dta", replace


 




view "log CovidLongitudinal merge 1.smcl"

log close

exit, clear




