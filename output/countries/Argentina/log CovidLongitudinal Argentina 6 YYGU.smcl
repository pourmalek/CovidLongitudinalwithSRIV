{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/countries/Argentina/log CovidLongitudinal Argentina 6 YYGU.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res} 9 Apr 2023, 10:32:54
{txt}
{com}. 
. ***************************************************************************
. * This is "do CovidLongitudinal Argentina 6 YYGU.do"
. 
. * Project: Longitudinal assessment of COVID-19 models 
. 
. * Objective: Run calculations for error measures
.         * for each country ---->> Argentina <<----                                                                 
. ***************************************************************************
. 
. 
. ** model = YYGU ** <<-- modify 1 
. * lcolor gold
. 
. * run calculations for error - daily deaths: four error types (graphs 3 to 11), updates together
. 
. * input data files: "YYGU Argentina.dta"
. * output data files: "YYGU Argentina error.dta" (with error measures saved)
. 
. * output data dictionary files: "YYGU Argentina error data dictionary.csv"
. 
. 
. * graph 03 Error
. * graph 04 Absolute Error
. * graph 05 Percent Error
. * graph 06 Absolute Percent Error
. 
. * graph 07 mean over updates of median error by calendar months
. * graph 08 Daily deaths, mean over updates of median absolute error by calendar months
. * graph 09 Daily deaths, mean over updates of median % error by calendar months
. * graph 10 Daily deaths, mean over updates of median absolute % error by calendar months
. 
. * graph 11 Daily deaths, Average MAPE over updates and calendar months
. 
. 
. 
. 
. ** graphs:
. * "graph 03 Argentina YYGU C19 daily deaths error.pdf"
. * "graph 04 Argentina YYGU C19 daily deaths absolute error.pdf"
. * "graph 05 Argentina YYGU C19 daily deaths percent error.pdf"
. * "graph 06 Argentina YYGU C19 daily deaths absolute percent error.pdf"
. 
. * "graph 07 Argentina YYGU C19 daily deaths average median error.pdf"
. * "graph 08 Argentina YYGU C19 daily deaths average median absolute error.pdf"
. * "graph 09 Argentina YYGU C19 daily deaths average median percent error.pdf"
. * "graph 10 Argentina YYGU C19 daily deaths average median absolute percent error.pdf"
. 
. * "graph 11 Argentina YYGU C19 daily deaths Average MAPE over updates and calendar months
. 
. 
. *********************
. 
. /*
> 
> 
> CALCULATIONS:
> 
> Error = minus (Reference minus Model) 
> 
> Absolute error = | minus (Reference minus Model) |
> 
> Percent error = 100 * (minus (Reference minus Model)) / Reference
> 
> Absolute percent error = 100 * | minus (Reference minus Model) | / Reference
> 
> 
> 
> 
> Error = - (Reference - Model)
> 
> Absolute error = | - (Reference - Model) |
> 
> Percent error = 100 * (- (Reference - Model)) / Reference
> 
> Absolute percent error = 100 * | - (Reference - Model)| / Reference
> 
> */
. 
. 
. 
. 
. 
. 
. 
. use "YYGU Argentina.dta", clear 
{txt}
{com}. 
. 
. 
. 
. * gen months time bin
. 
. 
. gen month = month(date)
{txt}
{com}. 
. gen monthstr = ""
{txt}(1,143 missing values generated)

{com}. replace monthstr = "01" if month == 1
{txt}variable {bf}{res}monthstr{sf}{txt} was {bf}{res}str1{sf}{txt} now {bf}{res}str2{sf}
{txt}(103 real changes made)

{com}. replace monthstr = "02" if month == 2
{txt}(113 real changes made)

{com}. replace monthstr = "03" if month == 3
{txt}(102 real changes made)

{com}. 
. replace monthstr = "04" if month == 4
{txt}(90 real changes made)

{com}. replace monthstr = "05" if month == 5
{txt}(93 real changes made)

{com}. replace monthstr = "06" if month == 6
{txt}(90 real changes made)

{com}. 
. replace monthstr = "07" if month == 7
{txt}(93 real changes made)

{com}. replace monthstr = "08" if month == 8
{txt}(93 real changes made)

{com}. replace monthstr = "09" if month == 9
{txt}(90 real changes made)

{com}. 
. replace monthstr = "10" if month == 10
{txt}(93 real changes made)

{com}. replace monthstr = "11" if month == 11
{txt}(90 real changes made)

{com}. replace monthstr = "12" if month == 12
{txt}(93 real changes made)

{com}. 
. 
. 
. gen year = year(date)
{txt}
{com}. 
. gen yearstr = ""
{txt}(1,143 missing values generated)

{com}. replace yearstr = "2020" if year == 2020
{txt}variable {bf}{res}yearstr{sf}{txt} was {bf}{res}str1{sf}{txt} now {bf}{res}str4{sf}
{txt}(345 real changes made)

{com}. replace yearstr = "2021" if year == 2021
{txt}(365 real changes made)

{com}. replace yearstr = "2022" if year == 2022
{txt}(365 real changes made)

{com}. replace yearstr = "2023" if year == 2023
{txt}(68 real changes made)

{com}. 
. 
. egen yearmonth = concat(yearstr monthstr), p(m)
{txt}
{com}. 
. replace yearmonth = "" if yearmonth == "2023m01"
{txt}(31 real changes made)

{com}. 
. sort date yearmonth 
{txt}
{com}. 
. isid date
{txt}
{com}. 
. label var month "calendar month"
{txt}
{com}. 
. label var monthstr "calendar month string"
{txt}
{com}. 
. label var year "calendar year"
{txt}
{com}. 
. label var yearstr "calendar year string" 
{txt}
{com}. 
. label var yearmonth "calendar year and month"
{txt}
{com}. 
. *
. 
. 
. // <<-- modify 2
. 
. local list ///
> 20200407 ///
> 20200408 ///
> 20200409 ///
> 20200410 ///
> 20200411 ///
> 20200412 ///
> 20200413 ///
> 20200414 ///
> 20200415 ///
> 20200416 ///
> 20200417 ///
> 20200418 ///
> 20200419 ///
> 20200420 ///
> 20200421 ///
> 20200422 ///
> 20200423 ///
> 20200424 ///
> 20200425 ///
> 20200426 ///
> 20200427 ///
> 20200428 ///
> 20200429 ///
> 20200430 ///
> 20200501 ///
> 20200502 ///
> 20200503 ///
> 20200504 ///
> 20200505 ///
> 20200506 ///
> 20200507 ///
> 20200508 ///
> 20200509 ///
> 20200510 ///
> 20200511 ///
> 20200512 ///
> 20200513 ///
> 20200514 ///
> 20200515 ///
> 20200516 ///
> 20200517 ///
> 20200518 ///
> 20200519 ///
> 20200520 ///
> 20200521 ///
> 20200522 ///
> 20200523 ///
> 20200524 ///
> 20200525 ///
> 20200526 ///
> 20200527 ///
> 20200528 ///
> 20200529 ///
> 20200530 ///
> 20200531 ///
> 20200601 ///
> 20200602 ///
> 20200603 ///
> 20200604 ///
> 20200605 ///
> 20200606 ///
> 20200607 ///
> 20200608 ///
> 20200609 ///
> 20200610 ///
> 20200611 ///
> 20200612 ///
> 20200613 ///
> 20200614 ///
> 20200615 ///
> 20200616 ///
> 20200617 ///
> 20200618 ///
> 20200619 ///
> 20200620 ///
> 20200621 ///
> 20200622 ///
> 20200623 ///
> 20200624 ///
> 20200625 ///
> 20200626 ///
> 20200627 ///
> 20200628 ///
> 20200629 ///
> 20200630 ///
> 20200701 ///
> 20200702 ///
> 20200703 ///
> 20200704 ///
> 20200705 ///
> 20200706 ///
> 20200707 ///
> 20200708 ///
> 20200709 ///
> 20200710 ///
> 20200711 ///
> 20200712 ///
> 20200713 ///
> 20200714 ///
> 20200715 ///
> 20200716 ///
> 20200717 ///
> 20200718 ///
> 20200719 ///
> 20200720 ///
> 20200721 ///
> 20200722 ///
> 20200723 ///
> 20200724 ///
> 20200725 ///
> 20200726 ///
> 20200727 ///
> 20200728 ///
> 20200729 ///
> 20200730 ///
> 20200731 ///
> 20200801 ///
> 20200802 ///
> 20200803 ///
> 20200804 ///
> 20200805 ///
> 20200806 ///
> 20200807 ///
> 20200808 ///
> 20200809 ///
> 20200810 ///
> 20200811 ///
> 20200812 ///
> 20200813 ///
> 20200814 ///
> 20200815 ///
> 20200816 ///
> 20200817 ///
> 20200818 ///
> 20200819 ///
> 20200820 ///
> 20200821 ///
> 20200822 ///
> 20200823 ///
> 20200824 ///
> 20200825 ///
> 20200826 ///
> 20200827 ///
> 20200828 ///
> 20200829 ///
> 20200830 ///
> 20200831 ///
> 20200901 ///
> 20200902 ///
> 20200903 ///
> 20200904 ///
> 20200905 ///
> 20200906 ///
> 20200907 ///
> 20200908 ///
> 20200909 ///
> 20200910 ///
> 20200911 ///
> 20200912 ///
> 20200913 ///
> 20200914 ///
> 20200915 ///
> 20200916 ///
> 20200917 ///
> 20200918 ///
> 20200919 ///
> 20200920 ///
> 20200921 ///
> 20200922 ///
> 20200923 ///
> 20200924 ///
> 20200925 ///
> 20200926 ///
> 20200927 ///
> 20200928 ///
> 20200929 ///
> 20200930 ///
> 20201001 ///
> 20201002 ///
> 20201003 ///
> 20201004 ///
> 20201005
{txt}
{com}. 
. 
. 
. sort date
{txt}
{com}. 
. 
. * (1) gen error TYPES by calendar months and model updates
. 
. foreach update of local list {c -(}
{txt}  2{com}. 
.         * Running not quietly displays that the Stata is working and has not frozen. 
. 
. capture drop DDErrorYYGU`update'
{txt}  3{com}. gen DDErrorYYGU`update' = - (DayDeaMeSmJOHN - DayDeaMeFoYYGU`update')
{txt}  4{com}. label var DDErrorYYGU`update' "DayDeaMeFoYYGU`update' error"
{txt}  5{com}. qui replace DDErrorYYGU`update' = . if DayDeaMeSmJOHN == . // before location was added to the estimates for the country
{txt}  6{com}. qui replace DDErrorYYGU`update' = . if date == td(01jan2023) // 01jan2023 is not included in this study
{txt}  7{com}. qui replace DDErrorYYGU`update' = . if date < td(07apr2020) // 07apr2020 is the earliest date of YYGU forecasts for Argentina
{txt}  8{com}.                                                             // <<-- modify 3
. capture drop DDAbsErrYYGU`update'
{txt}  9{com}. gen DDAbsErrYYGU`update' = abs(- (DayDeaMeSmJOHN - DayDeaMeFoYYGU`update'))
{txt} 10{com}. label var DDAbsErrYYGU`update' "DayDeaMeFoYYGU`update' absolute error"
{txt} 11{com}. qui replace DDAbsErrYYGU`update' = . if DayDeaMeSmJOHN == . // before location was added to the estimates for the country
{txt} 12{com}. qui replace DDAbsErrYYGU`update' = . if date == td(01jan2023) // 01jan2023 is not included in this study
{txt} 13{com}. qui replace DDAbsErrYYGU`update' = . if date < td(07apr2020) // 07apr2020 is the earliest date of YYGU forecasts for Argentina
{txt} 14{com}. 
. capture drop DDPerErrYYGU`update'
{txt} 15{com}. gen DDPerErrYYGU`update' = (100 * (- (DayDeaMeSmJOHN - DayDeaMeFoYYGU`update'))) / DayDeaMeSmJOHN
{txt} 16{com}. label var DDPerErrYYGU`update' "DayDeaMeFoYYGU`update' percent error"
{txt} 17{com}. qui replace DDPerErrYYGU`update' = . if DayDeaMeSmJOHN == . // before location was added to the estimates for the country
{txt} 18{com}. qui replace DDPerErrYYGU`update' = . if date == td(01jan2023) // 01jan2023 is not included in this study
{txt} 19{com}. qui replace DDPerErrYYGU`update' = . if date < td(07apr2020) // 07apr2020 is the earliest date of YYGU forecasts for Argentina
{txt} 20{com}. 
. capture drop DDAbPeErYYGU`update'
{txt} 21{com}. gen DDAbPeErYYGU`update' = (100 * abs(- (DayDeaMeSmJOHN - DayDeaMeFoYYGU`update'))) / DayDeaMeSmJOHN
{txt} 22{com}. label var DDAbPeErYYGU`update' "DayDeaMeFoYYGU`update' absolute percent error" 
{txt} 23{com}. qui replace DDAbPeErYYGU`update' = . if DayDeaMeSmJOHN == . // before location was added to the estimates for the country
{txt} 24{com}. qui replace DDAbPeErYYGU`update' = . if date == td(01jan2023) // 01jan2023 is not included in this study
{txt} 25{com}. qui replace DDAbPeErYYGU`update' = . if date < td(07apr2020) // 07apr2020 is the earliest date of YYGU forecasts for Argentina
{txt} 26{com}. 
. {c )-}
{err}DayDeaMeFoYYGU20200407 not found
{txt}{search r(111), local:r(111);}

end of do-file

{search r(111), local:r(111);}

{com}. 