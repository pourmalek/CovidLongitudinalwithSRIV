{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/log CovidLongitudinal IHME.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}27 Aug 2023, 15:33:26
{txt}
{com}. 
. ***************************************************************************
. * This is "do CovidLongitudinal IHME.do"
. 
. * Project: Longitudinal assessment of COVID-19 models
. 
. * Objective: Download estimates files for IHME model                                                                   
. ***************************************************************************
. 
. 
. * download and prepare estimates files
. * input data files: download csv files
. * output data files: "IHME202?????.dta" 
. *                    "IHME countries.dta"
. *                    "IHME countries long.dta"
. 
. 
. 
. * based on combinations of |linkdate, |download, and |urldate
. * e.g.,                                    |04-Nov-21 |ihme-covid19  |2021-11-04
. * https://ihmecovid19storage.blob.core.windows.net/archive/2021-11-04/ihme-covid19.zip data_download_file_reference_2020
. 
. 
. /*
> Explanation of "linkdate", "download", and "urldate":
> 
> "linkdate" is the date of update as shown on web page https://www.healthdata.org/node/8787 titled "COVID-19 estimate downloads | Archive", that mentions "Archive dates correspond to the update in the projections tool with most recent data, which may differ from the date listed on the downloaded file." 
> 
> "linkdate" is the "update date" here.
> 
> "download" is the name of the directory that is created after downloading the files and unzipped. Later updates do not create a directory and the files get downloaded directly to the root of -present working directory- that is /IHME/.
> 
> "download" is used here with command -cd- to change directory to the created directory (and later, -cd ..- is used to come back to the root /IHME/.
> 
> "urldate" is the date mentioned in the URL of the update.
> 
> "urldate" is used in the download URL here. 
> */
. 
. 
. 
. 
. 
. 
. /*
> 
> IHME updates ("urldate")
> 
> 1               March 25, 2020 
> 2               March 26, 2020 
> 3               March 27, 2020 
> 4               March 29, 2020 
> 5               March 30, 2020 
> 6               March 31, 2020 
> 7               April 1, 2020 
> 8               April 5, 2020 
> 9               April 7, 2020 
> 10              April 8, 2020 
> 11              April 10, 2020 
> 12              April 13, 2020 
> 13              April 17, 2020 
> 14              April 21, 2020 
> 15              April 22, 2020 
> 16              April 27, 2020 
> 17              April 28, 2020 
> 18              April 29, 2020 
> 19              May 4, 2020 
> 20              May 10, 2020 
> 21              May 12, 2020 
> 22              May 20, 2020 
> 23              May 25, 2020 
> 24              May 26, 2020 
> 25              May 29, 2020 
> 26              June 5, 2020 
> 27              June 8, 2020 
> 28              June 10, 2020 
> 29              June 15, 2020 
> 30              June 25, 2020 
> 31              June 29, 2020 
> 32              July 7, 2020 
> 33              July 14, 2020 
> 34              July 22, 2020 
> 35              July 30, 2020 
> 36              August 06, 2020 
> 37              August 21, 2020 
> 38              August 27, 2020 
> 39              September 03, 2020 
> 40              September 11, 2020 
> 41              September 18, 2020 
> 42              September 24, 2020 
> 43              October 2, 2020 
> 44              October 9, 2020 
> 45              October 15, 2020 
> 46              October 22, 2020 
> 47              October 29, 2020 
> 48              November 12, 2020 
> 49              November 19, 2020 
> 50              December 3, 2020 
> 51              December 10, 2020 
> 52              December 17, 2020 
> 53              December 23, 2020
> 54              January 15, 2021 
> 55              January 22, 2021 
> 56              January 28, 2021 
> 57              February 4, 2021 
> 58              February 12, 2021 
> 59              February 20, 2021 
> 60              February 25, 2021 
> 61              March 6, 2021 
> 62              March 11, 2021 
> 63              March 17, 2021 
> 64              March 25, 2021 
> 65              April 1, 2021 
> 66              April 9, 2021 
> 67              April 16, 2021 
> 68              April 23, 2021 
> 
>                 April 30, 2021 * The reference scenario "reference_hospitalization_all_locs.csv" was omitted from IHME website after original release. 
>                 
> 69              May 6, 2021 
> 70              May 14, 2021 
> 71              May 21, 2021
> 72              May 28, 2021
> 73              June 4, 2021
> 74              June 10, 2021
> 75              June 18, 2021
> 76              June 25, 2021 
> 77              July 2, 2021
> 78              July 15, 2021 
> 79              July 23, 2021 
> 80              July 30, 2021 
> 81              August 6, 2021 
> 82              August 20, 2021 
> 83              August 26, 2021 
> 84              September 2, 2021 
> 85              September 10, 2021 
> 86              September 16, 2021 
> 87              September 23, 2021 
> 88              September 30, 2021 
> 89              October 15, 2021 
> 90              October 21, 2021 
> 91              November 4, 2021 
> 92              November 19, 2021 
> 93              December 21, 2021 
> 94              January 8, 2022 
> 95              January 14, 2022 
> 96              January 21, 2022 
> 97              February 4, 2022 
> 98              February 18, 2022 
> 99              March 21, 2022 
> 100             April 8, 2022 
> 101             May 6, 2022 
> 102             June 10, 2022 
> 103             July 19, 2022
> 104             September 12, 2022
> 105             October 24, 2022
> 106     November 18, 2022
> 107             December 16, 2022               
> */
. 
. 
. 
. 
. 
. 
. 
. grstyle init
{res}{txt}
{com}. 
. grstyle color background white
{txt}
{com}. 
. 
. 
. capture shell rm -r "ihme-covid19.zip"
{txt}
{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 1
. * linkdate              download                urldate
. * 2020-03-25    ihme-covid19    2020-03-25 
. * filename ihme-covid19_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-25" 
{res}{err}This is IHME urldate 2020-03-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: ihme-covid19/._readme.txt}
{text:    inflating: ihme-covid19/ihme-covid19_all_locs.csv}
{text:    inflating: ihme-covid19/readme.txt}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "ihme-covid19"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/ihme-covid19
{txt}
{com}. 
. import delimited using "ihme-covid19_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-9)
{res}{text}(29 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200325 DayDeaMeRaIHME20200325)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200325)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200325.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200325.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200325.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200325.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200325.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200325.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200325.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "ihme-covid19"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 2
. * linkdate              download                urldate
. * 2020-03-26    2020_03_26              2020-03-26 
. * filename hospitalization_all_locs_corrected.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-26" 
{res}{err}This is IHME urldate 2020-03-26
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-26/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_03_26/hospitalization_all_locs_corrected.csv}
{text:    inflating: 2020_03_26/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_03_26"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_03_26
{txt}
{com}. 
. import delimited using "hospitalization_all_locs_corrected.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-9)
{res}{text}(29 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200326 DayDeaMeRaIHME20200326)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200326)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200326.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200326.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200326.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200326.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200326.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200326.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200326.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_03_26"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 3
. * linkdate              download                urldate
. * 2020-03-27    2020_03_27              2020-03-27 
. * filename hospitalization_all_locs_corrected.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-27" 
{res}{err}This is IHME urldate 2020-03-27
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-27/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_03_27/hospitalization_all_locs_corrected.csv}
{text:    inflating: 2020_03_27/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_03_27"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_03_27
{txt}
{com}. 
. import delimited using "hospitalization_all_locs_corrected.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-9)
{res}{text}(29 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200327 DayDeaMeRaIHME20200327)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200327)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200327.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200327.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200327.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200327.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200327.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200327.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200327.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_03_27"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 4
. * linkdate              download                urldate
. * 2020-03-29    2020_03_29              2020-03-29 
. * filename hospitalization_all_locs_corrected.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-29" 
{res}{err}This is IHME urldate 2020-03-29
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-29/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_03_29/hospitalization_all_locs_corrected.csv}
{text:    inflating: 2020_03_29/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_03_29"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_03_29
{txt}
{com}. 
. import delimited using "hospitalization_all_locs_corrected.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-9)
{res}{text}(29 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200329 DayDeaMeRaIHME20200329)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200329)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200329.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200329.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200329.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200329.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200329.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200329.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200329.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_03_29"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 5
. * linkdate              download                urldate
. * 2020-03-30    2020_03_30              2020-03-30 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-30" 
{res}{err}This is IHME urldate 2020-03-30
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-30/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_03_30/Hospitalization_all_locs.csv}
{text:    inflating: 2020_03_30/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_03_30"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_03_30
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(31 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200330 DayDeaMeRaIHME20200330)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200330)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200330.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200330.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200330.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200330.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. replace location_name = "United States of America" if location_name == "US" 
{txt}(181 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200330.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200330.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200330.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_03_30"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 6
. * linkdate              download                urldate
. * 2020-03-31    2020_03_31.1            2020-03-31 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-03-31" 
{res}{err}This is IHME urldate 2020-03-31
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-03-31/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_03_31.1/Hospitalization_all_locs.csv}
{text:    inflating: 2020_03_31.1/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_03_31.1"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_03_31.1
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(31 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200331 DayDeaMeRaIHME20200331)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200331)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200331.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200331.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200331.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200331.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. replace location_name = "United States of America" if location_name == "US" 
{txt}(181 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200331.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200331.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200331.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_03_31.1"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 7
. * linkdate              download                urldate
. * 2020-04-01    2020_04_01.2            2020-04-01 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-01" 
{res}{err}This is IHME urldate 2020-04-01
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-01/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_01.2/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_01.2/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_01.2"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_01.2
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(31 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200401 DayDeaMeRaIHME20200401)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200401)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200401.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200401.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200401.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200401.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. replace location_name = "United States of America" if location_name == "US" 
{txt}(181 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200401.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200401.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200401.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_04_01.2"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 8
. * linkdate              download                urldate
. * 2020-04-05    2020_04_05.05.us                2020-04-05 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-05" 
{res}{err}This is IHME urldate 2020-04-05
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-05/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_05.05.us/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_05.05.us/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_05.05.us"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_05.05.us
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 9,955 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21951{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}181{col 51}{txt}Missing .: {res}0{txt}/{res}9,955

{txt}{col 19}Mean: {res}{ralign 6:22041}{txt} = {res}06may2020{txt}
{col 14}Std. dev.: {res}{ralign 6:52.252}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21996}{ralign 11:   22041}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:24feb2020}{ralign 11:22mar2020}{ralign 11:06may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200405 DayDeaMeRaIHME20200405)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200405)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200405.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200405.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200405.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200405.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. replace location_name = "United States of America" if location_name == "US" 
{txt}(0 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(9,593 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200405.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200405.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200405.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_05.05.us"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 9
. * linkdate              download                urldate
. * 2020-04-07    2020_04_05.08.all               2020-04-07 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * From 2020-04-07 some countries (and subnational levels) other than the United States are added.
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. di in red "This is IHME urldate 2020-04-07" 
{res}{err}This is IHME urldate 2020-04-07
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-07/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_05.08.all/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_05.08.all/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_05.08.all"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_05.08.all
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 25,510 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}183{col 51}{txt}Missing .: {res}0{txt}/{res}25,510

{txt}{col 19}Mean: {res}{ralign 7:22040.4}{txt} = {res}05may2020{txt}(+ 9 hours)
{col 14}Std. dev.: {res}{ralign 7:52.6055}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21968}{ralign 11:   21995}{ralign 11:   22040}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:23feb2020}{ralign 11:21mar2020}{ralign 11:05may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(181 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200407 DayDeaMeRaIHME20200407)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200407)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200407.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200407.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200407.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200407.dta", clear
{txt}
{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(19,841 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200407.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200407.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200407.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_04_05.08.all"
{txt}

{com}. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 10
. * linkdate              download                urldate
. * 2020-04-08    2020_04_07.06.all               2020-04-08 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-08" 
{res}{err}This is IHME urldate 2020-04-08
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-08/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_07.06.all/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_07.06.all/IHME_COVID_19_Data_Release_Information_Sheet_II.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_07.06.all"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_07.06.all
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 27,278 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}27,278

{txt}{col 19}Mean: {res}{ralign 7:22033.5}{txt} = {res}28apr2020{txt}(+ 11 hours)
{col 14}Std. dev.: {res}{ralign 7:57.3304}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21956}{ralign 11:   21985}{ralign 11:   22034}{ralign 11:   22083}{ralign 11:   22112}
{col 25}{ralign 9:11feb2020}{ralign 11:11mar2020}{ralign 11:29apr2020}{ralign 11:17jun2020}{ralign 11:16jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200408 DayDeaMeRaIHME20200408)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200408)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200408.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200408.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200408.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200408.dta", clear
{txt}
{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(21,541 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200408.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200408.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200408.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_07.06.all"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 11
. * linkdate              download                urldate
. * 2020-04-10    2020_04_09.04           2020-04-10 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-10" 
{res}{err}This is IHME urldate 2020-04-10
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_09.04/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_09.04/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_09.04"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_09.04
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,315 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}30,315

{txt}{col 19}Mean: {res}{ralign 7:22024}{txt} = {res}19apr2020{txt}
{col 14}Std. dev.: {res}{ralign 7:62.0655}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21938}{ralign 11:   21970}{ralign 11:   22024}{ralign 11:   22078}{ralign 11:   22110}
{col 25}{ralign 9:24jan2020}{ralign 11:25feb2020}{ralign 11:19apr2020}{ralign 11:12jun2020}{ralign 11:14jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200410 DayDeaMeRaIHME20200410)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200410)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200410.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200410.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200410.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200410.dta", clear
{txt}
{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(23,435 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200410.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200410.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200410.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_09.04"
{txt}

{com}. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 12
. * linkdate              download                urldate
. * 2020-04-13    2020_04_12.02           2020-04-13 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-13" 
{res}{err}This is IHME urldate 2020-04-13
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-13/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_12.02/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_12.02/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_12.02"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_12.02
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,530 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}30,530

{txt}{col 19}Mean: {res}{ralign 7:22024}{txt} = {res}19apr2020{txt}
{col 14}Std. dev.: {res}{ralign 7:62.0655}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21938}{ralign 11:   21970}{ralign 11:   22024}{ralign 11:   22078}{ralign 11:   22110}
{col 25}{ralign 9:24jan2020}{ralign 11:25feb2020}{ralign 11:19apr2020}{ralign 11:12jun2020}{ralign 11:14jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200413 DayDeaMeRaIHME20200413)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200413)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200413.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200413.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200413.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200413.dta", clear
{txt}
{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(23,435 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200413.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200413.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200413.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_04_12.02"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 13
. * linkdate              download                urldate
. * 2020-04-17    2020_04_16.05           2020-04-17 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-17" 
{res}{err}This is IHME urldate 2020-04-17
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-17/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_16.05/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_16.05/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_16.05"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_16.05
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,530 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}30,530

{txt}{col 19}Mean: {res}{ralign 7:22024}{txt} = {res}19apr2020{txt}
{col 14}Std. dev.: {res}{ralign 7:62.0655}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21938}{ralign 11:   21970}{ralign 11:   22024}{ralign 11:   22078}{ralign 11:   22110}
{col 25}{ralign 9:24jan2020}{ralign 11:25feb2020}{ralign 11:19apr2020}{ralign 11:12jun2020}{ralign 11:14jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200417 DayDeaMeRaIHME20200417)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200417)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200417.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200417.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200417.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200417.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(23,435 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200417.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200417.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200417.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_16.05"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 14
. * linkdate              download                urldate
. * 2020-04-21    2020_04_20.02.all               2020-04-21 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-21" 
{res}{err}This is IHME urldate 2020-04-21
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_20.02.all/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_20.02.all/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_20.02.all"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_20.02.all
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,530 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}30,530

{txt}{col 19}Mean: {res}{ralign 7:22024}{txt} = {res}19apr2020{txt}
{col 14}Std. dev.: {res}{ralign 7:62.0655}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21938}{ralign 11:   21970}{ralign 11:   22024}{ralign 11:   22078}{ralign 11:   22110}
{col 25}{ralign 9:24jan2020}{ralign 11:25feb2020}{ralign 11:19apr2020}{ralign 11:12jun2020}{ralign 11:14jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200421 DayDeaMeRaIHME20200421)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200421)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200421.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200421.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200421.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200421.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(23,435 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200421.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200421.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200421.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_20.02.all"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 15
. * linkdate              download                urldate
. * 2020-04-22    2020_04_21.08           2020-04-22 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-22" 
{res}{err}This is IHME urldate 2020-04-22
{txt}
{com}. 
. copy https://www.healthdata.org/sites/default/files/files/Projects/COVID/ihme-covid19-0422.zip ihme-covid19-0422.zip
{txt}
{com}. unzipfile ihme-covid19-0422.zip, replace
{res}{text:    inflating: 2020_04_21.08/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_21.08/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19-0422.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19-0422.zip
{txt}
{com}. 
. cd "2020_04_21.08"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_21.08
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 31,820 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}31,820

{txt}{col 19}Mean: {res}{ralign 7:22024}{txt} = {res}19apr2020{txt}
{col 14}Std. dev.: {res}{ralign 7:62.0655}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21938}{ralign 11:   21970}{ralign 11:   22024}{ralign 11:   22078}{ralign 11:   22110}
{col 25}{ralign 9:24jan2020}{ralign 11:25feb2020}{ralign 11:19apr2020}{ralign 11:12jun2020}{ralign 11:14jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200422 DayDeaMeRaIHME20200422)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200422)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200422.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200422.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200422.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200422.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(24,295 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200422.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200422.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200422.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_21.08"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 16
. * linkdate              download                urldate
. * 2020-04-27    2020_04_26.08           2020-04-27 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-27" 
{res}{err}This is IHME urldate 2020-04-27
{txt}
{com}. 
. copy https://www.healthdata.org/sites/default/files/files/Projects/COVID/downloads_0427.zip downloads_0427.zip
{txt}
{com}. unzipfile downloads_0427.zip, replace
{res}{text:    inflating: 2020_04_26.08/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_26.08/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped downloads_0427.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase downloads_0427.zip
{txt}
{com}. 
. cd "2020_04_26.08"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_26.08
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,604 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21917{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}03jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}215{col 51}{txt}Missing .: {res}0{txt}/{res}30,604

{txt}{col 19}Mean: {res}{ralign 7:22022}{txt} = {res}16apr2020{txt}(+ 23 hours)
{col 14}Std. dev.: {res}{ralign 7:61.8523}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21937}{ralign 11:   21969}{ralign 11:   22021}{ralign 11:   22075}{ralign 11:   22109}
{col 25}{ralign 9:23jan2020}{ralign 11:24feb2020}{ralign 11:16apr2020}{ralign 11:09jun2020}{ralign 11:13jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(215 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200427 DayDeaMeRaIHME20200427)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200427)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200427.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200427.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200427.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200427.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(24,113 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200427.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200427.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200427.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_26.08"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 17
. * linkdate              download                urldate
. * 2020-04-28    2020_04_27.05.c         2020-04-28 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-28" 
{res}{err}This is IHME urldate 2020-04-28
{txt}
{com}. 
. copy https://www.healthdata.org/sites/default/files/files/Projects/COVID/Downloads_0428.zip Downloads_0428.zip
{txt}
{com}. unzipfile Downloads_0428.zip, replace
{res}{text:    inflating: 2020_04_27.05.c/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_27.05.c/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped Downloads_0428.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase Downloads_0428.zip
{txt}
{com}. 
. cd "2020_04_27.05.c"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_27.05.c
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(30 vars, 30,762 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21916{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}02jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}216{col 51}{txt}Missing .: {res}0{txt}/{res}30,762

{txt}{col 19}Mean: {res}{ralign 7:22021.5}{txt} = {res}16apr2020{txt}(+ 11 hours)
{col 14}Std. dev.: {res}{ralign 7:62.1257}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21936}{ralign 11:   21968}{ralign 11:   22020}{ralign 11:   22075}{ralign 11:   22109}
{col 25}{ralign 9:22jan2020}{ralign 11:23feb2020}{ralign 11:15apr2020}{ralign 11:09jun2020}{ralign 11:13jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(216 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME  // location_id DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200428 DayDeaMeRaIHME20200428)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200428)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200428.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200428.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200428.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200428.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(24,228 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200428.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200428.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200428.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_04_27.05.c"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 18
. * linkdate              download                urldate
. * 2020-04-29    2020_04_28.02           2020-04-29 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-04-29" 
{res}{err}This is IHME urldate 2020-04-29
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-04-29/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_04_28.02/Hospitalization_all_locs.csv}
{text:    inflating: 2020_04_28.02/IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  2}
{text:        skipped:  0}
{text:      extracted:  2}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_04_28.02"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_04_28.02
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(31 vars, 29,473 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21920{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}06jan2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}212{col 51}{txt}Missing .: {res}0{txt}/{res}29,473

{txt}{col 19}Mean: {res}{ralign 7:22022}{txt} = {res}16apr2020{txt}(+ 23 hours)
{col 14}Std. dev.: {res}{ralign 7:60.7695}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21940}{ralign 11:   21970}{ralign 11:   22020}{ralign 11:   22074}{ralign 11:   22108}
{col 25}{ralign 9:26jan2020}{ralign 11:25feb2020}{ralign 11:15apr2020}{ralign 11:08jun2020}{ralign 11:12jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(212 observations deleted)

{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200429 DayDeaMeRaIHME20200429)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200429)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200429.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200429.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200429.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200429.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(0 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(23,155 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200429.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200429.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200429.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_04_28.02"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 19
. * linkdate              download                urldate
. * 2020-05-04    2020_05_04              2020-05-04 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-04" 
{res}{err}This is IHME urldate 2020-05-04
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-04/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_04/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_04/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_04/summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_04"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_04
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(38 vars, 29,841 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}203{col 51}{txt}Missing .: {res}0{txt}/{res}29,841

{txt}{col 19}Mean: {res}{ralign 7:22050}{txt} = {res}15may2020{txt}
{col 14}Std. dev.: {res}{ralign 7:58.6013}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21969}{ralign 11:   21999}{ralign 11:   22050}{ralign 11:   22101}{ralign 11:   22131}
{col 25}{ralign 9:24feb2020}{ralign 11:25mar2020}{ralign 11:15may2020}{ralign 11:05jul2020}{ralign 11:04aug2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(203 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200504 DayDeaMeRaIHME20200504)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200504)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200504.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200504.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200504.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200504.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(22,939 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200504.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200504.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200504.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_04"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 20
. * linkdate              download                urldate
. * 2020-05-10    2020_05_08              2020-05-10 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-10" 
{res}{err}This is IHME urldate 2020-05-10
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_08/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_08/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_08/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_08"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_08
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 31,572 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21901{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}18dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}251{col 51}{txt}Missing .: {res}0{txt}/{res}31,572

{txt}{col 19}Mean: {res}{ralign 7:22039.6}{txt} = {res}04may2020{txt}(+ 14 hours)
{col 14}Std. dev.: {res}{ralign 7:65.4375}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21953}{ralign 11:   21986}{ralign 11:   22041}{ralign 11:   22096}{ralign 11:   22128}
{col 25}{ralign 9:08feb2020}{ralign 11:12mar2020}{ralign 11:06may2020}{ralign 11:30jun2020}{ralign 11:01aug2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(248 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200510 DayDeaMeRaIHME20200510)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200510)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200510.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200510.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200510.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200510.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(24,580 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200510.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200510.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200510.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_08"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 21
. * linkdate              download                urldate
. * 2020-05-12    2020_05_10              2020-05-12 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-12" 
{res}{err}This is IHME urldate 2020-05-12
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-12/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_10/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_10/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_10/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_10"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_10
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 43,969 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21901{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}18dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}251{col 51}{txt}Missing .: {res}0{txt}/{res}43,969

{txt}{col 19}Mean: {res}{ralign 7:22026.5}{txt} = {res}21apr2020{txt}(+ 13 hours)
{col 14}Std. dev.: {res}{ralign 7:72.2022}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21927}{ralign 11:   21964}{ralign 11:   22027}{ralign 11:   22089}{ralign 11:   22127}
{col 25}{ralign 9:13jan2020}{ralign 11:19feb2020}{ralign 11:22apr2020}{ralign 11:23jun2020}{ralign 11:31jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(251 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200512 DayDeaMeRaIHME20200512)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200512)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200512.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200512.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200512.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200512.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(31,191 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(251 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(251 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200512.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200512.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200512.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_10"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 22
. * linkdate              download                urldate
. * 2020-05-20    2020_05_19              2020-05-20 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-20" 
{res}{err}This is IHME urldate 2020-05-20
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-20/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_19/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_19/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_19/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_19"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_19
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 44,976 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21896{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}13dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}256{col 51}{txt}Missing .: {res}0{txt}/{res}44,976

{txt}{col 19}Mean: {res}{ralign 7:22025.1}{txt} = {res}20apr2020{txt}(+ 2 hours)
{col 14}Std. dev.: {res}{ralign 7:73.0648}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21924}{ralign 11:   21962}{ralign 11:   22025}{ralign 11:   22088}{ralign 11:   22126}
{col 25}{ralign 9:10jan2020}{ralign 11:17feb2020}{ralign 11:20apr2020}{ralign 11:22jun2020}{ralign 11:30jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(256 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200520 DayDeaMeRaIHME20200520)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200520)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200520.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200520.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200520.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200520.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(31,210 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(256 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(256 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(256 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200520.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200520.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200520.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_19"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 23
. * linkdate              download                urldate
. * 2020-05-25    2020_05_23              2020-05-25 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-25" 
{res}{err}This is IHME urldate 2020-05-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_23/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_23/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_23/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_23"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_23
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 48,859 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21896{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}13dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}256{col 51}{txt}Missing .: {res}0{txt}/{res}48,859

{txt}{col 19}Mean: {res}{ralign 7:22023.6}{txt} = {res}18apr2020{txt}(+ 15 hours)
{col 14}Std. dev.: {res}{ralign 7:73.842}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21921}{ralign 11:   21960}{ralign 11:   22024}{ralign 11:   22088}{ralign 11:   22126}
{col 25}{ralign 9:07jan2020}{ralign 11:15feb2020}{ralign 11:19apr2020}{ralign 11:22jun2020}{ralign 11:30jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(256 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200525 DayDeaMeRaIHME20200525)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200525)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200525.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200525.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200525.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200525.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(34,528 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(256 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(256 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(256 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(256 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200525.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200525.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200525.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_23"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 24
. * linkdate              download                urldate
. * 2020-05-26    2020_05_23.03           2020-05-26 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-26" 
{res}{err}This is IHME urldate 2020-05-26
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-26/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_23.03/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_23.03/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_23.03/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_23.03"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_23.03
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 49,115 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21896{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}13dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}256{col 51}{txt}Missing .: {res}0{txt}/{res}49,115

{txt}{col 19}Mean: {res}{ralign 7:22023.6}{txt} = {res}18apr2020{txt}(+ 14 hours)
{col 14}Std. dev.: {res}{ralign 7:73.8423}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21921}{ralign 11:   21960}{ralign 11:   22024}{ralign 11:   22088}{ralign 11:   22126}
{col 25}{ralign 9:07jan2020}{ralign 11:15feb2020}{ralign 11:19apr2020}{ralign 11:22jun2020}{ralign 11:30jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed / is named deaths_mean
. rename deaths_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(256 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200526 DayDeaMeRaIHME20200526)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200526)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200526.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200526.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200526.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200526.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(34,528 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(256 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(256 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(256 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(256 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200526.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200526.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200526.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_23.03"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 25
. * linkdate              download                urldate
. * 2020-05-29    2020_05_28              2020-05-29 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-05-29" 
{res}{err}This is IHME urldate 2020-05-29
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-05-29/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_05_28/Hospitalization_all_locs.csv}
{text:    inflating: 2020_05_28/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_05_28/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_05_28"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_05_28
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 49,115 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21896{txt},{res}22151{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}13dec2019{txt},{res}24aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}256{col 51}{txt}Missing .: {res}0{txt}/{res}49,115

{txt}{col 19}Mean: {res}{ralign 7:22023.6}{txt} = {res}18apr2020{txt}(+ 14 hours)
{col 14}Std. dev.: {res}{ralign 7:73.8423}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21921}{ralign 11:   21960}{ralign 11:   22024}{ralign 11:   22088}{ralign 11:   22126}
{col 25}{ralign 9:07jan2020}{ralign 11:15feb2020}{ralign 11:19apr2020}{ralign 11:22jun2020}{ralign 11:30jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. * There is a new variable, deaths_mean, with values of zero (or close to zero) up to 
. *  up to one (or few) day/s before the update date, when the values are non-zero.
. * This var is used for guiding the identification of the epoch date. 
. 
. * The values of the variable, deaths_mean_smoothed, become missing on the
. *  on the same day that the values of the variable, deaths_mean, become non-zero.
. * Hence, these two variables together make the full range of dates for the estimates of daily deaths. 
. 
. replace DayDeaMeSmIHME = deaths_mean if DayDeaMeSmIHME == . 
{txt}(31,575 real changes made)

{com}. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(256 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME deaths_mean // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200529 DayDeaMeRaIHME20200529)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200529)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200529.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200529.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200529.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200529.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(34,528 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(256 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(256 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(256 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(256 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200529.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200529.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200529.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_05_28"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 26
. * linkdate              download                urldate
. * 2020-06-05    2020_06_03              2020-06-05 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. /* IHME 20200605 includes a location_name value of Georgia_two without any other Georgia_one or Georgia. 
> This should be the US state of Georgia, given the similarity of the daily deaths’ graph of 20200605 
> with those of the previous and next updates. */
. 
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-05" 
{res}{err}This is IHME urldate 2020-06-05
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-05/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_03/Hospitalization_all_locs.csv}
{text:    inflating: 2020_06_03/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_03/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_03"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_03
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 61,960 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21896{txt},{res}22179{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}13dec2019{txt},{res}21sep2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}284{col 51}{txt}Missing .: {res}0{txt}/{res}61,960

{txt}{col 19}Mean: {res}{ralign 7:22041}{txt} = {res}05may2020{txt}(+ 24 hours)
{col 14}Std. dev.: {res}{ralign 7:79.5706}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21931}{ralign 11:   21972}{ralign 11:   22041}{ralign 11:   22110}{ralign 11:   22151}
{col 25}{ralign 9:17jan2020}{ralign 11:27feb2020}{ralign 11:06may2020}{ralign 11:14jul2020}{ralign 11:24aug2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed / is not available yet
. //rename deaths_mean  DayDeaMeRaIHME
. //label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
. 
. 
. * There is a new variable, deaths_mean, with values of zero (or close to zero) up to 
. *  up to one (or few) day/s before the update date, when the values are non-zero.
. * This var is used here for guiding the identification of the epoch date. 
. 
. * The values of the variable, deaths_mean_smoothed, become missing on the
. *  on the same day that the values of the variable, deaths_mean, become non-zero.
. * Hence, these two variables together make the full range of dates for the estimates of daily deaths. 
. 
. replace DayDeaMeSmIHME = deaths_mean if DayDeaMeSmIHME == . 
{txt}(40,278 real changes made)

{com}. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia_two" // the Georgia state in USA
{txt}(276 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME deaths_mean // location_id // DayDeaMeRaIHME
{txt}
{com}. 
. // rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200605 DayDeaMeRaIHME20200605)
. rename (DayDeaMeSmIHME) (DayDeaMeSmIHME20200605)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200605.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200605.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200605.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200605.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia_two" // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(46,564 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(276 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(276 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(276 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(276 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200605.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200605.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200605.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_03"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 27
. * linkdate              download                urldate
. * 2020-06-08    2020_06_06              2020-06-08 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-08" 
{res}{err}This is IHME urldate 2020-06-08
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-08/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_06/Hospitalization_all_locs.csv}
{text:    inflating: 2020_06_06/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_06/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_06"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_06
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 41,175 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22131{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}04aug2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}183{col 51}{txt}Missing .: {res}0{txt}/{res}41,175

{txt}{col 19}Mean: {res}{ralign 7:22040}{txt} = {res}05may2020{txt}
{col 14}Std. dev.: {res}{ralign 7:52.8274}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21967}{ralign 11:   21994}{ralign 11:   22040}{ralign 11:   22086}{ralign 11:   22113}
{col 25}{ralign 9:22feb2020}{ralign 11:20mar2020}{ralign 11:05may2020}{ralign 11:20jun2020}{ralign 11:17jul2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(183 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200608 DayDeaMeRaIHME20200608)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200608.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200608.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200608.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200608.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(30,927 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(183 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(183 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(183 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(183 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200608.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200608.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200608.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_06"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 28
. * linkdate              download                urldate
. * 2020-06-10    2020_06_08              2020-06-10 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-10" 
{res}{err}This is IHME urldate 2020-06-10
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_08/Hospitalization_all_locs.csv}
{text:    inflating: 2020_06_08/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_08/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_08"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_08
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 52,299 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22189{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}241{col 51}{txt}Missing .: {res}0{txt}/{res}52,299

{txt}{col 19}Mean: {res}{ralign 7:22064.8}{txt} = {res}29may2020{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:67.2617}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21972}{ralign 11:   22007}{ralign 11:   22065}{ralign 11:   22123}{ralign 11:   22158}
{col 25}{ralign 9:27feb2020}{ralign 11:02apr2020}{ralign 11:30may2020}{ralign 11:27jul2020}{ralign 11:31aug2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(241 observations deleted)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200610 DayDeaMeRaIHME20200610)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200610.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(39,427 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(231 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(231 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(231 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(231 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_08"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 29
. * linkdate              download                urldate
. * 2020-06-15    2020_06_13              2020-06-15 
. * filename Hospitalization_all_locs.csv
. * cd
. 
. * No country of Georgia yet, no Cote d'Ivoire yet
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-15" 
{res}{err}This is IHME urldate 2020-06-15
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-15/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_13/Hospitalization_all_locs.csv}
{text:    inflating: 2020_06_13/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_13/Summary_stats_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  3}
{text:        skipped:  0}
{text:      extracted:  3}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_13"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_13
{txt}
{com}. 
. import delimited using "Hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 52,299 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22189{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}241{col 51}{txt}Missing .: {res}0{txt}/{res}52,299

{txt}{col 19}Mean: {res}{ralign 7:22064.8}{txt} = {res}29may2020{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:67.2617}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21972}{ralign 11:   22007}{ralign 11:   22065}{ralign 11:   22123}{ralign 11:   22158}
{col 25}{ralign 9:27feb2020}{ralign 11:02apr2020}{ralign 11:30may2020}{ralign 11:27jul2020}{ralign 11:31aug2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. * The country Georgia, not the Georgia state in USA
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. 
. * * for help in Identifying Georgia country and state in next update
. 
. tabstat DayDeaMeSmIHME if location_name == "Georgia" // 42.08122, update 20200615

{txt}{ralign 12:Variable} {...}
{c |}      Mean
{hline 13}{c +}{hline 10}
{ralign 12:DayDeaMeSm~E} {...}
{c |}{...}
 {res} 42.08122
{txt}{hline 13}{c BT}{hline 10}

{com}. 
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(241 observations deleted)

{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200615 DayDeaMeRaIHME20200615)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200615.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200615.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200615.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200615.dta", clear
{txt}
{com}. 
. 
. // drop if location_id == 533 // the Georgia state in USA
. 
. drop if location_name == "Georgia" // Georgia state
{txt}(0 observations deleted)

{com}. 
. // replace location_name = "Côte d'Ivoire" if location_id == 205
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(39,196 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(231 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(231 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(231 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(231 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200615.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200615.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200615.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_13"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 30
. * linkdate              download                urldate
. * 2020-06-25    2020_06_24.02           2020-06-25 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. ********************************************************************************************
. * Country of Georgia is added; Cote d'Ivoire is added **************************************
. ********************************************************************************************
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-25" 
{res}{err}This is IHME urldate 2020-06-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_24.02/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_06_24.02/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_24.02/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_06_24.02/Summary_stats_all_locs.csv}
{text:    inflating: 2020_06_24.02/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_24.02"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_24.02
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 83,386 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22189{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}241{col 51}{txt}Missing .: {res}0{txt}/{res}83,386

{txt}{col 19}Mean: {res}{ralign 7:22069}{txt} = {res}03jun2020{txt}
{col 14}Std. dev.: {res}{ralign 7:69.5705}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21973}{ralign 11:   22009}{ralign 11:   22069}{ralign 11:   22129}{ralign 11:   22165}
{col 25}{ralign 9:28feb2020}{ralign 11:04apr2020}{ralign 11:03jun2020}{ralign 11:02aug2020}{ralign 11:07sep2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace location_name = "Cote d'Ivoire" if regexm(location_name,"Ivoire") == 1
{txt}(241 real changes made)

{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200625 DayDeaMeRaIHME20200625)
{res}{txt}
{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200625.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200625.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200625.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * * Identify Georgia country and state
. 
. use "IHME 20200625.dta", replace
{txt}
{com}. 
. keep if location_name == "Georgia"
{txt}(82,904 observations deleted)

{com}. 
. gen counter = _n
{txt}
{com}. 
. gen one_or_two = 1
{txt}
{com}. 
. replace one_or_two = 2 if mod(counter, 2) == 0 // if counter is even
{txt}(241 real changes made)

{com}. 
. tabstat DayDeaMeSmIHME20200625, by(one_or_two)

{txt}Summary for variables: DayDeaMeSmIHME20200625
Group variable: one_or_two 

{ralign 10:one_or_two} {...}
{c |}      Mean
{hline 11}{c +}{hline 10}
{ralign 10:1} {...}
{c |}{...}
 {res} .0537254
{txt}{ralign 10:2} {...}
{c |}{...}
 {res} 27.44445
{txt}{hline 11}{c +}{hline 10}
{ralign 10:Total} {...}
{c |}{...}
 {res} 13.74909
{txt}{hline 11}{c BT}{hline 10}

{com}. 
. * one_or_two|      mean
. *         1 |  .0537254
. *         2 |  27.44445
. 
. 
. * We know from above lines that -tabstat DayDeaMeSmIHME if location_name == "Georgia"- // 42.08122 in update 20200615
. 
. * Therefore, location_name == "Georgia" & one_or_two == 1 is Georgia country
. * and location_name == "Georgia" & one_or_two == 2 is Georgia state.
. 
. * do not save.
. 
. 
. 
. 
. * apply to the whole file IHME 20200625
. 
. use "IHME 20200625.dta", clear
{txt}
{com}. 
. 
. gen counter = _n
{txt}
{com}. 
. gen one_or_two = 1
{txt}
{com}. 
. replace one_or_two = 2 if mod(counter, 2) == 0 // if counter is even
{txt}(41,693 real changes made)

{com}. 
. tabstat DayDeaMeSmIHME20200625 if location_name == "Georgia", by(one_or_two) 

{txt}Summary for variables: DayDeaMeSmIHME20200625
Group variable: one_or_two 

{ralign 10:one_or_two} {...}
{c |}      Mean
{hline 11}{c +}{hline 10}
{ralign 10:1} {...}
{c |}{...}
 {res} .0537254
{txt}{ralign 10:2} {...}
{c |}{...}
 {res} 27.44445
{txt}{hline 11}{c +}{hline 10}
{ralign 10:Total} {...}
{c |}{...}
 {res} 13.74909
{txt}{hline 11}{c BT}{hline 10}

{com}. 
. drop if location_name == "Georgia" & one_or_two == 2 // this is the state of Georgia
{txt}(241 observations deleted)

{com}. 
. save "IHME 20200625.dta", replace
{txt}{p 0 4 2}
file {bf}
IHME 20200625.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200625.dta", clear
{txt}
{com}. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(45,790 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(241 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(241 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(241 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(241 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(241 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(241 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(241 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(241 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(241 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(241 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200625.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200625.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200625.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_24.02"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 31
. * linkdate              download                urldate
. * 2020-06-29    2020_06_27              2020-06-29 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id not present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-06-29" 
{res}{err}This is IHME urldate 2020-06-29
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-06-29/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_06_27/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_06_27/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_06_27/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_06_27/Summary_stats_all_locs.csv}
{text:    inflating: 2020_06_27/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_06_27"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_06_27
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 83,386 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22189{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}241{col 51}{txt}Missing .: {res}0{txt}/{res}83,386

{txt}{col 19}Mean: {res}{ralign 7:22069}{txt} = {res}03jun2020{txt}
{col 14}Std. dev.: {res}{ralign 7:69.5705}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21973}{ralign 11:   22009}{ralign 11:   22069}{ralign 11:   22129}{ralign 11:   22165}
{col 25}{ralign 9:28feb2020}{ralign 11:04apr2020}{ralign 11:03jun2020}{ralign 11:02aug2020}{ralign 11:07sep2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200629 DayDeaMeRaIHME20200629)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200629.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200629.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200629.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. use "IHME 20200629.dta", clear
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if regexm(location_name,"Ivoire") == 1
{txt}(241 real changes made)

{com}. 
. gen counter = _n
{txt}
{com}. 
. gen one_or_two = 1
{txt}
{com}. 
. replace one_or_two = 2 if mod(counter, 2) == 0 // if counter is even
{txt}(41,693 real changes made)

{com}. 
. tabstat DayDeaMeSmIHME20200629 if location_name == "Georgia", by(one_or_two) 

{txt}Summary for variables: DayDeaMeSmIHME20200629
Group variable: one_or_two 

{ralign 10:one_or_two} {...}
{c |}      Mean
{hline 11}{c +}{hline 10}
{ralign 10:1} {...}
{c |}{...}
 {res} .0537254
{txt}{ralign 10:2} {...}
{c |}{...}
 {res} 21.60056
{txt}{hline 11}{c +}{hline 10}
{ralign 10:Total} {...}
{c |}{...}
 {res} 10.82714
{txt}{hline 11}{c BT}{hline 10}

{com}. 
. drop if location_name == "Georgia" & one_or_two == 2 // this is the state of Georgia
{txt}(241 observations deleted)

{com}. 
. save "IHME 20200629.dta", replace
{txt}{p 0 4 2}
file {bf}
IHME 20200629.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200629.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(45,790 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(241 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(241 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(241 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(241 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(241 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(241 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(241 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(241 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(241 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(241 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200629.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200629.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200629.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_06_27"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 32
. * linkdate              download                urldate
. * 2020-07-07    2020_07_04              2020-07-07 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id not present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-07-07" 
{res}{err}This is IHME urldate 2020-07-07
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-07-07/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_07_04/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_04/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_07_04/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_04/Summary_stats_all_locs.csv}
{text:    inflating: 2020_07_04/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_07_04"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_07_04
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(44 vars, 87,040 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22220{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}272{col 51}{txt}Missing .: {res}0{txt}/{res}87,040

{txt}{col 19}Mean: {res}{ralign 7:22084.5}{txt} = {res}18jun2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:78.5196}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21976}{ralign 11: 22016.5}{ralign 11: 22084.5}{ralign 11: 22152.5}{ralign 11:   22193}
{col 25}{ralign 9:02mar2020}{ralign 11:11apr2020}{ralign 11:18jun2020}{ralign 11:25aug2020}{ralign 11:05oct2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200707 DayDeaMeRaIHME20200707)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200707.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200707.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200707.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. use "IHME 20200707.dta", clear
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if regexm(location_name,"Ivoire") == 1
{txt}(272 real changes made)

{com}. 
. gen counter = _n
{txt}
{com}. 
. gen one_or_two = 1
{txt}
{com}. 
. replace one_or_two = 2 if mod(counter, 2) == 0 // if counter is even
{txt}(43,520 real changes made)

{com}. 
. tabstat DayDeaMeSmIHME20200707 if location_name == "Georgia", by(one_or_two) 

{txt}Summary for variables: DayDeaMeSmIHME20200707
Group variable: one_or_two 

{ralign 10:one_or_two} {...}
{c |}      Mean
{hline 11}{c +}{hline 10}
{ralign 10:1} {...}
{c |}{...}
 {res} .0447777
{txt}{ralign 10:2} {...}
{c |}{...}
 {res} 14.18007
{txt}{hline 11}{c +}{hline 10}
{ralign 10:Total} {...}
{c |}{...}
 {res} 7.112424
{txt}{hline 11}{c BT}{hline 10}

{com}. 
. drop if location_name == "Georgia" & one_or_two == 2 // this is the state of Georgia
{txt}(272 observations deleted)

{com}. 
. save "IHME 20200707.dta", replace
{txt}{p 0 4 2}
file {bf}
IHME 20200707.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200707.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(47,872 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(272 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(272 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(272 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(272 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(272 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(272 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(272 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(272 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(272 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200707.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200707.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200707.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_07_04"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 33
. * linkdate              download                urldate
. * 2020-07-14    2020_07_11              2020-07-14 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-07-14" 
{res}{err}This is IHME urldate 2020-07-14
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-07-14/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_07_11/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_11/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_07_11/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_11/Summary_stats_all_locs.csv}
{text:    inflating: 2020_07_11/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_07_11"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_07_11
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(45 vars, 86,768 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22220{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}272{col 51}{txt}Missing .: {res}0{txt}/{res}86,768

{txt}{col 19}Mean: {res}{ralign 7:22084.5}{txt} = {res}18jun2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:78.5196}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21976}{ralign 11: 22016.5}{ralign 11: 22084.5}{ralign 11: 22152.5}{ralign 11:   22193}
{col 25}{ralign 9:02mar2020}{ralign 11:11apr2020}{ralign 11:18jun2020}{ralign 11:25aug2020}{ralign 11:05oct2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        272       50.00       50.00
{txt}        533 {c |}{res}        272       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        544      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(272 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        272      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        272      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(272 real changes made)

{com}. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200714 DayDeaMeRaIHME20200714)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200714.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200714.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200714.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200714.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(47,600 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(272 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(272 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(272 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(272 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(272 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(272 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(272 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(272 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(272 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200714.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200714.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200714.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_07_11"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 34
. * linkdate              download                urldate
. * 2020-07-22    2020_07_18              2020-07-22 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-07-22" 
{res}{err}This is IHME urldate 2020-07-22
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-07-22/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_07_18/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_18/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_07_18/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_18/Summary_stats_all_locs.csv}
{text:    inflating: 2020_07_18/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_07_18"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_07_18
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(45 vars, 91,664 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22220{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}272{col 51}{txt}Missing .: {res}0{txt}/{res}91,664

{txt}{col 19}Mean: {res}{ralign 7:22084.5}{txt} = {res}18jun2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:78.5195}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21976}{ralign 11: 22016.5}{ralign 11: 22084.5}{ralign 11: 22152.5}{ralign 11:   22193}
{col 25}{ralign 9:02mar2020}{ralign 11:11apr2020}{ralign 11:18jun2020}{ralign 11:25aug2020}{ralign 11:05oct2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        272       50.00       50.00
{txt}        533 {c |}{res}        272       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        544      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(272 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        272      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        272      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(272 real changes made)

{com}. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME // location_id
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200722 DayDeaMeRaIHME20200722)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200722.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200722.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200722.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200722.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(49,776 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(272 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(272 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(272 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(272 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(272 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(272 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(272 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(272 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(272 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(272 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200722.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200722.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200722.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_07_18"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 35
. * linkdate              download                urldate
. * 2020-07-30    2020_07_26              2020-07-30 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-07-30" 
{res}{err}This is IHME urldate 2020-07-30
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-07-30/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_07_26/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_26/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_07_26/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_07_26/Summary_stats_all_locs.csv}
{text:    inflating: 2020_07_26/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_07_26"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_07_26
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(45 vars, 91,392 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22220{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}272{col 51}{txt}Missing .: {res}0{txt}/{res}91,392

{txt}{col 19}Mean: {res}{ralign 7:22084.5}{txt} = {res}18jun2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:78.5195}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21976}{ralign 11: 22016.5}{ralign 11: 22084.5}{ralign 11: 22152.5}{ralign 11:   22193}
{col 25}{ralign 9:02mar2020}{ralign 11:11apr2020}{ralign 11:18jun2020}{ralign 11:25aug2020}{ralign 11:05oct2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed 
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        272       50.00       50.00
{txt}        533 {c |}{res}        272       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        544      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(272 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        272      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        272      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(272 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME location_id // 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200730 DayDeaMeRaIHME20200730)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200730.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200730.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200730.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200730.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(48,688 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(272 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(272 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(272 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(272 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(272 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(272 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(272 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(272 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(272 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(272 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200730.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200730.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200730.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_07_26"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 36
. * linkdate              download                urldate
. * 2020-08-06    2020_08_06              2020-08-06 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-08-06" 
{res}{err}This is IHME urldate 2020-08-06
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-08-06/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_08_06/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_06/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_08_06/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_06/Summary_stats_all_locs.csv}
{text:    inflating: 2020_08_06/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_08_06"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_08_06
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(45 vars, 100,868 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22250{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}302{col 51}{txt}Missing .: {res}0{txt}/{res}100,868

{txt}{col 19}Mean: {res}{ralign 7:22099.5}{txt} = {res}03jul2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:87.1798}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21979}{ralign 11:   22024}{ralign 11: 22099.5}{ralign 11:   22175}{ralign 11:   22220}
{col 25}{ralign 9:05mar2020}{ralign 11:19apr2020}{ralign 11:03jul2020}{ralign 11:17sep2020}{ralign 11:01nov2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        302       50.00       50.00
{txt}        533 {c |}{res}        302       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        604      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(302 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        302      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        302      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(302 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME location_id
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200806 DayDeaMeRaIHME20200806)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200806.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200806.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200806.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200806.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(53,756 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(302 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(302 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(302 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(302 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(302 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(302 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(302 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(302 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(302 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(302 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200806.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200806.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200806.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_08_06"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 37
. * linkdate              download                urldate
. * 2020-08-21    2020_08_21              2020-08-21 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-08-21" 
{res}{err}This is IHME urldate 2020-08-21
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-08-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_08_21/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_21/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_08_21/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_21/Summary_stats_all_locs.csv}
{text:    inflating: 2020_08_21/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_08_21"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_08_21
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(45 vars, 101,170 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22250{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}302{col 51}{txt}Missing .: {res}0{txt}/{res}101,170

{txt}{col 19}Mean: {res}{ralign 7:22099.5}{txt} = {res}03jul2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:87.1798}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21979}{ralign 11:   22024}{ralign 11: 22099.5}{ralign 11:   22175}{ralign 11:   22220}
{col 25}{ralign 9:05mar2020}{ralign 11:19apr2020}{ralign 11:03jul2020}{ralign 11:17sep2020}{ralign 11:01nov2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        302       50.00       50.00
{txt}        533 {c |}{res}        302       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        604      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(302 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        302      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        302      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(302 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME location_id
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200821 DayDeaMeRaIHME20200821)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200821.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200821.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200821.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200821.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(53,756 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(302 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(302 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(302 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(302 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(302 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(302 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(302 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(302 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(302 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(302 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200821.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200821.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200821.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_08_21"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 38
. * linkdate              download                urldate
. * 2020-08-27    2020_08_27              2020-08-27 
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-08-27" 
{res}{err}This is IHME urldate 2020-08-27
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-08-27/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_08_27/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_27/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_08_27/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_08_27/Summary_stats_all_locs.csv}
{text:    inflating: 2020_08_27/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd "2020_08_27"
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_08_27
{txt}
{com}. 
. import delimited using "Reference_hospitalization_all_locs.csv", clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 101,774 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22250{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2020{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}302{col 51}{txt}Missing .: {res}0{txt}/{res}101,774

{txt}{col 19}Mean: {res}{ralign 7:22099.5}{txt} = {res}03jul2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:87.1798}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21979}{ralign 11:   22024}{ralign 11: 22099.5}{ralign 11:   22175}{ralign 11:   22220}
{col 25}{ralign 9:05mar2020}{ralign 11:19apr2020}{ralign 11:03jul2020}{ralign 11:17sep2020}{ralign 11:01nov2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed 
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        302       50.00       50.00
{txt}        533 {c |}{res}        302       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        604      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(302 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        302      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        302      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(302 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name DayDeaMeSmIHME DayDeaMeRaIHME location_id
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200827 DayDeaMeRaIHME20200827)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200827.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200827.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200827.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200827.dta", clear
{txt}
{com}. 
. 
. * * Georgia and Cote d'Ivoire accounted for in lines above.
. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(53,756 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(302 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(302 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(302 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(302 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(302 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(302 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(302 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(302 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(302 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(302 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200827.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200827.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200827.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_08_27"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. **********************************************
. **********************************************
. **********************************************
. 
. **********************************************
. **********************************************
. **********************************************
. 
. **********************************************
. **********************************************
. **********************************************
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 39
. * linkdate      download        urldate
. * 03-Sep-20     2020_09_02      2020-09-03      
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * location "Global: is added. 
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-09-03" 
{res}{err}This is IHME urldate 2020-09-03
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-09-03/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_09_02/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_02/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_09_02/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_02/Summary_stats_all_locs.csv}
{text:    inflating: 2020_09_02/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_09_02
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_09_02
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(65 vars, 129,870 obs)

{com}. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22281{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}333{col 51}{txt}Missing .: {res}0{txt}/{res}129,870

{txt}{col 19}Mean: {res}{ralign 7:22115}{txt} = {res}19jul2020{txt}
{col 14}Std. dev.: {res}{ralign 7:96.1288}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21982}{ralign 11:   22032}{ralign 11:   22115}{ralign 11:   22198}{ralign 11:   22248}
{col 25}{ralign 9:08mar2020}{ralign 11:27apr2020}{ralign 11:19jul2020}{ralign 11:10oct2020}{ralign 11:29nov2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. 
. * The country Georgia, not the Georgia state in USA
. * The country Georgia had lower daily deaths compared with the Georgia state in USA
. 
. tab DayDeaMeRaIHME if location_name == "Georgia" & date == td(01Sep2020)

      {txt}Daily {c |}
Deaths Mean {c |}
        not {c |}
   smoothed {c |}
    IHME S1 {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
   .1795594 {c |}{res}          1       50.00       50.00
{txt}   63.62469 {c |}{res}          1       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}          2      100.00
{txt}
{com}. 
. tab DayDeaMeRaIHME location_id if location_name == "Georgia" & date == td(01Sep2020)

     {txt}Daily {c |}
    Deaths {c |}
  Mean not {c |}
  smoothed {c |}      location_id
   IHME S1 {c |}        35        533 {c |}     Total
{hline 11}{c +}{hline 22}{c +}{hline 10}
  .1795594 {c |}{res}         1          0 {txt}{c |}{res}         1 
{txt}  63.62469 {c |}{res}         0          1 {txt}{c |}{res}         1 
{txt}{hline 11}{c +}{hline 22}{c +}{hline 10}
     Total {c |}{res}         1          1 {txt}{c |}{res}         2 
{txt}
{com}. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(333 observations deleted)

{com}. 
. 
. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        333      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        333      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200903 DayDeaMeRaIHME20200903)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200903.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200903.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200903.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200903.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(75,258 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(333 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(333 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(333 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(333 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(333 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(333 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(333 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(333 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(333 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(333 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(333 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(333 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200903.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200903.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200903.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_09_02"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 40
. 
. * linkdate      download        urldate
. * 11-Sep-20     2020_09_11      2020-09-11
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. * Country of Georgia present, Cote d'Ivoire yet present, location_id present
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-09-11" 
{res}{err}This is IHME urldate 2020-09-11
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-09-11/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_09_11/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_11/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_09_11/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_11/Summary_stats_all_locs.csv}
{text:    inflating: 2020_09_11/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_09_11
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_09_11
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 129,870 obs)

{com}.                 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22281{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}333{col 51}{txt}Missing .: {res}0{txt}/{res}129,870

{txt}{col 19}Mean: {res}{ralign 7:22115}{txt} = {res}19jul2020{txt}
{col 14}Std. dev.: {res}{ralign 7:96.1288}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21982}{ralign 11:   22032}{ralign 11:   22115}{ralign 11:   22198}{ralign 11:   22248}
{col 25}{ralign 9:08mar2020}{ralign 11:27apr2020}{ralign 11:19jul2020}{ralign 11:10oct2020}{ralign 11:29nov2020}
{txt}
{com}. drop year month day date2               
{txt}
{com}.                 
.                 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME     
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        333       50.00       50.00
{txt}        533 {c |}{res}        333       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        666      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(333 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        333      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        333      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200911 DayDeaMeRaIHME20200911)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200911.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200911.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200911.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200911.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(75,258 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(333 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(333 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(333 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(333 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(333 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(333 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(333 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(333 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(333 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(333 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(333 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(333 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200911.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200911.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200911.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_09_11"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 41
. * linkdate      download        urldate
. * 18-Sep-20     2020_09_18      2020-09-18
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-09-18" 
{res}{err}This is IHME urldate 2020-09-18
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-09-18/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_09_18/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_18/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_09_18/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_18/Summary_stats_all_locs.csv}
{text:    inflating: 2020_09_18/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_09_18
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_09_18
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 207,137 obs)

{com}.                 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22281{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}333{col 51}{txt}Missing .: {res}0{txt}/{res}207,137

{txt}{col 19}Mean: {res}{ralign 7:22092.2}{txt} = {res}26jun2020{txt}(+ 6 hours)
{col 14}Std. dev.: {res}{ralign 7:89.2967}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21977}{ralign 11:   22017}{ralign 11:   22085}{ralign 11:   22153}{ralign 11:   22228}
{col 25}{ralign 9:03mar2020}{ralign 11:12apr2020}{ralign 11:19jun2020}{ralign 11:26aug2020}{ralign 11:09nov2020}
{txt}
{com}. drop year month day date2               
{txt}
{com}.                 
.                 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME     
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        538       49.91       49.91
{txt}        533 {c |}{res}        540       50.09      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,078      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(540 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        538      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        538      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(538 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200918 DayDeaMeRaIHME20200918)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200918.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200918.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200918.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200918.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(538 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(119,878 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(538 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(538 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(538 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(538 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(537 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(537 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(538 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(538 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(538 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(537 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(538 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(538 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200918.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200918.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200918.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_09_18"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 42
. * linkdate      download        urldate
. * 24-Sep-20     2020_09_24      2020-09-24
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-09-24" 
{res}{err}This is IHME urldate 2020-09-24
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-09-24/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_09_24/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_24/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_09_24/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_09_24/Summary_stats_all_locs.csv}
{text:    inflating: 2020_09_24/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_09_24
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_09_24
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 128,538 obs)

{com}.                 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22281{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}333{col 51}{txt}Missing .: {res}0{txt}/{res}128,538

{txt}{col 19}Mean: {res}{ralign 7:22115}{txt} = {res}19jul2020{txt}
{col 14}Std. dev.: {res}{ralign 7:96.1288}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21982}{ralign 11:   22032}{ralign 11:   22115}{ralign 11:   22198}{ralign 11:   22248}
{col 25}{ralign 9:08mar2020}{ralign 11:27apr2020}{ralign 11:19jul2020}{ralign 11:10oct2020}{ralign 11:29nov2020}
{txt}
{com}. drop year month day date2               
{txt}
{com}.                 
.                 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME     
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        333       50.00       50.00
{txt}        533 {c |}{res}        333       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        666      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(333 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        333      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        333      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20200924 DayDeaMeRaIHME20200924)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20200924.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20200924.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200924.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20200924.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(73,926 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(333 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(333 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(333 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(333 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(333 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(333 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(333 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(333 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(333 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(333 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(333 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(333 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20200924.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20200924.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20200924.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_09_24"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 43
. * linkdate      download        urldate
. * 02-Oct-20     2020_10_02      2020-10-02
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}. 
. 
. di in red "This is IHME urldate 2020-10-02" 
{res}{err}This is IHME urldate 2020-10-02
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-10-02/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_10_02/Best_mask_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_02/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_10_02/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_02/Summary_stats_all_locs.csv}
{text:    inflating: 2020_10_02/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_10_02
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_10_02
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 129,870 obs)

{com}. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22281{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}333{col 51}{txt}Missing .: {res}0{txt}/{res}129,870

{txt}{col 19}Mean: {res}{ralign 7:22115}{txt} = {res}19jul2020{txt}
{col 14}Std. dev.: {res}{ralign 7:96.1288}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21982}{ralign 11:   22032}{ralign 11:   22115}{ralign 11:   22198}{ralign 11:   22248}
{col 25}{ralign 9:08mar2020}{ralign 11:27apr2020}{ralign 11:19jul2020}{ralign 11:10oct2020}{ralign 11:29nov2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
.                 
.                 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        333       50.00       50.00
{txt}        533 {c |}{res}        333       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        666      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(333 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        333      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        333      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201002 DayDeaMeRaIHME20201002)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201002.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201002.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201002.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201002.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(333 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(75,258 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(333 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(333 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(333 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(333 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(333 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(333 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(333 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(333 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(333 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(333 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(333 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(333 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201002.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201002.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201002.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_10_02"
{txt}

{com}. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 44
. * linkdate      download        urldate
. * 09-Oct-20     2020_10_09  2020-10-09
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-10-09" 
{res}{err}This is IHME urldate 2020-10-09
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-10-09/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_10_09/Best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_09/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_10_09/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_09/Summary_stats_all_locs.csv}
{text:    inflating: 2020_10_09/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_10_09
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_10_09
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 141,960 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22312{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01feb2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}364{col 51}{txt}Missing .: {res}0{txt}/{res}141,960

{txt}{col 19}Mean: {res}{ralign 7:22130.5}{txt} = {res}03aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:105.078}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21985}{ralign 11: 22039.5}{ralign 11: 22130.5}{ralign 11: 22221.5}{ralign 11:   22276}
{col 25}{ralign 9:11mar2020}{ralign 11:04may2020}{ralign 11:03aug2020}{ralign 11:02nov2020}{ralign 11:27dec2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        364       50.00       50.00
{txt}        533 {c |}{res}        364       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        728      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(364 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        364      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        364      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201009 DayDeaMeRaIHME20201009)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201009.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201009.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201009.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201009.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(82,264 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(364 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(364 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(364 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(364 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(364 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(364 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(364 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(364 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(364 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(364 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(364 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(364 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201009.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201009.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201009.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_10_09"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 45
. * linkdate      download        urldate
. * 15-Oct-20     2020_10_15      2020-10-15
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-10-15" 
{res}{err}This is IHME urldate 2020-10-15
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-10-15/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_10_15/Best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_15/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_10_15/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_15/Summary_stats_all_locs.csv}
{text:    inflating: 2020_10_15/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_10_15
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_10_15
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 141,960 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22312{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01feb2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}364{col 51}{txt}Missing .: {res}0{txt}/{res}141,960

{txt}{col 19}Mean: {res}{ralign 7:22130.5}{txt} = {res}03aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:105.078}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21985}{ralign 11: 22039.5}{ralign 11: 22130.5}{ralign 11: 22221.5}{ralign 11:   22276}
{col 25}{ralign 9:11mar2020}{ralign 11:04may2020}{ralign 11:03aug2020}{ralign 11:02nov2020}{ralign 11:27dec2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        364       50.00       50.00
{txt}        533 {c |}{res}        364       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        728      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(364 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        364      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        364      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201015 DayDeaMeRaIHME20201015)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201015.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201015.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201015.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201015.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(82,264 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(364 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(364 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(364 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(364 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(364 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(364 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(364 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(364 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(364 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(364 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(364 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(364 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201015.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201015.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201015.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2020_10_15"
{txt}

{com}. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 46
. * linkdate      download        urldate
. * 22-Oct-20     2020_10_22      2020-10-22
. * filename Reference_hospitalization_all_locs.csv
. * cd
. 
. 
. clear 
{txt}
{com}.                                 
. 
. di in red "This is IHME urldate 2020-10-22" 
{res}{err}This is IHME urldate 2020-10-22
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-10-22/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_10_22/Best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_22/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_10_22/Reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_22/Summary_stats_all_locs.csv}
{text:    inflating: 2020_10_22/Worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_10_22
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_10_22
{txt}
{com}. 
. import delimited using Reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(68 vars, 141,960 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22312{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01feb2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}364{col 51}{txt}Missing .: {res}0{txt}/{res}141,960

{txt}{col 19}Mean: {res}{ralign 7:22130.5}{txt} = {res}03aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:105.078}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21985}{ralign 11: 22039.5}{ralign 11: 22130.5}{ralign 11: 22221.5}{ralign 11:   22276}
{col 25}{ralign 9:11mar2020}{ralign 11:04may2020}{ralign 11:03aug2020}{ralign 11:02nov2020}{ralign 11:27dec2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        364       50.00       50.00
{txt}        533 {c |}{res}        364       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        728      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(364 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        364      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        364      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201022 DayDeaMeRaIHME20201022)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201022.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201022.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201022.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(82,264 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(364 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(364 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(364 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(364 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(364 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(364 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(364 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(364 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(364 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(364 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(364 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(364 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201022.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201022.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2020_10_22"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 47
. * linkdate      download        urldate
. * 29-Oct-20     2020_10_29      2020-10-29
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020_10_29" 
{res}{err}This is IHME urldate 2020_10_29
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-10-29/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_10_29/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_29/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_10_29/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_10_29/Summary_stats_all_locs.csv}
{text:    inflating: 2020_10_29/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_10_29
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_10_29
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 141,960 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22312{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01feb2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}364{col 51}{txt}Missing .: {res}0{txt}/{res}141,960

{txt}{col 19}Mean: {res}{ralign 7:22130.5}{txt} = {res}03aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:105.078}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21985}{ralign 11: 22039.5}{ralign 11: 22130.5}{ralign 11: 22221.5}{ralign 11:   22276}
{col 25}{ralign 9:11mar2020}{ralign 11:04may2020}{ralign 11:03aug2020}{ralign 11:02nov2020}{ralign 11:27dec2020}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        364       50.00       50.00
{txt}        533 {c |}{res}        364       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        728      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(364 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        364      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        364      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201029 DayDeaMeRaIHME20201029)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201029.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201029.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201029.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20201029.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(364 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(82,264 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(364 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(364 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(364 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(364 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(364 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(364 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(364 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(364 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(364 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(364 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(364 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(364 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201029.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201029.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201029.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_10_29"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 48
. * linkdate      download        urldate
. * 12-Nov-20     2020_11_12      2020-11-12
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-11-12" 
{res}{err}This is IHME urldate 2020-11-12
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-11-12/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_11_12/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_11_12/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_11_12/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_11_12/Summary_stats_all_locs.csv}
{text:    inflating: 2020_11_12/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_11_12
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_11_12
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 152,880 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22340{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01mar2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}392{col 51}{txt}Missing .: {res}0{txt}/{res}152,880

{txt}{col 19}Mean: {res}{ralign 7:22144.5}{txt} = {res}17aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:113.161}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21988}{ralign 11: 22046.5}{ralign 11: 22144.5}{ralign 11: 22242.5}{ralign 11:   22301}
{col 25}{ralign 9:14mar2020}{ralign 11:11may2020}{ralign 11:17aug2020}{ralign 11:23nov2020}{ralign 11:21jan2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        392       50.00       50.00
{txt}        533 {c |}{res}        392       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        784      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(392 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        392      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        392      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(392 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201112 DayDeaMeRaIHME20201112)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201112.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201112.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201112.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201112.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(392 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(88,592 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(392 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(392 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(392 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(392 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(392 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(392 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(392 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(392 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(392 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(392 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(392 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(392 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201112.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201112.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201112.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2020_11_12"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 49
. * linkdate      download        urldate
. * 19-Nov-20     2020_11_19      2020-11-19
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-11-19" 
{res}{err}This is IHME urldate 2020-11-19
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-11-19/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_11_19/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_11_19/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_11_19/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_11_19/Summary_stats_all_locs.csv}
{text:    inflating: 2020_11_19/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_11_19
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_11_19
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 153,272 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22340{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01mar2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}392{col 51}{txt}Missing .: {res}0{txt}/{res}153,272

{txt}{col 19}Mean: {res}{ralign 7:22144.5}{txt} = {res}17aug2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:113.161}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21988}{ralign 11: 22046.5}{ralign 11: 22144.5}{ralign 11: 22242.5}{ralign 11:   22301}
{col 25}{ralign 9:14mar2020}{ralign 11:11may2020}{ralign 11:17aug2020}{ralign 11:23nov2020}{ralign 11:21jan2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        392       50.00       50.00
{txt}        533 {c |}{res}        392       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        784      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(392 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        392      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        392      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(392 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201119 DayDeaMeRaIHME20201119)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201119.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201119.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201119.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201119.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(392 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(88,592 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(392 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(392 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(392 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(392 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(392 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(392 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(392 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(392 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(392 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(392 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(392 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(392 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201119.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201119.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201119.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_11_19"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 50
. * linkdate      download        urldate
. * 03-Dec-20     2020_12_03      2020-12-03
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-12-03" 
{res}{err}This is IHME urldate 2020-12-03
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-12-03/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_12_03/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_03/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_12_03/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_03/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_03/Summary_stats_all_locs.csv}
{text:    inflating: 2020_12_03/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_03/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_03/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_12_03
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_12_03
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 165,393 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22371{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01apr2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}423{col 51}{txt}Missing .: {res}0{txt}/{res}165,393

{txt}{col 19}Mean: {res}{ralign 6:22160}{txt} = {res}02sep2020{txt}
{col 14}Std. dev.: {res}{ralign 6:122.11}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21991}{ralign 11:   22054}{ralign 11:   22160}{ralign 11:   22266}{ralign 11:   22329}
{col 25}{ralign 9:17mar2020}{ralign 11:19may2020}{ralign 11:02sep2020}{ralign 11:17dec2020}{ralign 11:18feb2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        423       50.00       50.00
{txt}        533 {c |}{res}        423       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        846      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(423 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        423      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        423      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201203 DayDeaMeRaIHME20201203)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201203.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201203.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201203.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20201203.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(95,598 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(423 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(423 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(423 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(423 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(423 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(423 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(423 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(423 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(423 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(423 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(423 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(423 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201203.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201203.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201203.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_12_03"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 51
. * linkdate      download        urldate
. * 10-Dec-20     2020_12_10      2020-12-10
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-12-10" 
{res}{err}This is IHME urldate 2020-12-10
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-12-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_12_10/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_10/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_12_10/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_10/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_10/Summary_stats_all_locs.csv}
{text:    inflating: 2020_12_10/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_10/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_10/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_12_10
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_12_10
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 165,393 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22371{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01apr2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}423{col 51}{txt}Missing .: {res}0{txt}/{res}165,393

{txt}{col 19}Mean: {res}{ralign 6:22160}{txt} = {res}02sep2020{txt}
{col 14}Std. dev.: {res}{ralign 6:122.11}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21991}{ralign 11:   22054}{ralign 11:   22160}{ralign 11:   22266}{ralign 11:   22329}
{col 25}{ralign 9:17mar2020}{ralign 11:19may2020}{ralign 11:02sep2020}{ralign 11:17dec2020}{ralign 11:18feb2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        423       50.00       50.00
{txt}        533 {c |}{res}        423       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        846      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(423 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        423      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        423      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201210 DayDeaMeRaIHME20201210)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201210.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201210.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201210.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201210.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(95,598 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(423 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(423 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(423 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(423 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(423 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(423 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(423 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(423 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(423 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(423 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(423 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(423 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201210.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201210.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201210.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2020_12_10"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 52
. * linkdate      download        urldate
. * 17-Dec-20     2020_12_17      2020-12-17
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-12-17" 
{res}{err}This is IHME urldate 2020-12-17
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-12-17/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_12_17/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_17/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_12_17/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_17/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_17/Summary_stats_all_locs.csv}
{text:    inflating: 2020_12_17/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_17/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_17/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_12_17
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_12_17
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 165,656 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22371{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01apr2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}423{col 51}{txt}Missing .: {res}0{txt}/{res}165,656

{txt}{col 19}Mean: {res}{ralign 7:22159.8}{txt} = {res}01sep2020{txt}(+ 18 hours)
{col 14}Std. dev.: {res}{ralign 7:122.179}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21991}{ralign 11:   22054}{ralign 11:   22160}{ralign 11:   22266}{ralign 11:   22329}
{col 25}{ralign 9:17mar2020}{ralign 11:19may2020}{ralign 11:02sep2020}{ralign 11:17dec2020}{ralign 11:18feb2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        423       50.00       50.00
{txt}        533 {c |}{res}        423       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        846      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(423 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        423      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        423      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201217 DayDeaMeRaIHME20201217)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201217.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201217.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201217.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20201217.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(95,603 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(423 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(423 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(423 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(423 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(423 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(423 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(423 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(423 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(423 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(423 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(423 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(423 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201217.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201217.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201217.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2020_12_17"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 53
. * linkdate      download        urldate
. * 23-Dec-20     2020_12_23      2020-12-23
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2020-12-23" 
{res}{err}This is IHME urldate 2020-12-23
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2020-12-23/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2020_12_23/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_23/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2020_12_23/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_23/reference_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_23/Summary_stats_all_locs.csv}
{text:    inflating: 2020_12_23/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_23/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2020_12_23/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2020_12_23
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2020_12_23
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 165,633 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22371{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01apr2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}423{col 51}{txt}Missing .: {res}0{txt}/{res}165,633

{txt}{col 19}Mean: {res}{ralign 7:22159.9}{txt} = {res}01sep2020{txt}(+ 22 hours)
{col 14}Std. dev.: {res}{ralign 7:122.105}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21991}{ralign 11:   22054}{ralign 11:   22160}{ralign 11:   22266}{ralign 11:   22329}
{col 25}{ralign 9:17mar2020}{ralign 11:19may2020}{ralign 11:02sep2020}{ralign 11:17dec2020}{ralign 11:18feb2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        423       50.00       50.00
{txt}        533 {c |}{res}        423       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        846      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(423 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        423      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        423      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20201223 DayDeaMeRaIHME20201223)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20201223.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20201223.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201223.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20201223.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(423 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(95,838 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(423 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(423 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(423 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(423 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(423 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(423 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(423 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(423 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(423 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(423 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(423 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(423 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20201223.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20201223.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20201223.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2020_12_23"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 54
. * linkdate      download        urldate
. * 15-Jan-21     2021-01-15      2021-01-15
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-01-15" 
{res}{err}This is IHME urldate 2021-01-15
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-01-15/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021-01-15/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021-01-15/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2021-01-15/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021-01-15/Summary_stats_all_locs.csv}
{text:    inflating: 2021-01-15/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2021-01-15/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2021-01-15/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  7}
{text:        skipped:  0}
{text:      extracted:  7}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021-01-15
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021-01-15
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(69 vars, 177,292 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22401{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}453{col 51}{txt}Missing .: {res}0{txt}/{res}177,292

{txt}{col 19}Mean: {res}{ralign 7:22174.9}{txt} = {res}16sep2020{txt}(+ 23 hours)
{col 14}Std. dev.: {res}{ralign 7:130.753}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21994}{ralign 11:   22062}{ralign 11:   22175}{ralign 11:   22288}{ralign 11:   22356}
{col 25}{ralign 9:20mar2020}{ralign 11:27may2020}{ralign 11:17sep2020}{ralign 11:08jan2021}{ralign 11:17mar2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        453       50.00       50.00
{txt}        533 {c |}{res}        453       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        906      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(453 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        453      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        453      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210115 DayDeaMeRaIHME20210115)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210115.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210115.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210115.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210115.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(102,547 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(453 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(453 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(453 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(453 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(453 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(453 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(453 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(453 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(453 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(453 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(453 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(453 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210115.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210115.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210115.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021-01-15"
{txt}

{com}. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 55
. * linkdate      download        urldate
. * 22-Jan-21     2021_01_22      2021-01-22
. * filename reference_hospitalization_all_locs.csv
. * cd
.                 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-01-22" 
{res}{err}This is IHME urldate 2021-01-22
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-01-22/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_01_22/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_22/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_01_22/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_22/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_22/Summary_stats_all_locs.csv}
{text:    inflating: 2021_01_22/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_22/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_22/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_01_22
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_01_22
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 177,123 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22401{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}453{col 51}{txt}Missing .: {res}0{txt}/{res}177,123

{txt}{col 19}Mean: {res}{ralign 6:22175}{txt} = {res}17sep2020{txt}
{col 14}Std. dev.: {res}{ralign 6:130.77}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21994}{ralign 11:   22062}{ralign 11:   22175}{ralign 11:   22288}{ralign 11:   22356}
{col 25}{ralign 9:20mar2020}{ralign 11:27may2020}{ralign 11:17sep2020}{ralign 11:08jan2021}{ralign 11:17mar2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        453       50.00       50.00
{txt}        533 {c |}{res}        453       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        906      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(453 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        453      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        453      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210122 DayDeaMeRaIHME20210122)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210122.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210122.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210122.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210122.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(102,378 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(453 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(453 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(453 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(453 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(453 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(453 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(453 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(453 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(453 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(453 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(453 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(453 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210122.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210122.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210122.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2021_01_22"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 56
. * linkdate      download        urldate
. * 28-Jan-21     2021_01_28      2021-01-28
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-01-28" 
{res}{err}This is IHME urldate 2021-01-28
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-01-28/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_01_28/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_28/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_01_28/no_vaccine_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_28/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_28/Summary_stats_all_locs.csv}
{text:    inflating: 2021_01_28/vaccine_fast_elderly_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_28/vaccine_fast_hospitalization_all_locs.csv}
{text:    inflating: 2021_01_28/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_01_28
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_01_28
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 176,670 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22401{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}453{col 51}{txt}Missing .: {res}0{txt}/{res}176,670

{txt}{col 19}Mean: {res}{ralign 6:22175}{txt} = {res}17sep2020{txt}
{col 14}Std. dev.: {res}{ralign 6:130.77}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21994}{ralign 11:   22062}{ralign 11:   22175}{ralign 11:   22288}{ralign 11:   22356}
{col 25}{ralign 9:20mar2020}{ralign 11:27may2020}{ralign 11:17sep2020}{ralign 11:08jan2021}{ralign 11:17mar2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. /*
> 
> A tiny defect in IHME update 2021-01-28:
> 
> The original variable "deaths_mean_smoothed" is blank for "date" 2021-01-23, 2021-01-24, and
> 2021-01-25 in 69 location-dates. 
> 
> One way forward is to assume it is logical and safe to replace those blank values
> with correspondent values of the original variable "deaths_mean" (that is not smoothed). 
> */
. 
. codebook DayDeaMeSmIHME

{txt}{hline}
{res}DayDeaMeSmIHME{right:Daily Deaths Mean smoothed IHME S1}
{txt}{hline}

{col 19}Type: Numeric ({res}float{txt})

{col 18}Range: [{res}0{txt},{res}15823.183{txt}]{col 55}Units: {res}1.000e-13
{col 10}{txt}Unique values: {res}154,268{col 51}{txt}Missing .: {res}69{txt}/{res}176,670

{txt}{col 19}Mean: {res}{ralign 7:68.6489}
{txt}{col 14}Std. dev.: {res}{ralign 7:505.13}

{txt}{col 12}Percentiles: {col 25}{ralign 7:10%}{ralign 10:25%}{ralign 10:50%}{ralign 10:75%}{ralign 10:90%}
{res}{col 25}{ralign 7:.0001}{ralign 10: .229139}{ralign 10: 3.65489}{ralign 10:  17.905}{ralign 10: 64.0623}
{txt}
{com}. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(69 real changes made)

{com}. 
. codebook DayDeaMeSmIHME

{txt}{hline}
{res}DayDeaMeSmIHME{right:Daily Deaths Mean smoothed IHME S1}
{txt}{hline}

{col 19}Type: Numeric ({res}float{txt})

{col 18}Range: [{res}0{txt},{res}15877.334{txt}]{col 55}Units: {res}1.000e-13
{col 10}{txt}Unique values: {res}154,337{col 51}{txt}Missing .: {res}0{txt}/{res}176,670

{txt}{col 19}Mean: {res}{ralign 7:69.3255}
{txt}{col 14}Std. dev.: {res}{ralign 7:510.661}

{txt}{col 12}Percentiles: {col 25}{ralign 7:10%}{ralign 10:25%}{ralign 10:50%}{ralign 10:75%}{ralign 10:90%}
{res}{col 25}{ralign 7:.0001}{ralign 10: .229625}{ralign 10: 3.65984}{ralign 10: 17.9376}{ralign 10: 64.3111}
{txt}
{com}. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        453       50.00       50.00
{txt}        533 {c |}{res}        453       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        906      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(453 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        453      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        453      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210128 DayDeaMeRaIHME20210128)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210128.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210128.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210128.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210128.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(453 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(102,378 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(453 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(453 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(453 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(453 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(453 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(453 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(453 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(453 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(453 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(453 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(453 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(453 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210128.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210128.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210128.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2021_01_28"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 57
. * linkdate      download        urldate
. * 04-Feb-21     2021_02_04      2021-02-04
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. 
. clear
{txt}
{com}.                                 
. di in red "This is IHME urldate 2021-02-04" 
{res}{err}This is IHME urldate 2021-02-04
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-02-04/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_02_04/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_04/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_02_04/new_variant_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_04/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_04/Summary_stats_all_locs.csv}
{text:    inflating: 2021_02_04/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  6}
{text:        skipped:  0}
{text:      extracted:  6}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_02_04
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_02_04
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 188,760 obs)

{com}. 
. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22432{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}484{col 51}{txt}Missing .: {res}0{txt}/{res}188,760

{txt}{col 19}Mean: {res}{ralign 7:22190.5}{txt} = {res}02oct2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:139.719}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21997}{ralign 11: 22069.5}{ralign 11: 22190.5}{ralign 11: 22311.5}{ralign 11:   22384}
{col 25}{ralign 9:23mar2020}{ralign 11:03jun2020}{ralign 11:02oct2020}{ralign 11:31jan2021}{ralign 11:14apr2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(15 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        484       50.00       50.00
{txt}        533 {c |}{res}        484       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        968      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(484 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        484      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        484      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210204 DayDeaMeRaIHME20210204)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210204.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210204.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210204.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210204.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(109,384 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(484 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(484 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(484 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(484 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(484 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(484 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(484 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(484 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(484 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(484 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(484 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(484 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210204.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210204.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210204.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2021_02_04"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 58
. * linkdate      download        urldate
. * 12-Feb-21     2021_02_12      2021-02-12
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-02-12" 
{res}{err}This is IHME urldate 2021-02-12
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-02-12/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_02_12/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_12/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_02_12/new_variant_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_12/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_12/Summary_stats_all_locs.csv}
{text:    inflating: 2021_02_12/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  6}
{text:        skipped:  0}
{text:      extracted:  6}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_02_12
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_02_12
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 189,247 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22432{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}484{col 51}{txt}Missing .: {res}0{txt}/{res}189,247

{txt}{col 19}Mean: {res}{ralign 7:22190.5}{txt} = {res}02oct2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:139.718}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21997}{ralign 11:   22070}{ralign 11:   22191}{ralign 11:   22311}{ralign 11:   22384}
{col 25}{ralign 9:23mar2020}{ralign 11:04jun2020}{ralign 11:03oct2020}{ralign 11:31jan2021}{ralign 11:14apr2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(13 real changes made)

{com}. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        484       50.00       50.00
{txt}        533 {c |}{res}        484       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        968      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(484 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        484      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        484      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210212 DayDeaMeRaIHME20210212)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210212.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210212.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210212.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210212.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(109,384 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(484 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(484 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(484 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(484 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(484 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(484 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(484 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(484 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(484 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(484 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(484 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(484 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210212.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210212.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210212.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021_02_12"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 59
. * linkdate      download        urldate
. * 20-Feb-21     2021_02_20      2021-02-20
. * filename reference_hospitalization_all_locs.csv
. * cd
.                 
. clear           
{txt}
{com}. 
. di in red "This is IHME urldate 2021-02-20" 
{res}{err}This is IHME urldate 2021-02-20
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-02-20/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_02_20/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_20/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_02_20/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_20/Summary_stats_all_locs.csv}
{text:    inflating: 2021_02_20/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_02_20
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_02_20
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 189,244 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22432{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}484{col 51}{txt}Missing .: {res}0{txt}/{res}189,244

{txt}{col 19}Mean: {res}{ralign 7:22190.5}{txt} = {res}02oct2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:139.719}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21997}{ralign 11: 22069.5}{ralign 11: 22190.5}{ralign 11: 22311.5}{ralign 11:   22384}
{col 25}{ralign 9:23mar2020}{ralign 11:03jun2020}{ralign 11:02oct2020}{ralign 11:31jan2021}{ralign 11:14apr2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(13 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        484       50.00       50.00
{txt}        533 {c |}{res}        484       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        968      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(484 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        484      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        484      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210220 DayDeaMeRaIHME20210220)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210220.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210220.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210220.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210220.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(109,384 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(484 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(484 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(484 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(484 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(484 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(484 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(484 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(484 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(484 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(484 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(484 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(484 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210220.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210220.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210220.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2021_02_20"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 60
. * linkdate      download        urldate
. * 25-Feb-21     2021_02_25      2021-02-25
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-02-25" 
{res}{err}This is IHME urldate 2021-02-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-02-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_02_25/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_25/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_02_25/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_02_25/Summary_stats_all_locs.csv}
{text:    inflating: 2021_02_25/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_02_25
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_02_25
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 188,760 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22432{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}484{col 51}{txt}Missing .: {res}0{txt}/{res}188,760

{txt}{col 19}Mean: {res}{ralign 7:22190.5}{txt} = {res}02oct2020{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:139.719}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:21997}{ralign 11: 22069.5}{ralign 11: 22190.5}{ralign 11: 22311.5}{ralign 11:   22384}
{col 25}{ralign 9:23mar2020}{ralign 11:03jun2020}{ralign 11:02oct2020}{ralign 11:31jan2021}{ralign 11:14apr2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(74 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        484       50.00       50.00
{txt}        533 {c |}{res}        484       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        968      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(484 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        484      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        484      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210225 DayDeaMeRaIHME20210225)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210225.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210225.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210225.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210225.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(484 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(109,384 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(484 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(484 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(484 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(484 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(484 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(484 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(484 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(484 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(484 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(484 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(484 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(484 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210225.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210225.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210225.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2021_02_25"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 61
. * linkdate      download        urldate
. * 06-Mar-21     2021_03_06      2021-03-06
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-03-06" 
{res}{err}This is IHME urldate 2021-03-06
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-03-06/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_03_06/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_06/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_03_06/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_06/Summary_stats_all_locs.csv}
{text:    inflating: 2021_03_06/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_03_06
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_03_06
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 197,240 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22462{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}514{col 51}{txt}Missing .: {res}0{txt}/{res}197,240

{txt}{col 19}Mean: {res}{ralign 7:22209.5}{txt} = {res}21oct2020{txt}(+ 13 hours)
{col 14}Std. dev.: {res}{ralign 7:146.147}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22007}{ralign 11:   22083}{ralign 11:   22210}{ralign 11:   22336}{ralign 11:   22412}
{col 25}{ralign 9:02apr2020}{ralign 11:17jun2020}{ralign 11:22oct2020}{ralign 11:25feb2021}{ralign 11:12may2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,256 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        513       50.29       50.29
{txt}        533 {c |}{res}        507       49.71      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,020      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(507 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        514      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        514      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210306 DayDeaMeRaIHME20210306)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210306.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210306.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210306.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210306.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(114,790 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(499 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(490 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(499 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(514 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(485 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(514 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(514 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(502 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(514 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(488 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(514 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(496 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210306.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210306.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210306.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021_03_06"
{txt}

{com}. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 62
. * linkdate      download        urldate
. * 11-Mar-21     2021_03_11      2021-03-11
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-03-11" 
{res}{err}This is IHME urldate 2021-03-11
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-03-11/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_03_11/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_11/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_03_11/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_11/Summary_stats_all_locs.csv}
{text:    inflating: 2021_03_11/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_03_11
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_03_11
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 197,292 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22462{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}514{col 51}{txt}Missing .: {res}0{txt}/{res}197,292

{txt}{col 19}Mean: {res}{ralign 7:22209.5}{txt} = {res}21oct2020{txt}(+ 11 hours)
{col 14}Std. dev.: {res}{ralign 7:146.185}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22007}{ralign 11:   22083}{ralign 11:   22210}{ralign 11:   22336}{ralign 11:   22412}
{col 25}{ralign 9:02apr2020}{ralign 11:17jun2020}{ralign 11:22oct2020}{ralign 11:25feb2021}{ralign 11:12may2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,334 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        513       50.29       50.29
{txt}        533 {c |}{res}        507       49.71      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,020      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(507 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        514      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        514      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210311 DayDeaMeRaIHME20210311)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210311.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210311.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210311.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210311.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(114,842 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(499 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(490 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(499 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(514 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(485 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(514 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(514 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(502 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(514 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(488 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(514 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(496 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210311.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210311.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210311.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021_03_11"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 63
. * linkdate      download        urldate
. * 17-Mar-21     2021_03_17      2021-03-17
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-03-17" 
{res}{err}This is IHME urldate 2021-03-17
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-03-17/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_03_17/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_17/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_03_17/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_17/Summary_stats_all_locs.csv}
{text:    inflating: 2021_03_17/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_03_17
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_03_17
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 196,802 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22462{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}514{col 51}{txt}Missing .: {res}0{txt}/{res}196,802

{txt}{col 19}Mean: {res}{ralign 7:22209.5}{txt} = {res}21oct2020{txt}(+ 11 hours)
{col 14}Std. dev.: {res}{ralign 7:146.196}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22007}{ralign 11:   22083}{ralign 11:   22210}{ralign 11:   22336}{ralign 11:   22412}
{col 25}{ralign 9:02apr2020}{ralign 11:17jun2020}{ralign 11:22oct2020}{ralign 11:25feb2021}{ralign 11:12may2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,434 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        513       50.29       50.29
{txt}        533 {c |}{res}        507       49.71      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,020      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(507 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        514      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        514      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210317 DayDeaMeRaIHME20210317)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210317.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210317.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210317.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210317.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(114,848 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(499 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(490 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(499 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(514 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(485 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(514 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(514 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(502 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(514 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(488 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(514 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(496 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210317.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210317.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210317.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2021_03_17"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 64
. * linkdate      download        urldate
. * 25-Mar-21     2021_03_25      2021-03-25
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-03-25" 
{res}{err}This is IHME urldate 2021-03-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-03-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_03_25/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_25/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_03_25/Summary_stats_all_locs.csv}
{text:    inflating: 2021_03_25/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  4}
{text:        skipped:  0}
{text:      extracted:  4}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_03_25
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_03_25
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 196,847 obs)

{com}. 
. 
.  
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22462{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}514{col 51}{txt}Missing .: {res}0{txt}/{res}196,847

{txt}{col 19}Mean: {res}{ralign 7:22209.4}{txt} = {res}21oct2020{txt}(+ 10 hours)
{col 14}Std. dev.: {res}{ralign 7:146.227}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22007}{ralign 11:   22083}{ralign 11:   22209}{ralign 11:   22336}{ralign 11:   22412}
{col 25}{ralign 9:02apr2020}{ralign 11:17jun2020}{ralign 11:21oct2020}{ralign 11:25feb2021}{ralign 11:12may2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,562 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        513       50.29       50.29
{txt}        533 {c |}{res}        507       49.71      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,020      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(507 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        514      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        514      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210325 DayDeaMeRaIHME20210325)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210325.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210325.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210325.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210325.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(114,893 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(499 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(490 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(499 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(514 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(485 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(514 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(514 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(502 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(514 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(488 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(514 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(496 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210325.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210325.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210325.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021_03_25"
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 65
. * linkdate      download        urldate
. * 01-Apr-21     2021_04_01      2021-04-01
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-04-01" 
{res}{err}This is IHME urldate 2021-04-01
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-04-01/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_04_01/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_01/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_04_01/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_01/Summary_stats_all_locs.csv}
{text:    inflating: 2021_04_01/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_04_01
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_04_01
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 196,847 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22462{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}514{col 51}{txt}Missing .: {res}0{txt}/{res}196,847

{txt}{col 19}Mean: {res}{ralign 7:22209.4}{txt} = {res}21oct2020{txt}(+ 10 hours)
{col 14}Std. dev.: {res}{ralign 7:146.227}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22007}{ralign 11:   22083}{ralign 11:   22209}{ralign 11:   22336}{ralign 11:   22412}
{col 25}{ralign 9:02apr2020}{ralign 11:17jun2020}{ralign 11:21oct2020}{ralign 11:25feb2021}{ralign 11:12may2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,495 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        513       50.29       50.29
{txt}        533 {c |}{res}        507       49.71      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,020      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(507 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        514      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        514      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210401 DayDeaMeRaIHME20210401)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210401.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210401.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210401.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210401.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(514 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(114,893 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(499 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(490 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(499 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(514 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(485 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(514 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(514 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(502 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(514 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(488 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(514 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(496 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210401.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210401.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210401.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021_04_01"
{txt}

{com}. 
. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 66
. * linkdate      download        urldate
. * 09-Apr-21     2021_04_09      2021-04-09
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-04-09" 
{res}{err}This is IHME urldate 2021-04-09
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-04-09/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_04_09/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_09/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_04_09/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_09/Summary_stats_all_locs.csv}
{text:    inflating: 2021_04_09/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_04_09
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_04_09
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(73 vars, 208,406 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22493{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01aug2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}545{col 51}{txt}Missing .: {res}0{txt}/{res}208,406

{txt}{col 19}Mean: {res}{ralign 7:22224.9}{txt} = {res}05nov2020{txt}(+ 21 hours)
{col 14}Std. dev.: {res}{ralign 7:155.19}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22010}{ralign 11:   22091}{ralign 11:   22225}{ralign 11:   22359}{ralign 11:   22440}
{col 25}{ralign 9:05apr2020}{ralign 11:25jun2020}{ralign 11:06nov2020}{ralign 11:20mar2021}{ralign 11:09jun2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(2,949 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        544       50.28       50.28
{txt}        533 {c |}{res}        538       49.72      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,082      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(538 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        545      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        545      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210409 DayDeaMeRaIHME20210409)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210409.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210409.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210409.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210409.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(121,354 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(530 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(521 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(530 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(545 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(516 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(545 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(545 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(533 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(545 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(519 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(545 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(527 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210409.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210409.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210409.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "2021_04_09"
{txt}

{com}. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 67
. * linkdate      download        urldate
. * 16-Apr-21     2021-04-16      2021-04-16
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-04-16" 
{res}{err}This is IHME urldate 2021-04-16
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-04-16/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021-04-16/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021-04-16/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021-04-16/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021-04-16/Summary_stats_all_locs.csv}
{text:    inflating: 2021-04-16/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021-04-16
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021-04-16
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(67 vars, 204,256 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22493{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01aug2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}545{col 51}{txt}Missing .: {res}0{txt}/{res}204,256

{txt}{col 19}Mean: {res}{ralign 7:22225.9}{txt} = {res}06nov2020{txt}(+ 23 hours)
{col 14}Std. dev.: {res}{ralign 7:154.68}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22012}{ralign 11:   22092}{ralign 11:   22226}{ralign 11:   22360}{ralign 11:   22440}
{col 25}{ralign 9:07apr2020}{ralign 11:26jun2020}{ralign 11:07nov2020}{ralign 11:21mar2021}{ralign 11:09jun2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        544       50.28       50.28
{txt}        533 {c |}{res}        538       49.72      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,082      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(538 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        545      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        545      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210416 DayDeaMeRaIHME20210416)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210416.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210416.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210416.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210416.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(117,327 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(530 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(521 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(530 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(545 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(516 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(545 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(545 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(533 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(545 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(519 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(545 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(527 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210416.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210416.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210416.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
.              
. shell rm -r "2021-04-16"
{txt}

{com}. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 68
. * linkdate      download        urldate
. * 23-Apr-21     2021_04_22      2021-04-23
. *  | April 23, 2021 | 
. * filename reference_hospitalization_all_locs.csv
. * cd
.                                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-04-23" 
{res}{err}This is IHME urldate 2021-04-23
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-04-23/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_04_22/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_22/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_04_22/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_04_22/Summary_stats_all_locs.csv}
{text:    inflating: 2021_04_22/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_04_22
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_04_22
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(67 vars, 204,750 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22493{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01aug2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}545{col 51}{txt}Missing .: {res}0{txt}/{res}204,750

{txt}{col 19}Mean: {res}{ralign 7:22225.4}{txt} = {res}06nov2020{txt}(+ 10 hours)
{col 14}Std. dev.: {res}{ralign 7:154.882}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22011}{ralign 11:   22092}{ralign 11:   22226}{ralign 11:   22360}{ralign 11:   22440}
{col 25}{ralign 9:06apr2020}{ralign 11:26jun2020}{ralign 11:07nov2020}{ralign 11:21mar2021}{ralign 11:09jun2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        544       50.28       50.28
{txt}        533 {c |}{res}        538       49.72      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,082      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(538 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        545      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        545      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210423 DayDeaMeRaIHME20210423)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210423.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210423.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210423.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210423.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(545 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(117,756 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(530 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(521 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(530 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(545 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(516 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(545 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(545 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(533 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(545 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(519 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(545 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(527 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210423.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210423.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210423.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "2021_04_22"
{txt}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * April 30, 2021 
. * The reference scenario "reference_hospitalization_all_locs.csv" 
. * was omitted from IHME website after original release. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 69
. * linkdate      download        urldate
. * 06-May-21     2021-05-06      2021-05-06
. * filename reference_hospitalization_all_locs.csv
. * cd 
. 
. clear 
{txt}
{com}.                                 
. di in red "This is IHME urldate 2021-05-06" 
{res}{err}This is IHME urldate 2021-05-06
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-05-06/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021-05-06/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021-05-06/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021-05-06/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021-05-06/Summary_stats_all_locs.csv}
{text:    inflating: 2021-05-06/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021-05-06
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021-05-06
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(91 vars, 216,793 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22524{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}576{col 51}{txt}Missing .: {res}0{txt}/{res}216,793

{txt}{col 19}Mean: {res}{ralign 7:22240.7}{txt} = {res}21nov2020{txt}(+ 16 hours)
{col 14}Std. dev.: {res}{ralign 7:163.977}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22014}{ralign 11:   22099}{ralign 11:   22241}{ralign 11:   22383}{ralign 11:   22468}
{col 25}{ralign 9:09apr2020}{ralign 11:03jul2020}{ralign 11:22nov2020}{ralign 11:13apr2021}{ralign 11:07jul2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        575       50.26       50.26
{txt}        533 {c |}{res}        569       49.74      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,144      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(569 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        576      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        576      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210506 DayDeaMeRaIHME20210506)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210506.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210506.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210506.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210506.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(124,727 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(561 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(552 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(561 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(576 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(547 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(576 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(576 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(564 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(576 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(550 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(576 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(558 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210506.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210506.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210506.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. shell rm -r "2021-05-06"
{txt}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 70
. * linkdate      download                urldate
. * 14-May-21     ihme-covid19    2021-05-14
. * filename reference_hospitalization_all_locs.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-05-14" 
{res}{err}This is IHME urldate 2021-05-14
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-05-14/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(88 vars, 216,793 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22524{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}576{col 51}{txt}Missing .: {res}0{txt}/{res}216,793

{txt}{col 19}Mean: {res}{ralign 7:22240.7}{txt} = {res}21nov2020{txt}(+ 16 hours)
{col 14}Std. dev.: {res}{ralign 7:163.977}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22014}{ralign 11:   22099}{ralign 11:   22241}{ralign 11:   22383}{ralign 11:   22468}
{col 25}{ralign 9:09apr2020}{ralign 11:03jul2020}{ralign 11:22nov2020}{ralign 11:13apr2021}{ralign 11:07jul2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        575       50.26       50.26
{txt}        533 {c |}{res}        569       49.74      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,144      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(569 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        576      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        576      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210514 DayDeaMeRaIHME20210514)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210514.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210514.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210514.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210514.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(124,727 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(561 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(552 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(561 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(576 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(547 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(576 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(576 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(564 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(576 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(550 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(576 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(558 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210514.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210514.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210514.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 71  
.         
. * linkdate      linkdate        download                urldate
. * 20210521      21-May-21       ihme-covid19    2021-05-21
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-05-21" 
{res}{err}This is IHME urldate 2021-05-21
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-05-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(88 vars, 217,103 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22524{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}576{col 51}{txt}Missing .: {res}0{txt}/{res}217,103

{txt}{col 19}Mean: {res}{ralign 7:22240.2}{txt} = {res}21nov2020{txt}(+ 6 hours)
{col 14}Std. dev.: {res}{ralign 7:164.206}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22013}{ralign 11:   22098}{ralign 11:   22240}{ralign 11:   22382}{ralign 11:   22468}
{col 25}{ralign 9:08apr2020}{ralign 11:02jul2020}{ralign 11:21nov2020}{ralign 11:12apr2021}{ralign 11:07jul2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        575       50.26       50.26
{txt}        533 {c |}{res}        569       49.74      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,144      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(569 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        576      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        576      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210521 DayDeaMeRaIHME20210521)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210521.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210521.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210521.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210521.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(125,019 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(561 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(552 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(561 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(576 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(547 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(576 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(576 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(564 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(576 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(550 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(576 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(558 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210521.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210521.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210521.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 72     
.         
. * linkdate      linkdate        download                urldate
. * 20210528      28-May-21       ihme-covid19    2021-05-28
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-05-28" 
{res}{err}This is IHME urldate 2021-05-28
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-05-28/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(88 vars, 217,103 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22524{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}576{col 51}{txt}Missing .: {res}0{txt}/{res}217,103

{txt}{col 19}Mean: {res}{ralign 7:22240.2}{txt} = {res}21nov2020{txt}(+ 6 hours)
{col 14}Std. dev.: {res}{ralign 7:164.206}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22013}{ralign 11:   22098}{ralign 11:   22240}{ralign 11:   22382}{ralign 11:   22468}
{col 25}{ralign 9:08apr2020}{ralign 11:02jul2020}{ralign 11:21nov2020}{ralign 11:12apr2021}{ralign 11:07jul2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        575       50.26       50.26
{txt}        533 {c |}{res}        569       49.74      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,144      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(569 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        576      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        576      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210528 DayDeaMeRaIHME20210528)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210528.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210528.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210528.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210528.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(125,019 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(561 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(552 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(561 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(576 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(547 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(576 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(576 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(564 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(576 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(550 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(576 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(558 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210528.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210528.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210528.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 73             
. 
. * linkdate      linkdate        download                urldate
. * 20210604      04-Jun-21       ihme-covid19    2021-06-04
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-06-04" 
{res}{err}This is IHME urldate 2021-06-04
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-06-04/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 218,158 obs)

{com}. 
. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22524{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}576{col 51}{txt}Missing .: {res}0{txt}/{res}218,158

{txt}{col 19}Mean: {res}{ralign 7:22240.3}{txt} = {res}21nov2020{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:164.156}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22013}{ralign 11:   22098}{ralign 11:   22240}{ralign 11:   22382}{ralign 11:   22468}
{col 25}{ralign 9:08apr2020}{ralign 11:02jul2020}{ralign 11:21nov2020}{ralign 11:12apr2021}{ralign 11:07jul2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        575       50.26       50.26
{txt}        533 {c |}{res}        569       49.74      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,144      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(569 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        576      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        576      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210604 DayDeaMeRaIHME20210604)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210604.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210604.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210604.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210604.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(576 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(125,019 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(561 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(552 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(561 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(576 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(547 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(576 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(576 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(564 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(576 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(550 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(576 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(558 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210604.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210604.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210604.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 74     
.         
. * linkdate      linkdate        download                urldate
. * 20210610      10-Jun-21       ihme-covid19    2021-06-10
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-06-10" 
{res}{err}This is IHME urldate 2021-06-10
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-06-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 229,697 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22554{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}606{col 51}{txt}Missing .: {res}0{txt}/{res}229,697

{txt}{col 19}Mean: {res}{ralign 7:22255.3}{txt} = {res}06dec2020{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:172.824}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22016}{ralign 11:   22106}{ralign 11:   22255}{ralign 11:   22405}{ralign 11:   22495}
{col 25}{ralign 9:11apr2020}{ralign 11:10jul2020}{ralign 11:06dec2020}{ralign 11:05may2021}{ralign 11:03aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        605       50.25       50.25
{txt}        533 {c |}{res}        599       49.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,204      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(599 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        606      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        606      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210610 DayDeaMeRaIHME20210610)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210610.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(131,594 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(591 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(582 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(591 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(606 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(577 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(606 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(606 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(594 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(606 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(580 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(606 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(588 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 75             
. 
. * linkdate      linkdate        download                urldate
. * 20210618      18-Jun-21       ihme-covid19    2021-06-18
. 
. 
. /*
> Command -cd- not needed (and is harmful) because the downloaded data files are from 
> a zipped file without including a directory. 
> 
> The command -cd- is needed when the downloaded data files are from a zipped file 
> where the files are first enveloped by a directory and then the directory is zipped.
> */
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-06-18" 
{res}{err}This is IHME urldate 2021-06-18
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-06-18/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 229,695 obs)

{com}. 
. 
. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22554{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}606{col 51}{txt}Missing .: {res}0{txt}/{res}229,695

{txt}{col 19}Mean: {res}{ralign 7:22255.3}{txt} = {res}06dec2020{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:172.822}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22016}{ralign 11:   22106}{ralign 11:   22255}{ralign 11:   22405}{ralign 11:   22495}
{col 25}{ralign 9:11apr2020}{ralign 11:10jul2020}{ralign 11:06dec2020}{ralign 11:05may2021}{ralign 11:03aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        605       50.25       50.25
{txt}        533 {c |}{res}        599       49.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,204      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(599 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        606      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        606      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210618 DayDeaMeRaIHME20210618)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd .. // not needed
. 
. save "IHME 20210618.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210618.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210618.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210618.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(131,589 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(591 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(582 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(591 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(606 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(577 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(606 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(606 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(594 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(606 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(580 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(606 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(588 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210618.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210618.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210618.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 76             
. 
. * linkdate      linkdate        download                urldate
. * 20210625      25-Jun-21       ihme-covid19    2021-06-25
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-06-25" 
{res}{err}This is IHME urldate 2021-06-25
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-06-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 229,695 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22554{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}606{col 51}{txt}Missing .: {res}0{txt}/{res}229,695

{txt}{col 19}Mean: {res}{ralign 7:22255.3}{txt} = {res}06dec2020{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:172.822}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22016}{ralign 11:   22106}{ralign 11:   22255}{ralign 11:   22405}{ralign 11:   22495}
{col 25}{ralign 9:11apr2020}{ralign 11:10jul2020}{ralign 11:06dec2020}{ralign 11:05may2021}{ralign 11:03aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        605       50.25       50.25
{txt}        533 {c |}{res}        599       49.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,204      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(599 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        606      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        606      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210625 DayDeaMeRaIHME20210625)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210625.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210625.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210625.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210625.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(131,589 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(591 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(582 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(591 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(606 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(577 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(606 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(606 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(594 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(606 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(580 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(606 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(588 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210625.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210625.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210625.dta{rm}
saved
{p_end}

{com}. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 77             
. 
. * linkdate      linkdate        download                urldate
. * 20210702      02-Jul-21       ihme-covid19    2021-07-02
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-07-02" 
{res}{err}This is IHME urldate 2021-07-02
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-07-02/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 229,689 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22554{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}606{col 51}{txt}Missing .: {res}0{txt}/{res}229,689

{txt}{col 19}Mean: {res}{ralign 7:22255.3}{txt} = {res}06dec2020{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:172.817}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22016}{ralign 11:   22106}{ralign 11:   22255}{ralign 11:   22405}{ralign 11:   22495}
{col 25}{ralign 9:11apr2020}{ralign 11:10jul2020}{ralign 11:06dec2020}{ralign 11:05may2021}{ralign 11:03aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        605       50.25       50.25
{txt}        533 {c |}{res}        599       49.75      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,204      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(599 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        606      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        606      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210702 DayDeaMeRaIHME20210702)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210702.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210702.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210702.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210702.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(606 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(131,589 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(591 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(582 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(591 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(606 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(577 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(606 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(606 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(594 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(606 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(580 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(606 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(588 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210702.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210702.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210702.dta{rm}
saved
{p_end}

{com}. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. 
. * update 78     
. 
. * linkdate      linkdate        download                urldate
. * 20210715      15-Jul-21       ihme-covid19    2021-07-15
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate 2021-07-15" 
{res}{err}This is IHME urldate 2021-07-15
{txt}
{com}. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-07-15/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 241,599 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22585{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}637{col 51}{txt}Missing .: {res}0{txt}/{res}241,599

{txt}{col 19}Mean: {res}{ralign 7:22270.8}{txt} = {res}21dec2020{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:181.764}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22019}{ralign 11:   22114}{ralign 11:   22271}{ralign 11:   22428}{ralign 11:   22523}
{col 25}{ralign 9:14apr2020}{ralign 11:18jul2020}{ralign 11:22dec2020}{ralign 11:28may2021}{ralign 11:31aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        636       50.24       50.24
{txt}        533 {c |}{res}        630       49.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,266      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(630 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        637      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        637      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210715 DayDeaMeRaIHME20210715)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210715.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210715.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210715.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210715.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(138,378 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(622 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(613 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(622 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(637 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(608 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(637 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(637 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(625 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(637 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(611 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(637 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(619 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210715.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210715.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210715.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 79
. * linkdate      download                urldate
. * 20210725      ihme-covid19    2021-07-23
. * linkdate != urldate; linkdate is 20210725, urldate is 2021-07-23
. * filename reference_hospitalization_all_locs.csv 
. 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-07-25, update 20210723" 
{res}{err}This is IHME urldate 2021-07-25, update 20210723
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-07-25/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 241,599 obs)

{com}. 
. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22585{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}637{col 51}{txt}Missing .: {res}0{txt}/{res}241,599

{txt}{col 19}Mean: {res}{ralign 7:22270.8}{txt} = {res}21dec2020{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:181.764}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22019}{ralign 11:   22114}{ralign 11:   22271}{ralign 11:   22428}{ralign 11:   22523}
{col 25}{ralign 9:14apr2020}{ralign 11:18jul2020}{ralign 11:22dec2020}{ralign 11:28may2021}{ralign 11:31aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        636       50.24       50.24
{txt}        533 {c |}{res}        630       49.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,266      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(630 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        637      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        637      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210723 DayDeaMeRaIHME20210723)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210723.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210723.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210723.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210723.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(138,378 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(622 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(613 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(622 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(637 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(608 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(637 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(637 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(625 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(637 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(611 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(637 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(619 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210723.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210723.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210723.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. ***
. *
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 80
. * linkdate      download                urldate
. * 20210731      ihme-covid19    2021-07-31
. * linkdate != urldate; 20210730, 2021-07-31
. * filename reference_hospitalization_all_locs.csv 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-07-31, update 20210730"
{res}{err}This is IHME urldate 2021-07-31, update 20210730
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-07-31/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 241,599 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22585{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}637{col 51}{txt}Missing .: {res}0{txt}/{res}241,599

{txt}{col 19}Mean: {res}{ralign 7:22270.8}{txt} = {res}21dec2020{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:181.764}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22019}{ralign 11:   22114}{ralign 11:   22271}{ralign 11:   22428}{ralign 11:   22523}
{col 25}{ralign 9:14apr2020}{ralign 11:18jul2020}{ralign 11:22dec2020}{ralign 11:28may2021}{ralign 11:31aug2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        636       50.24       50.24
{txt}        533 {c |}{res}        630       49.76      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,266      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(630 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        637      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        637      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210730 DayDeaMeRaIHME20210730)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210730.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210730.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210730.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210730.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(637 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(138,378 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(622 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(613 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(622 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(637 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(608 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(637 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(637 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(625 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(637 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(611 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(637 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(619 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210730.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210730.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210730.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 81
. * linkdate      download        urldate
. * 20210806      2021_08_04      2021-08-09
. * filename reference_hospitalization_all_locs.csv 
. * cd 
. * cd: If the individual data files have been zipped together, downloading the zipped file (i.e., ihme-covid19.zip) 
. *   results in individual data files being placed in the present working directory (-pwd-), i.e., |code|IHME| here). 
. *   No -cd- is needed. On the other hand, if a directory containing the individual data files has been zipped, 
. *   downloading the zipped file results in the unzipped directory (e.g. |2020_06_24.02|) 
. *   being placed in the present working directory. Therefore, -cd- down to that directory 
. *   (and -cd ..- at the end before saving the final file) is needed. 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-08-09, update 20210806"
{res}{err}This is IHME urldate 2021-08-09, update 20210806
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-08-09/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: 2021_08_04/best_masks_hospitalization_all_locs.csv}
{text:    inflating: 2021_08_04/IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: 2021_08_04/reference_hospitalization_all_locs.csv}
{text:    inflating: 2021_08_04/Summary_stats_all_locs.csv}
{text:    inflating: 2021_08_04/worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. cd 2021_08_04
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/2021_08_04
{txt}
{com}. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 253,115 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22615{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}667{col 51}{txt}Missing .: {res}0{txt}/{res}253,115

{txt}{col 19}Mean: {res}{ralign 7:22285.8}{txt} = {res}05jan2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:190.415}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22022}{ralign 11:   22121}{ralign 11:   22286}{ralign 11:   22451}{ralign 11:   22550}
{col 25}{ralign 9:17apr2020}{ralign 11:25jul2020}{ralign 11:06jan2021}{ralign 11:20jun2021}{ralign 11:27sep2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        666       50.23       50.23
{txt}        533 {c |}{res}        660       49.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,326      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(660 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        667      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        667      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210806 DayDeaMeRaIHME20210806)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. cd ..
{res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME
{txt}
{com}. 
. save "IHME 20210806.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210806.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210806.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210806.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(144,944 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(652 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(643 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(652 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(667 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(638 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(667 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(667 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(655 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(667 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(641 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(667 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(649 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210806.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210806.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210806.dta{rm}
saved
{p_end}

{com}. 
. 
. shell rm -r "2021_08_04" 
{txt}

{com}. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 82
. * linkdate      download                urldate
. * 20210820      ihme-covid19    2021-08-23
. * filename reference_hospitalization_all_locs.csv 
. 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-08-23, update 20210820"
{res}{err}This is IHME urldate 2021-08-23, update 20210820
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-08-23/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 253,115 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22615{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}667{col 51}{txt}Missing .: {res}0{txt}/{res}253,115

{txt}{col 19}Mean: {res}{ralign 7:22285.8}{txt} = {res}05jan2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:190.415}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22022}{ralign 11:   22121}{ralign 11:   22286}{ralign 11:   22451}{ralign 11:   22550}
{col 25}{ralign 9:17apr2020}{ralign 11:25jul2020}{ralign 11:06jan2021}{ralign 11:20jun2021}{ralign 11:27sep2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        666       50.23       50.23
{txt}        533 {c |}{res}        660       49.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,326      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(660 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        667      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        667      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210820 DayDeaMeRaIHME20210820)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210820.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210820.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210820.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210820.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(144,944 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(652 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(643 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(652 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(667 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(638 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(667 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(667 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(655 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(667 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(641 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(667 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(649 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210820.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210820.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210820.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 83
. * linkdate      download        urldate
. * 26-Aug-21     ihme-covid19    2021-08-26
. * filename reference_hospitalization_all_locs.csv 
. 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-08-26"
{res}{err}This is IHME urldate 2021-08-26
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-08-26/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 253,115 obs)

{com}. 
. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22615{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}667{col 51}{txt}Missing .: {res}0{txt}/{res}253,115

{txt}{col 19}Mean: {res}{ralign 7:22285.8}{txt} = {res}05jan2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:190.415}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22022}{ralign 11:   22121}{ralign 11:   22286}{ralign 11:   22451}{ralign 11:   22550}
{col 25}{ralign 9:17apr2020}{ralign 11:25jul2020}{ralign 11:06jan2021}{ralign 11:20jun2021}{ralign 11:27sep2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        666       50.23       50.23
{txt}        533 {c |}{res}        660       49.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,326      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(660 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        667      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        667      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210826 DayDeaMeRaIHME20210826)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210826.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210826.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210826.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210826.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(144,944 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(652 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(643 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(652 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(667 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(638 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(667 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(667 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(655 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(667 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(641 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(667 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(649 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210826.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210826.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210826.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 84
. * linkdate      download                urldate
. * 20210902      ihme-covid19    2021-09-17
. * yes, yes, it is true that: linkdate = 20210902 but urldate = 2021-09-17
. ***************************************************************************************************
. * filename reference_hospitalization_all_locs.csv 
. 
.                 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-09-17, update 20210902"
{res}{err}This is IHME urldate 2021-09-17, update 20210902
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-09-17/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 253,115 obs)

{com}. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22615{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}667{col 51}{txt}Missing .: {res}0{txt}/{res}253,115

{txt}{col 19}Mean: {res}{ralign 7:22285.8}{txt} = {res}05jan2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:190.415}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22022}{ralign 11:   22121}{ralign 11:   22286}{ralign 11:   22451}{ralign 11:   22550}
{col 25}{ralign 9:17apr2020}{ralign 11:25jul2020}{ralign 11:06jan2021}{ralign 11:20jun2021}{ralign 11:27sep2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        666       50.23       50.23
{txt}        533 {c |}{res}        660       49.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,326      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(660 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        667      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        667      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210902 DayDeaMeRaIHME20210902)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210902.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210902.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210902.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210902.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(144,944 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(652 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(643 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(652 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(667 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(638 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(667 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(667 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(655 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(667 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(641 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(667 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(649 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210902.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210902.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210902.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 85
. * linkdate      download        urldate
. * 20210910      ihme-covid19    2021-09-14
. * filename reference_hospitalization_all_locs.csv 
. 
. 
. clear
{txt}
{com}. 
. di in red "This is IHME urldate 2021-09-14, update 20210910"
{res}{err}This is IHME urldate 2021-09-14, update 20210910
{txt}
{com}. 
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-09-14/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: best_masks_hospitalization_all_locs.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}
{text:    inflating: reference_hospitalization_all_locs.csv}
{text:    inflating: Summary_stats_all_locs.csv}
{text:    inflating: worse_hospitalization_all_locs.csv}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  5}
{text:        skipped:  0}
{text:      extracted:  5}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. import delimited using reference_hospitalization_all_locs.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(84 vars, 253,115 obs)

{com}. 
. 
. 
. 
. * gen date 
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22615{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01dec2021{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}667{col 51}{txt}Missing .: {res}0{txt}/{res}253,115

{txt}{col 19}Mean: {res}{ralign 7:22285.8}{txt} = {res}05jan2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:190.415}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22022}{ralign 11:   22121}{ralign 11:   22286}{ralign 11:   22451}{ralign 11:   22550}
{col 25}{ralign 9:17apr2020}{ralign 11:25jul2020}{ralign 11:06jan2021}{ralign 11:20jun2021}{ralign 11:27sep2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. 
. * rename variables
. 
. 
. * Daily Deaths smoothed
. rename deaths_mean_smoothed  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Deaths Mean smoothed IHME S1"
{txt}
{com}. 
. 
. * Daily Deaths not smoothed
. rename deaths_mean  DayDeaMeRaIHME
{res}{txt}
{com}. label var DayDeaMeRaIHME "Daily Deaths Mean not smoothed IHME S1"
{txt}
{com}. 
. 
. replace DayDeaMeSmIHME = DayDeaMeRaIHME if DayDeaMeSmIHME == .
{txt}(0 real changes made)

{com}. 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        666       50.23       50.23
{txt}        533 {c |}{res}        660       49.77      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,326      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(660 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        667      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        667      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
{res}Variable FOUND:  deaths_data_type
{com}. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
. {c )-}       
{txt}
{com}. *
. 
. 
. 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME DayDeaMeRaIHME deaths_data_type 
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210910 DayDeaMeRaIHME20210910)
{res}{txt}
{com}. 
. qui compress
{txt}
{com}. 
. // cd ..
. 
. save "IHME 20210910.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210910.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210910.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20210910.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(667 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(144,944 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(652 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(643 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(652 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(667 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(638 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(667 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(667 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(655 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(667 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(641 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(667 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(649 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210910.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210910.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210910.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. *
. ***
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 86 
. * linkdate = urldate
. * linkdate      download        urldate
. * 16-Sep-21     ihme-covid19    2021-09-16
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-09-16"
{res}{err}This is IHME urldate 2021-09-16
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-09-16/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. 
. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 124,208 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 140,178 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(5,092 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15912 missing values generated)
{res}reff_lower contains string
{txt}(80 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13049 missing values generated)
{res}reff_upper contains string
{txt}(15 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15472 missing values generated)
{res}infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(32 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(4790 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22646{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}698{col 51}{txt}Missing .: {res}0{txt}/{res}264,386

{txt}{col 19}Mean: {res}{ralign 7:22301.3}{txt} = {res}21jan2021{txt}(+ 7 hours)
{col 14}Std. dev.: {res}{ralign 7:199.391}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22025}{ralign 11:   22129}{ralign 11:   22301}{ralign 11:   22474}{ralign 11:   22577}
{col 25}{ralign 9:20apr2020}{ralign 11:02aug2020}{ralign 11:21jan2021}{ralign 11:13jul2021}{ralign 11:24oct2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        697       50.22       50.22
{txt}        533 {c |}{res}        691       49.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,388      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(691 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        698      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        698      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210916 DayDeaMeRaIHME20210916)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20210916
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20210916.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210916.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210916.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210916.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(151,733 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(683 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(674 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(683 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(698 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(669 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(698 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(698 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(686 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(698 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(672 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(698 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(680 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210916.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210916.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210916.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 87
. * linkdate = urldate
. * linkdate      download        urldate
. * 23-Sep-21     ihme-covid19    2021-09-23
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-09-23"
{res}{err}This is IHME urldate 2021-09-23
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-09-23/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 124,208 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 140,178 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(5,142 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15934 missing values generated)
{res}reff_lower contains string
{txt}(90 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13092 missing values generated)
{res}reff_upper contains string
{txt}(6 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15456 missing values generated)
{res}infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(22 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(4780 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22646{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}698{col 51}{txt}Missing .: {res}0{txt}/{res}264,386

{txt}{col 19}Mean: {res}{ralign 7:22301.3}{txt} = {res}21jan2021{txt}(+ 7 hours)
{col 14}Std. dev.: {res}{ralign 7:199.391}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22025}{ralign 11:   22129}{ralign 11:   22301}{ralign 11:   22474}{ralign 11:   22577}
{col 25}{ralign 9:20apr2020}{ralign 11:02aug2020}{ralign 11:21jan2021}{ralign 11:13jul2021}{ralign 11:24oct2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210923 DayDeaMeRaIHME20210923)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20210923
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20210923.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210923.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210923.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210923.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(691 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(151,733 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(683 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(674 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(683 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(698 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(669 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(698 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(698 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(686 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(698 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(672 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(698 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(680 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210923.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210923.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210923.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 88
. * linkdate != urldate; linkdate is 20210930, urldate is 2021-10-01
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-10-01" " update 20210930"
{res}{err}This is IHME urldate 2021-10-01 update 20210930
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-10-01/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 124,059 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(61 vars, 140,178 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(5,082 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15645 missing values generated)
{res}reff_lower contains string
{txt}(107 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12843 missing values generated)
{res}reff_upper contains string
{txt}(5 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15197 missing values generated)
{res}infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(37 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(4795 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22646{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}698{col 51}{txt}Missing .: {res}0{txt}/{res}264,237

{txt}{col 19}Mean: {res}{ralign 7:22301.5}{txt} = {res}21jan2021{txt}(+ 11 hours)
{col 14}Std. dev.: {res}{ralign 7:199.275}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22026}{ralign 11:   22129}{ralign 11:   22302}{ralign 11:   22474}{ralign 11:   22578}
{col 25}{ralign 9:21apr2020}{ralign 11:02aug2020}{ralign 11:22jan2021}{ralign 11:13jul2021}{ralign 11:25oct2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        697       50.22       50.22
{txt}        533 {c |}{res}        691       49.78      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,388      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(691 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        698      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        698      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20210930 DayDeaMeRaIHME20210930)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20210930
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20210930.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20210930.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210930.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20210930.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(151,596 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(683 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(674 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(683 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(698 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(669 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(698 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(698 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(686 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(698 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(672 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(698 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(680 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20210930.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20210930.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20210930.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 89
. * linkdate = urldate
. * linkdate      download                urldate
. * 15-Oct-21     ihme-covid19    2021-10-15
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-10-15" " update 20211015"
{res}{err}This is IHME urldate 2021-10-15 update 20211015
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-10-15/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 124,612 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 139,812 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(8,113 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16774 missing values generated)
{res}reff_lower contains string
{txt}(145 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11063 missing values generated)
{res}reff_upper contains string
{txt}(63 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15764 missing values generated)
{res}infection_fatality contains string
{txt}(1,820 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10782 missing values generated)
{res}infection_detection contains string
{txt}(1,895 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5909 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,895 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5909 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(21 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(4779 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22646{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jan2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}698{col 51}{txt}Missing .: {res}0{txt}/{res}264,424

{txt}{col 19}Mean: {res}{ralign 7:22300.3}{txt} = {res}20jan2021{txt}(+ 8 hours)
{col 14}Std. dev.: {res}{ralign 7:199.912}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22024}{ralign 11:   22127}{ralign 11:   22300}{ralign 11:   22473}{ralign 11:   22577}
{col 25}{ralign 9:19apr2020}{ralign 11:31jul2020}{ralign 11:20jan2021}{ralign 11:12jul2021}{ralign 11:24oct2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        698       50.11       50.11
{txt}        533 {c |}{res}        695       49.89      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,393      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(695 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        698      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        698      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20211015 DayDeaMeRaIHME20211015)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20211015
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20211015.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20211015.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211015.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20211015.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(698 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(150,646 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(687 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(678 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(687 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(698 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(673 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(698 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(698 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(690 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(698 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(676 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(698 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(677 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20211015.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20211015.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20211015.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 90
. * linkdate = urldate
. * linkdate      download                urldate
. * 21-Oct-21     ihme-covid19    2021-10-21
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-10-21" " update 20211021"
{res}{err}This is IHME urldate 2021-10-21 update 20211021
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-10-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 124,612 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 151,654 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(8,152 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16827 missing values generated)
{res}reff_lower contains string
{txt}(150 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11058 missing values generated)
{res}reff_upper contains string
{txt}(37 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15801 missing values generated)
{res}infection_fatality contains string
{txt}(2,074 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11047 missing values generated)
{res}infection_detection contains string
{txt}(1,898 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5912 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,898 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5912 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(19 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5180 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22677{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01feb2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}729{col 51}{txt}Missing .: {res}0{txt}/{res}276,266

{txt}{col 19}Mean: {res}{ralign 7:22315.8}{txt} = {res}04feb2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:208.857}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22027}{ralign 11:   22135}{ralign 11:   22316}{ralign 11:   22497}{ralign 11:   22605}
{col 25}{ralign 9:22apr2020}{ralign 11:08aug2020}{ralign 11:05feb2021}{ralign 11:05aug2021}{ralign 11:21nov2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        729       50.10       50.10
{txt}        533 {c |}{res}        726       49.90      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,455      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(726 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        729      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        729      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(729 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20211021 DayDeaMeRaIHME20211021)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20211021
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20211021.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20211021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20211021.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(729 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(157,373 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(718 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(709 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(718 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(729 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(704 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(729 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(729 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(721 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(729 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(707 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(729 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(708 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20211021.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20211021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20211021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 91
. * linkdate = urldate
. * linkdate      download                urldate
. * 04-Nov-21     ihme-covid19    2021-11-04
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-11-04" " update 20211104"
{res}{err}This is IHME urldate 2021-11-04 update 20211104
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-11-04/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 124,612 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 162,350 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(8,019 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16780 missing values generated)
{res}reff_lower contains string
{txt}(127 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11164 missing values generated)
{res}reff_upper contains string
{txt}(48 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15865 missing values generated)
{res}infection_fatality contains string
{txt}(1,822 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10807 missing values generated)
{res}infection_detection contains string
{txt}(1,895 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5908 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,895 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5908 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(23 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5548 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22705{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01mar2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}757{col 51}{txt}Missing .: {res}0{txt}/{res}286,962

{txt}{col 19}Mean: {res}{ralign 7:22329.8}{txt} = {res}18feb2021{txt}(+ 20 hours)
{col 14}Std. dev.: {res}{ralign 7:216.937}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22029}{ralign 11:   22142}{ralign 11:   22330}{ralign 11:   22518}{ralign 11:   22630}
{col 25}{ralign 9:24apr2020}{ralign 11:15aug2020}{ralign 11:19feb2021}{ralign 11:26aug2021}{ralign 11:16dec2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        757       50.10       50.10
{txt}        533 {c |}{res}        754       49.90      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,511      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(754 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        757      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        757      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20211104 DayDeaMeRaIHME20211104)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20211104
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20211104.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20211104.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211104.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20211104.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(163,449 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(746 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(737 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(746 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(757 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(732 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(757 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(757 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(749 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(757 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(735 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(757 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(736 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20211104.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20211104.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20211104.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 92
. * linkdate = urldate
. * linkdate              download                urldate
. * 2021-11-19    ihme-covid19    2021-11-19
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-11-19" " update 20211119"
{res}{err}This is IHME urldate 2021-11-19 update 20211119
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-11-19/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_worse_2020.csv}
{text:    inflating: data_download_file_worse_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 124,271 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 161,925 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(8,123 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16752 missing values generated)
{res}reff_lower contains string
{txt}(176 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10997 missing values generated)
{res}reff_upper contains string
{txt}(63 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15815 missing values generated)
{res}infection_fatality contains string
{txt}(2,084 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11076 missing values generated)
{res}infection_detection contains string
{txt}(1,895 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5911 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,895 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5911 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(20 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(5545 missing values generated)
{res}reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22705{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01mar2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}757{col 51}{txt}Missing .: {res}0{txt}/{res}286,196

{txt}{col 19}Mean: {res}{ralign 7:22329.9}{txt} = {res}18feb2021{txt}(+ 21 hours)
{col 14}Std. dev.: {res}{ralign 7:216.927}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22029}{ralign 11:   22142}{ralign 11:   22330}{ralign 11:   22518}{ralign 11:   22630}
{col 25}{ralign 9:24apr2020}{ralign 11:15aug2020}{ralign 11:19feb2021}{ralign 11:26aug2021}{ralign 11:16dec2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        757       50.10       50.10
{txt}        533 {c |}{res}        754       49.90      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,511      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(754 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        757      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        757      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20211119 DayDeaMeRaIHME20211119)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20211119
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20211119.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20211119.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211119.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20211119.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(162,692 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(746 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(737 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(746 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(757 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(732 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(757 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(757 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(749 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(757 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(735 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(757 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(733 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20211119.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20211119.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20211119.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 93
. * linkdate = urldate
. * linkdate      download                urldate
. * 21-Dec-21     ihme-covid19    2021-12-21
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2021-12-21" " update 20211221"
{res}{err}This is IHME urldate 2021-12-21 update 20211221
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2021-12-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2020.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_severe_omicron_2020.csv}
{text:    inflating: data_download_file_severe_omicron_2021.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  12}
{text:        skipped:  0}
{text:      extracted:  12}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 123,836 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 158,525 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,846 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15364 missing values generated)
{res}reff_lower contains string
{txt}(95 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10861 missing values generated)
{res}reff_upper is numeric
infection_fatality contains string
{txt}(4,164 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(17943 missing values generated)
{res}infection_detection contains string
{txt}(2,009 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10793 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,535 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11317 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22705{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01mar2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}757{col 51}{txt}Missing .: {res}0{txt}/{res}282,361

{txt}{col 19}Mean: {res}{ralign 7:22327}{txt} = {res}16feb2021{txt}
{col 14}Std. dev.: {res}{ralign 7:218.527}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22024}{ralign 11:   22138}{ralign 11:   22327}{ralign 11:   22516}{ralign 11:   22630}
{col 25}{ralign 9:19apr2020}{ralign 11:11aug2020}{ralign 11:16feb2021}{ralign 11:24aug2021}{ralign 11:16dec2021}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        757       50.00       50.00
{txt}        533 {c |}{res}        757       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,514      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(757 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        757      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        757      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20211221 DayDeaMeRaIHME20211221)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20211221
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20211221.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20211221.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211221.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20211221.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(757 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(158,970 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(757 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(757 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(757 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(757 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(757 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(757 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(757 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(757 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(757 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(757 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(757 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(757 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20211221.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20211221.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20211221.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 94
. * linkdate = urldate
. * linkdate      download                urldate
. * 08-Jan-22     ihme-covid19    2022-01-08
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-01-10" " update 20220108"
{res}{err}This is IHME urldate 2022-01-10 update 20220108
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-01-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2020.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_severe_omicron_2020.csv}
{text:    inflating: data_download_file_severe_omicron_2021.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  12}
{text:        skipped:  0}
{text:      extracted:  12}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 124,832 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(60 vars, 182,736 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,512 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16075 missing values generated)
{res}reff_lower contains string
{txt}(102 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12332 missing values generated)
{res}reff_upper contains string
{txt}(4 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15678 missing values generated)
{res}infection_fatality contains string
{txt}(3,724 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(18766 missing values generated)
{res}infection_detection contains string
{txt}(1,716 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11622 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,284 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12179 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22766{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}818{col 51}{txt}Missing .: {res}0{txt}/{res}307,568

{txt}{col 19}Mean: {res}{ralign 7:22357.5}{txt} = {res}18mar2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:236.136}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22030}{ralign 11:   22153}{ralign 11: 22357.5}{ralign 11:   22562}{ralign 11:   22685}
{col 25}{ralign 9:25apr2020}{ralign 11:26aug2020}{ralign 11:18mar2021}{ralign 11:09oct2021}{ralign 11:09feb2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        818       50.00       50.00
{txt}        533 {c |}{res}        818       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,636      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(818 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        818      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        818      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220108 DayDeaMeRaIHME20220108)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220108
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220108.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220108.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220108.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * get all countries
. 
. use "IHME 20220108.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(173,416 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(818 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(818 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(818 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(818 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(818 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(818 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(818 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(818 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(818 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(818 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(818 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(818 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220108.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220108.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220108.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 95
. * linkdate = urldate
. * linkdate      download                urldate
. * 14-Jan-22     ihme-covid19    2022-01-14
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-01-14" " update 20220114"
{res}{err}This is IHME urldate 2022-01-14 update 20220114
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-01-14/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2020.csv}
{text:    inflating: data_download_file_reduce_hesitancy_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_severe_omicron_2020.csv}
{text:    inflating: data_download_file_severe_omicron_2021.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  12}
{text:        skipped:  0}
{text:      extracted:  12}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 124,168 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 181,764 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,655 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16105 missing values generated)
{res}reff_lower contains string
{txt}(111 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12146 missing values generated)
{res}reff_upper contains string
{txt}(2 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15652 missing values generated)
{res}infection_fatality contains string
{txt}(3,622 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(18527 missing values generated)
{res}infection_detection contains string
{txt}(1,741 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11521 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,361 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12126 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22766{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}818{col 51}{txt}Missing .: {res}0{txt}/{res}305,932

{txt}{col 19}Mean: {res}{ralign 7:22357.5}{txt} = {res}18mar2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:236.136}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22030}{ralign 11:   22153}{ralign 11: 22357.5}{ralign 11:   22562}{ralign 11:   22685}
{col 25}{ralign 9:25apr2020}{ralign 11:26aug2020}{ralign 11:18mar2021}{ralign 11:09oct2021}{ralign 11:09feb2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        818       50.00       50.00
{txt}        533 {c |}{res}        818       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,636      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(818 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        818      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        818      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220114 DayDeaMeRaIHME20220114)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220114
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220114.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220114.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220114.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220114.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(173,416 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(818 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(818 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(818 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(818 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(818 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(818 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(818 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(818 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(818 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(818 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(818 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(818 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220114.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220114.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220114.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 96
. * linkdate = urldate
. * linkdate      download                urldate
. * 21-Jan-22     ihme-covid19    2022-01-21
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. 
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-01-21" " update 20220121"
{res}{err}This is IHME urldate 2022-01-21 update 20220121
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-01-21/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  8}
{text:        skipped:  0}
{text:      extracted:  8}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 124,168 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 181,764 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,680 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15947 missing values generated)
{res}reff_lower contains string
{txt}(107 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11966 missing values generated)
{res}reff_upper contains string
{txt}(4 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15492 missing values generated)
{res}infection_fatality contains string
{txt}(3,658 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(18716 missing values generated)
{res}infection_detection contains string
{txt}(1,707 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11630 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,277 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12188 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22766{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01may2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}818{col 51}{txt}Missing .: {res}0{txt}/{res}305,932

{txt}{col 19}Mean: {res}{ralign 7:22357.5}{txt} = {res}18mar2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:236.136}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22030}{ralign 11:   22153}{ralign 11: 22357.5}{ralign 11:   22562}{ralign 11:   22685}
{col 25}{ralign 9:25apr2020}{ralign 11:26aug2020}{ralign 11:18mar2021}{ralign 11:09oct2021}{ralign 11:09feb2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        818       50.00       50.00
{txt}        533 {c |}{res}        818       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,636      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(818 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        818      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        818      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220121 DayDeaMeRaIHME20220121)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220121
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220121.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220121.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220121.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220121.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(818 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(171,780 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(818 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(818 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(818 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(818 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(818 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(818 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(818 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(818 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(818 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(818 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(818 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(818 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220121.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220121.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220121.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 97
. * linkdate = urldate
. * linkdate      download                urldate
. * 04-Feb-22     ihme-covid19    2022-02-04
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-02-04" " update 20220204"
{res}{err}This is IHME urldate 2022-02-04 update 20220204
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-02-04/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: data_download_file_third_dose_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 114,208 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 125,560 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 52,288 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2022.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(5,903 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(14229 missing values generated)
{res}reff_lower contains string
{txt}(136 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10661 missing values generated)
{res}reff_upper contains string
{txt}(3 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13883 missing values generated)
{res}infection_fatality contains string
{txt}(3,395 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16490 missing values generated)
{res}infection_detection contains string
{txt}(1,552 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10018 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,079 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10514 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}{p 0 7 2}
(variable
{bf:inf_cuml_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:inf_cuml_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22797{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}849{col 51}{txt}Missing .: {res}0{txt}/{res}292,056

{txt}{col 19}Mean: {res}{ralign 7:22373}{txt} = {res}03apr2021{txt}
{col 14}Std. dev.: {res}{ralign 7:245.085}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22033}{ralign 11:   22161}{ralign 11:   22373}{ralign 11:   22585}{ralign 11:   22713}
{col 25}{ralign 9:28apr2020}{ralign 11:03sep2020}{ralign 11:03apr2021}{ralign 11:01nov2021}{ralign 11:09mar2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        849       50.00       50.00
{txt}        533 {c |}{res}        849       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,698      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(849 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        849      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        849      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(849 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220204 DayDeaMeRaIHME20220204)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220204
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220204.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220204.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220204.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220204.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(849 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(154,518 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(849 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(849 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(849 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(849 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(849 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(849 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(849 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(849 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(849 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(849 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(849 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(849 real changes made)

{com}. 
. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220204.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220204.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220204.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 98
. * linkdate = urldate
. * linkdate      download                urldate
. * 18-Feb-22     ihme-covid19    2022-02-18
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-02-18" " update 20220218"
{res}{err}This is IHME urldate 2022-02-18 update 20220218
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-02-18/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: data_download_file_third_dose_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 127,820 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 140,525 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 58,520 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,641 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16395 missing values generated)
{res}reff_lower contains string
{txt}(92 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12293 missing values generated)
{res}reff_upper contains string
{txt}(5 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15914 missing values generated)
{res}infection_fatality contains string
{txt}(3,821 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(19522 missing values generated)
{res}infection_detection contains string
{txt}(1,868 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12335 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,465 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12929 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}{p 0 7 2}
(variable
{bf:inf_cuml_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22797{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jun2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}849{col 51}{txt}Missing .: {res}0{txt}/{res}326,865

{txt}{col 19}Mean: {res}{ralign 7:22373}{txt} = {res}03apr2021{txt}
{col 14}Std. dev.: {res}{ralign 7:245.085}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22033}{ralign 11:   22161}{ralign 11:   22373}{ralign 11:   22585}{ralign 11:   22713}
{col 25}{ralign 9:28apr2020}{ralign 11:03sep2020}{ralign 11:03apr2021}{ralign 11:01nov2021}{ralign 11:09mar2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        849       50.00       50.00
{txt}        533 {c |}{res}        849       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,698      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(849 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        849      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        849      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(849 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220218 DayDeaMeRaIHME20220218)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220218
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220218.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220218.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220218.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220218.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(849 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(181,686 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(849 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(849 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(849 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(849 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(849 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(849 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(849 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(849 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(849 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(849 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(849 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(849 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220218.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220218.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220218.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 99
. * linkdate = urldate
. * linkdate      download                urldate
. * 21-Mar-22     ihme-covid19    2022-03-22
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-03-22" " update 20220321"
{res}{err}This is IHME urldate 2022-03-22 update 20220321
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-03-22/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: data_download_file_third_dose_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 127,820 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 140,525 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(63 vars, 70,070 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,317 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(17555 missing values generated)
{res}reff_lower contains string
{txt}(105 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13885 missing values generated)
{res}reff_upper contains string
{txt}(1 real change made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(17043 missing values generated)
{res}infection_fatality contains string
{txt}(3,401 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(20353 missing values generated)
{res}infection_detection contains string
{txt}(2,272 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13945 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,306 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13978 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}{p 0 7 2}
(variable
{bf:inf_cuml_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22827{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01jul2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}879{col 51}{txt}Missing .: {res}0{txt}/{res}338,415

{txt}{col 19}Mean: {res}{ralign 7:22388}{txt} = {res}18apr2021{txt}
{col 14}Std. dev.: {res}{ralign 7:253.746}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22036}{ralign 11:   22168}{ralign 11:   22388}{ralign 11:   22608}{ralign 11:   22740}
{col 25}{ralign 9:01may2020}{ralign 11:10sep2020}{ralign 11:18apr2021}{ralign 11:24nov2021}{ralign 11:05apr2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        879       50.00       50.00
{txt}        533 {c |}{res}        879       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,758      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(879 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        879      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        879      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(879 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220321 DayDeaMeRaIHME20220321)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220321
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220321.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220321.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220321.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220321.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(879 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(188,985 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(879 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(879 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(879 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(879 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(879 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(879 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(879 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(879 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(879 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(879 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(879 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(879 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(879 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220321.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220321.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220321.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 100
. * linkdate = urldate
. * linkdate      download                urldate
. * 08-Apr-22     ihme-covid19    2022-04-08
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-04-08" " update 20220408"
{res}{err}This is IHME urldate 2022-04-08 update 20220408
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-04-08/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: data_download_file_third_dose_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 126,824 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 139,430 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 81,366 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,351 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15242 missing values generated)
{res}reff_lower contains string
{txt}(100 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10984 missing values generated)
{res}reff_upper contains string
{txt}(30 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(14600 missing values generated)
{res}infection_fatality contains string
{txt}(3,467 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(16130 missing values generated)
{res}infection_detection contains string
{txt}(2,272 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10481 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,285 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10494 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22858{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01aug2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}910{col 51}{txt}Missing .: {res}0{txt}/{res}347,620

{txt}{col 19}Mean: {res}{ralign 7:22403.5}{txt} = {res}03may2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:262.695}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22039.5}{ralign 11:   22176}{ralign 11: 22403.5}{ralign 11:   22631}{ralign 11: 22767.5}
{col 25}{ralign 9:04may2020}{ralign 11:18sep2020}{ralign 11:03may2021}{ralign 11:17dec2021}{ralign 11:02may2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        910       50.00       50.00
{txt}        533 {c |}{res}        910       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,820      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(910 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        910      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        910      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(910 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220408 DayDeaMeRaIHME20220408)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220408
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220408.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220408.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220408.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220408.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(910 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(195,650 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(910 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(910 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(910 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(910 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(910 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(910 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(910 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(910 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(910 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(910 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(910 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(910 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(910 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220408.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220408.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220408.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 101
. * linkdate = urldate
. * linkdate      download                urldate
. * 06-May-22     ihme-covid19    2022-05-18
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-05-18" " update 20220506"
{res}{err}This is IHME urldate 2022-05-18 update 20220506
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-05-18/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_third_dose_2020.csv}
{text:    inflating: data_download_file_third_dose_2021.csv}
{text:    inflating: data_download_file_third_dose_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 137,448 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 151,110 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 101,016 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,544 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(14769 missing values generated)
{res}reff_lower contains string
{txt}(91 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10108 missing values generated)
{res}reff_upper contains string
{txt}(21 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13925 missing values generated)
{res}infection_fatality contains string
{txt}(3,780 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15138 missing values generated)
{res}infection_detection contains string
{txt}(2,482 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(9405 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,482 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(9405 missing values generated)
{res}{txt}
{com}. *
. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22889{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01sep2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}941{col 51}{txt}Missing .: {res}0{txt}/{res}389,574

{txt}{col 19}Mean: {res}{ralign 7:22419}{txt} = {res}19may2021{txt}
{col 14}Std. dev.: {res}{ralign 7:271.643}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22043}{ralign 11:   22184}{ralign 11:   22419}{ralign 11:   22654}{ralign 11:   22795}
{col 25}{ralign 9:08may2020}{ralign 11:26sep2020}{ralign 11:19may2021}{ralign 11:09jan2022}{ralign 11:30may2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        941       50.00       50.00
{txt}        533 {c |}{res}        941       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,882      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(941 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        941      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        941      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(941 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220506 DayDeaMeRaIHME20220506)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220506
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220506.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220506.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220506.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220506.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(941 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(230,545 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(941 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(941 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(941 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(941 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(941 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(941 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(941 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(941 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(941 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(941 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(941 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(941 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(941 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220506.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220506.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220506.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 102
. * linkdate = urldate
. * linkdate      download                urldate
. * 10-Jun-22     ihme-covid19    2022-06-10
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-06-10" " update 20220610"
{res}{err}This is IHME urldate 2022-06-10 update 20220610
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-06-10/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 137,448 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 151,110 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 113,436 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(6,546 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(14786 missing values generated)
{res}reff_lower contains string
{txt}(68 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(10139 missing values generated)
{res}reff_upper contains string
{txt}(13 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13863 missing values generated)
{res}infection_fatality contains string
{txt}(3,757 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(15163 missing values generated)
{res}infection_detection contains string
{txt}(2,426 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(9390 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,426 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(9390 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22919{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01oct2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}971{col 51}{txt}Missing .: {res}0{txt}/{res}401,994

{txt}{col 19}Mean: {res}{ralign 7:22434}{txt} = {res}03jun2021{txt}
{col 14}Std. dev.: {res}{ralign 7:280.304}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22046}{ralign 11:   22191}{ralign 11:   22434}{ralign 11:   22677}{ralign 11:   22822}
{col 25}{ralign 9:11may2020}{ralign 11:03oct2020}{ralign 11:03jun2021}{ralign 11:01feb2022}{ralign 11:26jun2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}        971       50.00       50.00
{txt}        533 {c |}{res}        971       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,942      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(971 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}        971      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        971      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(971 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220610 DayDeaMeRaIHME20220610)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220610
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220610.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(971 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(237,895 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(971 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(971 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(971 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(971 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(971 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(971 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(971 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(971 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(971 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(971 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(971 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(971 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(971 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220610.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220610.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220610.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_worse_2020.csv"
{txt}
rm: data_download_file_worse_2020.csv: No such file or directory

{com}. shell rm -r "data_download_file_worse_2021.csv"
{txt}
rm: data_download_file_worse_2021.csv: No such file or directory

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. 
. 
. 
. ****
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 103
. * linkdate = urldate
. * linkdate              download                urldate
. * July 19, 2022 ihme-covid19    2022-07-19
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-07-19" " update 2022-07-19"
{res}{err}This is IHME urldate 2022-07-19 update 2022-07-19
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-07-19/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 137,780 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 151,475 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 126,575 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(5,708 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12895 missing values generated)
{res}reff_lower contains string
{txt}(52 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(8739 missing values generated)
{res}reff_upper contains string
{txt}(14 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11929 missing values generated)
{res}infection_fatality contains string
{txt}(3,114 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(13058 missing values generated)
{res}infection_detection contains string
{txt}(2,295 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7865 missing values generated)
{res}infection_hospitalization contains string
{txt}(2,295 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7865 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}{p 0 7 2}
(variable
{bf:inf_cuml_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}22950{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}01nov2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}1,002{col 51}{txt}Missing .: {res}0{txt}/{res}415,830

{txt}{col 19}Mean: {res}{ralign 7:22449.5}{txt} = {res}18jun2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:289.253}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22049}{ralign 11:   22199}{ralign 11: 22449.5}{ralign 11:   22700}{ralign 11:   22850}
{col 25}{ralign 9:14may2020}{ralign 11:11oct2020}{ralign 11:18jun2021}{ralign 11:24feb2022}{ralign 11:24jul2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}      1,002       50.00       50.00
{txt}        533 {c |}{res}      1,002       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,004      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(1,002 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}      1,002      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,002      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(1,002 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220719 DayDeaMeRaIHME20220719)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220719
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220719.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220719.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220719.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220719.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(1,002 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(245,490 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(1,002 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(1,002 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(1,002 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(1,002 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(1,002 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(1,002 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(1,002 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(1,002 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(1,002 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(1,002 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(1,002 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(1,002 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(1,002 real changes made)

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220719.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220719.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220719.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 104
. * linkdate = urldate
. * linkdate                              download                urldate
. * September 12, 2022    ihme-covid19    2022-09-12
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-09-12" " update 2022-09-12"
{res}{err}This is IHME urldate 2022-09-12 update 2022-09-12
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-09-12/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 136,452 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 150,015 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(81 vars, 150,015 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(4,793 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11807 missing values generated)
{res}reff_lower contains string
{txt}(42 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(8485 missing values generated)
{res}reff_upper contains string
{txt}(8 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11110 missing values generated)
{res}infection_fatality contains string
{txt}(2,374 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11998 missing values generated)
{res}infection_detection contains string
{txt}(1,785 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7113 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,785 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7113 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality contains string
{txt}(28 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(28 missing values generated)
{res}infection_detection contains string
{txt}(23 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(23 missing values generated)
{res}infection_hospitalization contains string
{txt}(1 real change made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(1 missing value generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}23010{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}31dec2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}1,062{col 51}{txt}Missing .: {res}0{txt}/{res}436,482

{txt}{col 19}Mean: {res}{ralign 7:22479.5}{txt} = {res}18jul2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:306.573}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22055}{ralign 11:   22214}{ralign 11: 22479.5}{ralign 11:   22745}{ralign 11:   22904}
{col 25}{ralign 9:20may2020}{ralign 11:26oct2020}{ralign 11:18jul2021}{ralign 11:10apr2022}{ralign 11:16sep2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}      1,062       50.00       50.00
{txt}        533 {c |}{res}      1,062       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,124      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(1,062 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}      1,062      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,062      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20220912 DayDeaMeRaIHME20220912)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20220912
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20220912.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20220912.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220912.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20220912.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(261,252 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(1,062 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(1,062 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(1,062 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(1,062 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(1,062 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(1,062 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20220912.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20220912.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20220912.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 105 
. * linkdate = urldate
. * linkdate                              download                urldate
. * October 24, 2022              ihme-covid19    2022-10-24
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-10-24" " update 2022-10-24"
{res}{err}This is IHME urldate 2022-10-24 update 2022-10-24
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-10-24/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  11}
{text:        skipped:  0}
{text:      extracted:  11}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(75 vars, 137,780 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(75 vars, 151,475 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(75 vars, 151,475 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(4,269 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11385 missing values generated)
{res}reff_lower contains string
{txt}(40 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(8613 missing values generated)
{res}reff_upper contains string
{txt}(8 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11000 missing values generated)
{res}infection_fatality contains string
{txt}(2,221 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12028 missing values generated)
{res}infection_detection contains string
{txt}(1,970 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7431 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,970 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7431 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}23010{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}31dec2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}1,062{col 51}{txt}Missing .: {res}0{txt}/{res}440,730

{txt}{col 19}Mean: {res}{ralign 7:22479.5}{txt} = {res}18jul2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:306.573}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22055}{ralign 11:   22214}{ralign 11: 22479.5}{ralign 11:   22745}{ralign 11:   22904}
{col 25}{ralign 9:20may2020}{ralign 11:26oct2020}{ralign 11:18jul2021}{ralign 11:10apr2022}{ralign 11:16sep2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}      1,062       50.00       50.00
{txt}        533 {c |}{res}      1,062       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,124      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(1,062 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}      1,062      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,062      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20221024 DayDeaMeRaIHME20221024)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20221024
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20221024.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20221024.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221024.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20221024.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(261,252 observations deleted)

{com}. 
. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(1,062 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(1,062 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(1,062 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(1,062 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(1,062 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(1,062 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(1,062 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(1,062 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(1,062 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20221024.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20221024.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20221024.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. * remove remnant not-needed files
. 
. shell rm -r "best_masks_hospitalization_all_locs.csv"
{txt}

{com}. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reduce_hesitancy_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reduce_hesitancy_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.dta"
{txt}

{com}. shell rm -r "data_download_file_severe_omicron_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_severe_omicron_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_third_dose_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_third_dose_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_third_dose_2022.csv"
{txt}

{com}. shell rm -r "reference_hospitalization_all_locs.csv"
{txt}

{com}. shell rm -r "Summary_stats_all_locs.csv"
{txt}

{com}. shell rm -r "worse_hospitalization_all_locs.csv"
{txt}

{com}. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 106
. * linkdate = urldate
. * linkdate                              download                urldate
. * November 18, 2022             ihme-covid19    2022-11-18
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-11-18" " update 2022-11-18"
{res}{err}This is IHME urldate 2022-11-18 update 2022-11-18
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-11-18/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_best_masks_2023.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2023.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_reference_2023.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  14}
{text:        skipped:  0}
{text:      extracted:  14}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 137,780 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 151,475 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 151,475 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2022.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(4,363 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11494 missing values generated)
{res}reff_lower contains string
{txt}(43 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(8621 missing values generated)
{res}reff_upper contains string
{txt}(7 real changes made)
reff_upper: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11060 missing values generated)
{res}infection_fatality contains string
{txt}(2,192 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12013 missing values generated)
{res}infection_detection contains string
{txt}(1,977 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7450 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,977 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7450 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_upper} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}23010{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}31dec2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}1,062{col 51}{txt}Missing .: {res}0{txt}/{res}440,730

{txt}{col 19}Mean: {res}{ralign 7:22479.5}{txt} = {res}18jul2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:306.573}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22055}{ralign 11:   22214}{ralign 11: 22479.5}{ralign 11:   22745}{ralign 11:   22904}
{col 25}{ralign 9:20may2020}{ralign 11:26oct2020}{ralign 11:18jul2021}{ralign 11:10apr2022}{ralign 11:16sep2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}      1,062       50.00       50.00
{txt}        533 {c |}{res}      1,062       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,124      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(1,062 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}      1,062      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,062      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20221118 DayDeaMeRaIHME20221118)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20221118
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20221118.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20221118.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221118.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20221118.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(262,314 observations deleted)

{com}. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(1,062 real changes made)

{com}. replace location_name = "China" if location_name == "China (without Hong Kong and Macao)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(1,062 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(1,062 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(1,062 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(1,062 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(1,062 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(1,062 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(1,062 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(1,062 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20221118.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20221118.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20221118.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * remove remnant not-needed files
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.dta"
{txt}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. **********************************************
. 
. * update 107
. * linkdate = urldate
. * linkdate                              download                urldate
. * December 16, 2022             ihme-covid19    2022-12-16
. * filename data_download_file_reference_2020.csv and data_download_file_reference_2021.csv
. *          and data_download_file_reference_2022.csv
. 
. 
. clear   
{txt}
{com}. 
. di in red "This is IHME urldate " "2022-12-16" " update 2022-12-16"
{res}{err}This is IHME urldate 2022-12-16 update 2022-12-16
{txt}
{com}. 
. *****************************
. 
. * get IHME estimates
. 
. copy https://ihmecovid19storage.blob.core.windows.net/archive/2022-12-16/ihme-covid19.zip ihme-covid19.zip
{txt}
{com}. unzipfile ihme-covid19.zip, replace
{res}{text:    inflating: data_dictionary.csv}
{text:    inflating: data_download_file_best_masks_2020.csv}
{text:    inflating: data_download_file_best_masks_2021.csv}
{text:    inflating: data_download_file_best_masks_2022.csv}
{text:    inflating: data_download_file_best_masks_2023.csv}
{text:    inflating: data_download_file_global_antivirals_2020.csv}
{text:    inflating: data_download_file_global_antivirals_2021.csv}
{text:    inflating: data_download_file_global_antivirals_2022.csv}
{text:    inflating: data_download_file_global_antivirals_2023.csv}
{text:    inflating: data_download_file_reference_2020.csv}
{text:    inflating: data_download_file_reference_2021.csv}
{text:    inflating: data_download_file_reference_2022.csv}
{text:    inflating: data_download_file_reference_2023.csv}
{text:    inflating: IHME_COVID_19_Data_Release_Information_Sheet.pdf}

{text:successfully unzipped ihme-covid19.zip to current directory}
{text:total processed:  14}
{text:        skipped:  0}
{text:      extracted:  14}
{txt}
{com}. erase ihme-covid19.zip
{txt}
{com}. 
. 
. ******************************
. 
. * import csv files
. 
. import delimited using data_download_file_reference_2020.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 137,780 obs)

{com}. save data_download_file_reference_2020.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2020.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2021.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 151,475 obs)

{com}. save data_download_file_reference_2021.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2021.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. import delimited using data_download_file_reference_2022.csv, clear varnames(1)
{res}{txt}(encoding automatically selected: ISO-8859-1)
{res}{text}(78 vars, 151,475 obs)

{com}. save data_download_file_reference_2022.dta, replace
{txt}{p 0 4 2}
(file {bf}
data_download_file_reference_2022.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. ******************************
. 
. * gen scenario dta files
. 
. use "data_download_file_reference_2020.dta", clear 
{txt}
{com}. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean contains string
{txt}(4,288 real changes made)
reff_mean: all characters numeric; {res}replaced {txt}as {res}double
{txt}(11382 missing values generated)
{res}reff_lower contains string
{txt}(32 real changes made)
reff_lower: all characters numeric; {res}replaced {txt}as {res}double
{txt}(8573 missing values generated)
{res}reff_upper is numeric
infection_fatality contains string
{txt}(2,199 real changes made)
infection_fatality: all characters numeric; {res}replaced {txt}as {res}double
{txt}(12010 missing values generated)
{res}infection_detection contains string
{txt}(1,977 real changes made)
infection_detection: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7417 missing values generated)
{res}infection_hospitalization contains string
{txt}(1,977 real changes made)
infection_hospitalization: all characters numeric; {res}replaced {txt}as {res}double
{txt}(7417 missing values generated)
{res}{txt}
{com}. *
. 
. capture rename population population_2020
{txt}
{com}. 
. save "data_download_file_reference_2020.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2020.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. use "data_download_file_reference_2021.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2021
{txt}
{com}. 
. save "data_download_file_reference_2021.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2021.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. use "data_download_file_reference_2022.dta", clear 
{txt}
{com}. 
. 
. local varlist reff_mean reff_lower reff_upper infection_fatality infection_detection infection_hospitalization
{txt}
{com}. 
. foreach v of local varlist {c -(}
{txt}  2{com}.         capture confirm numeric variable `v'
{txt}  3{com}.     if !_rc {c -(}
{txt}  4{com}.                 di "`v'" " is numeric"
{txt}  5{com}.     {c )-}
{txt}  6{com}.     else {c -(}
{txt}  7{com}.                 di "`v'" " contains string"
{txt}  8{com}.                 replace `v' = "." if `v' == "Inf"
{txt}  9{com}.                 destring `v', replace 
{txt} 10{com}.     {c )-}
{txt} 11{com}. {c )-}
reff_mean is numeric
reff_lower is numeric
reff_upper is numeric
infection_fatality is numeric
infection_detection is numeric
infection_hospitalization is numeric
{txt}
{com}. *
. 
. capture rename population population_2022
{txt}
{com}. 
. save "data_download_file_reference_2022.dta", replace 
{txt}{p 0 4 2}
file {bf}
data_download_file_reference_2022.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. append using "data_download_file_reference_2021.dta"
{txt}
{com}. 
. append using "data_download_file_reference_2020.dta"
{txt}{p 0 7 2}
(variable
{bf:reff_mean} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:reff_lower} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_fatality} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_detection} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}
{p 0 7 2}
(variable
{bf:infection_hospitalization} was {bf:float}, now {bf:double} to accommodate using data's values)
{p_end}

{com}. 
. 
. 
. 
. * gen date
. 
. rename date date_original
{res}{txt}
{com}. gen year = substr(date_original,1,4) 
{txt}
{com}. gen month = substr(date_original,6,2) 
{txt}
{com}. gen day = substr(date_original,9,2) 
{txt}
{com}. egen date2 = concat(day month year)
{txt}
{com}. gen date = date(date2, "DMY", 2050)
{txt}
{com}. format date %tdDDMonCCYY
{txt}
{com}. codebook date

{txt}{hline}
{res}date{right:(unlabeled)}
{txt}{hline}

{col 19}Type: Numeric daily date ({res}float{txt})

{col 18}Range: [{res}21949{txt},{res}23010{txt}]{col 55}Units: {res}1
{col 8}{txt}Or equivalently: [{res}04feb2020{txt},{res}31dec2022{txt}]{col 55}Units: {res}days
{col 10}{txt}Unique values: {res}1,062{col 51}{txt}Missing .: {res}0{txt}/{res}440,730

{txt}{col 19}Mean: {res}{ralign 7:22479.5}{txt} = {res}18jul2021{txt}(+ 12 hours)
{col 14}Std. dev.: {res}{ralign 7:306.573}
{txt}{col 12}Percentiles: {col 25}{ralign 9:10%}{ralign 11:25%}{ralign 11:50%}{ralign 11:75%}{ralign 11:90%}
{res}{col 25}{ralign 9:22055}{ralign 11:   22214}{ralign 11: 22479.5}{ralign 11:   22745}{ralign 11:   22904}
{col 25}{ralign 9:20may2020}{ralign 11:26oct2020}{ralign 11:18jul2021}{ralign 11:10apr2022}{ralign 11:16sep2022}
{txt}
{com}. drop year month day date2
{txt}
{com}. 
. 
. 
. * rename variables
. 
. 
. * Daily Reported Deaths smoothed
. rename seir_daily_unscaled_mean  DayDeaMeSmIHME
{res}{txt}
{com}. label var DayDeaMeSmIHME "Daily Reported Deaths Mean smoothed IHME S1" // Daily reported deaths (mean estimate)
{txt}
{com}.                 
.                 
.                 
.                 
. 
. 
. 
. *** account for Georgia and Cote d'Ivoire
. 
. tab location_id if location_name == "Georgia"

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
         35 {c |}{res}      1,062       50.00       50.00
{txt}        533 {c |}{res}      1,062       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,124      100.00
{txt}
{com}. 
. drop if location_id == 533 // state of Georgia
{txt}(1,062 observations deleted)

{com}. 
. tab location_id if regexm(location_name,"Ivoire") == 1

{txt}location_id {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
        205 {c |}{res}      1,062      100.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      1,062      100.00
{txt}
{com}. 
. replace location_name = "Cote d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. 
. 
. 
. 
. 
. * Check for variable deaths_data_type
. 
. capture confirm var deaths_data_type
{txt}
{com}.                 
. if c(rc) == 0 {c -(}
.         di "Variable FOUND:  " "deaths_data_type"
. {c )-}
{txt}
{com}.         
. else if c(rc) == 111 {c -(}    // VARIABLE NOT FOUND
.         di in red "Variable NOT Found:  " "deaths_data_type"
{res}{err}Variable NOT Found:  deaths_data_type
{com}. {c )-}       
{txt}
{com}. *               
.                 
.                 
. 
. rename daily_deaths_unscaled DayDeaMeRaIHME
{res}{txt}
{com}. 
. label var DayDeaMeRaIHME "IHME Daily Deaths raw data without excess mortality scalar applied Reference scenario"
{txt}note: label truncated to 80 characters

{com}.                 
.                 
. keep date location_name location_id DayDeaMeSmIHME DayDeaMeRaIHME population_*
{txt}
{com}. 
. rename (DayDeaMeSmIHME DayDeaMeRaIHME) (DayDeaMeSmIHME20221216 DayDeaMeRaIHME20221216)
{res}{txt}
{com}. 
. order date location_name DayDeaMeSmIHME20221216
{txt}
{com}. 
. sort location_name date
{txt}
{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME 20221216.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME 20221216.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221216.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * get all countries
. 
. use "IHME 20221216.dta", clear
{txt}
{com}. 
. 
. drop if location_id == 533 // the Georgia state in USA
{txt}(0 observations deleted)

{com}. 
. replace location_name = "Côte d'Ivoire" if location_id == 205
{txt}(1,062 real changes made)

{com}. 
. 
. keep if ///
> location_name == "Afghanistan" | ///
> location_name == "Albania" | ///
> location_name == "Albania" | ///
> location_name == "Algeria" | ///
> location_name == "Andorra" | ///
> location_name == "Angola" | ///
> location_name == "Argentina" | ///
> location_name == "Armenia" | ///
> location_name == "Australia" | ///
> location_name == "Austria" | ///
> location_name == "Azerbaijan" | ///
> location_name == "Bahamas" | ///
> location_name == "Bahrain" | ///
> location_name == "Bangladesh" | ///
> location_name == "Barbados" | ///
> location_name == "Belarus" | ///
> location_name == "Belgium" | ///
> location_name == "Belize" | ///
> location_name == "Benin" | ///
> location_name == "Bolivia (Plurinational State of)" | ///
> location_name == "Bosnia and Herzegovina" | ///
> location_name == "Botswana" | ///
> location_name == "Brazil" | ///
> location_name == "Bulgaria" | ///
> location_name == "Burkina Faso" | ///
> location_name == "Côte d'Ivoire" | /// 
> location_name == "Cabo Verde" | ///
> location_name == "Cambodia" | ///
> location_name == "Cameroon" | ///
> location_name == "Canada" | ///
> location_name == "Central African Republic" | ///
> location_name == "Chad" | ///
> location_name == "Chile" | ///
> location_name == "China" | ///
> location_name == "China (without Hong Kong and Macao)" | ///
> location_name == "Colombia" | ///
> location_name == "Comoros" | ///
> location_name == "Congo" | ///
> location_name == "Costa Rica" | ///
> location_name == "Croatia" | ///
> location_name == "Cuba" | ///
> location_name == "Cyprus" | ///
> location_name == "Czechia" | ///
> location_name == "Democratic Republic of the Congo" | ///
> location_name == "Denmark" | ///
> location_name == "Djibouti" | ///
> location_name == "Dominican Republic" | ///
> location_name == "Ecuador" | ///
> location_name == "Egypt" | ///
> location_name == "El Salvador" | ///
> location_name == "Equatorial Guinea" | ///
> location_name == "Estonia" | ///
> location_name == "Eswatini" | ///
> location_name == "Ethiopia" | ///
> location_name == "Fiji" | ///
> location_name == "Finland" | ///
> location_name == "France" | ///
> location_name == "Gabon" | ///
> location_name == "Gambia" | location_name == "Georgia" | ///
> location_name == "Germany" | ///
> location_name == "Ghana" | ///
> location_name == "Greece" | ///
> location_name == "Guam" | ///
> location_name == "Guatemala" | ///
> location_name == "Guinea" | ///
> location_name == "Guinea-Bissau" | ///
> location_name == "Guyana" | ///
> location_name == "Haiti" | ///
> location_name == "Honduras" | ///
> location_name == "Hong Kong Special Administrative Region of China" | ///
> location_name == "Hungary" | ///
> location_name == "Iceland" | ///
> location_name == "India" | ///
> location_name == "Indonesia" | ///
> location_name == "Iran (Islamic Republic of)" | ///
> location_name == "Iraq" | ///
> location_name == "Ireland" | ///
> location_name == "Israel" | ///
> location_name == "Italy" | ///
> location_name == "Jamaica" | ///
> location_name == "Japan" | ///
> location_name == "Jordan" | ///
> location_name == "Kazakhstan" | ///
> location_name == "Kenya" | ///
> location_name == "Kuwait" | ///
> location_name == "Kyrgyzstan" | ///
> location_name == "Latvia" | ///
> location_name == "Lebanon" | ///
> location_name == "Lesotho" | ///
> location_name == "Liberia" | ///
> location_name == "Libya" | ///
> location_name == "Lithuania" | ///
> location_name == "Luxembourg" | ///
> location_name == "Macao Special Administrative Region of China" | ///
> location_name == "Madagascar" | ///
> location_name == "Malawi" | ///
> location_name == "Malaysia" | ///
> location_name == "Maldives" | ///
> location_name == "Mali" | ///
> location_name == "Malta" | ///
> location_name == "Mauritania" | ///
> location_name == "Mauritius" | ///
> location_name == "Mexico" | ///
> location_name == "Mongolia" | ///
> location_name == "Montenegro" | ///
> location_name == "Morocco" | ///
> location_name == "Mozambique" | ///
> location_name == "Myanmar" | ///
> location_name == "Namibia" | ///
> location_name == "Nepal" | ///
> location_name == "Netherlands" | ///
> location_name == "New Zealand" | ///
> location_name == "Nicaragua" | ///
> location_name == "Niger" | ///
> location_name == "Nigeria" | ///
> location_name == "North Macedonia" | ///
> location_name == "Norway" | ///
> location_name == "Oman" | ///
> location_name == "Pakistan" | ///
> location_name == "Palestine" | ///
> location_name == "Panama" | ///
> location_name == "Papua New Guinea" | ///
> location_name == "Paraguay" | ///
> location_name == "Peru" | ///
> location_name == "Philippines" | ///
> location_name == "Poland" | ///
> location_name == "Portugal" | ///
> location_name == "Puerto Rico" | ///
> location_name == "Qatar" | ///
> location_name == "Republic of Korea" | ///
> location_name == "Republic of Moldova" | ///
> location_name == "Romania" | ///
> location_name == "Russian Federation" | ///
> location_name == "Rwanda" | ///
> location_name == "San Marino" | ///
> location_name == "Sao Tome and Principe" | ///
> location_name == "Saudi Arabia" | ///
> location_name == "Senegal" | ///
> location_name == "Serbia" | ///
> location_name == "Sierra Leone" | ///
> location_name == "Singapore" | ///
> location_name == "Slovakia" | ///
> location_name == "Slovenia" | ///
> location_name == "Somalia" | ///
> location_name == "South Africa" | ///
> location_name == "South Sudan" | ///
> location_name == "Spain" | ///
> location_name == "Sri Lanka" | ///
> location_name == "Sudan" | ///
> location_name == "Suriname" | ///
> location_name == "Sweden" | ///
> location_name == "Switzerland" | ///
> location_name == "Syrian Arab Republic" | ///
> location_name == "Taiwan (Province of China)" | ///
> location_name == "Tajikistan" | ///
> location_name == "Thailand" | ///
> location_name == "Timor-Leste" | ///
> location_name == "Togo" | ///
> location_name == "Trinidad and Tobago" | ///
> location_name == "Tunisia" | ///
> location_name == "Turkey" | ///
> location_name == "Uganda" | ///
> location_name == "Ukraine" | ///
> location_name == "United Arab Emirates" | ///
> location_name == "United Kingdom" | ///
> location_name == "United States of America" | ///
> location_name == "United States Virgin Islands" | ///
> location_name == "Uruguay" | ///
> location_name == "Uzbekistan" | ///
> location_name == "Venezuela (Bolivarian Republic of)" | ///
> location_name == "Viet Nam" | ///
> location_name == "Yemen" | ///
> location_name == "Zambia" | ///
> location_name == "Zimbabwe"
{txt}(262,314 observations deleted)

{com}. 
. 
. 
. * change ihme country names to location_name country names
. 
. replace location_name = "Bolivia" if location_name == "Bolivia (Plurinational State of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cape Verde" if location_name == "Cabo Verde"
{txt}(1,062 real changes made)

{com}. replace location_name = "China" if location_name == "China"
{txt}(0 real changes made)

{com}. replace location_name = "China without Hong Kong and Macao" if location_name == "China (without Hong Kong and Macao)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Congo DR" if location_name == "Democratic Republic of the Congo"
{txt}(1,062 real changes made)

{com}. replace location_name = "Cote d'Ivoire" if location_name == "Côte d'Ivoire"
{txt}(1,062 real changes made)

{com}. replace location_name = "Guinea Bissau" if location_name == "Guinea-Bissau"
{txt}(1,062 real changes made)

{com}. replace location_name = "Hong Kong" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Iran" if location_name == "Iran (Islamic Republic of)"
{txt}(1,062 real changes made)

{com}. replace location_name = "Korea North" if location_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace location_name = "Korea South" if location_name == "Republic of Korea"
{txt}(1,062 real changes made)

{com}. replace location_name = "Macao" if location_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace location_name = "Moldova" if location_name == "Republic of Moldova"
{txt}(1,062 real changes made)

{com}. replace location_name = "Russia" if location_name == "Russian Federation"
{txt}(1,062 real changes made)

{com}. replace location_name = "Syria" if location_name == "Syrian Arab Republic"
{txt}(1,062 real changes made)

{com}. replace location_name = "Taiwan" if location_name == "Taiwan (Province of China)"
{txt}(1,062 real changes made)

{com}. replace location_name = "United States of America" if location_name == "United States"
{txt}(0 real changes made)

{com}. replace location_name = "United States of America" if location_name == "US"
{txt}(0 real changes made)

{com}. replace location_name = "Venezuela" if location_name == "Venezuela (Bolivarian Republic of)"
{txt}(1,062 real changes made)

{com}. 
. 
. qui compress
{txt}
{com}. 
. save "IHME all countries 20221216.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME all countries 20221216.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME all countries 20221216.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. * remove remnant not-needed files
. 
. shell rm -r "data_dictionary.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2020.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2021.dta"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.csv"
{txt}

{com}. shell rm -r "data_download_file_reference_2022.dta"
{txt}

{com}. 
. shell rm -r "IHME_COVID_19_Data_Release_Information_Sheet.pdf"
{txt}

{com}. shell rm -r "data_download_file_reference_2023.csv"
{txt}

{com}. shell rm -r "data_download_file_global_antivirals_2023.csv"
{txt}

{com}. shell rm -r "data_download_file_best_masks_2023.csv"
{txt}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************************************
. **********************************************
. 
. **********************************************
. **********************************************
. 
. * gen list of countries and update dates
. 
. 
. local list ///
> 20200325 ///
> 20200326 ///
> 20200327 ///
> 20200329 ///
> 20200330 ///
> 20200331 ///
> 20200401 ///
> 20200405 ///
> 20200407 ///
> 20200408 ///
> 20200410 ///
> 20200413 ///
> 20200417 ///
> 20200421 ///
> 20200422 ///
> 20200427 ///
> 20200428 ///
> 20200429 ///
> 20200504 ///
> 20200510 ///
> 20200512 ///
> 20200520 ///
> 20200525 ///
> 20200526 ///
> 20200529 ///
> 20200605 ///
> 20200608 ///
> 20200610 ///
> 20200615 ///
> 20200625 ///
> 20200629 ///
> 20200707 ///
> 20200714 ///
> 20200722 ///
> 20200730 ///
> 20200806 ///
> 20200821 ///
> 20200827 ///
> 20200903 ///
> 20200911 ///
> 20200918 ///
> 20200924 ///
> 20201002 ///
> 20201009 ///
> 20201015 ///
> 20201022 ///
> 20201029 ///
> 20201112 ///
> 20201119 ///
> 20201203 ///
> 20201210 ///
> 20201217 ///
> 20201223 ///
> 20210115 ///
> 20210122 ///
> 20210128 ///
> 20210204 ///
> 20210212 ///
> 20210220 ///
> 20210225 ///
> 20210306 ///
> 20210311 ///
> 20210317 ///
> 20210325 ///
> 20210401 ///
> 20210409 ///
> 20210416 ///
> 20210423 ///
> 20210506 ///
> 20210514 ///
> 20210521 ///
> 20210528 ///
> 20210604 ///
> 20210610 ///
> 20210618 ///
> 20210625 ///
> 20210702 ///
> 20210715 ///
> 20210723 ///
> 20210730 ///
> 20210806 ///
> 20210820 ///
> 20210826 ///
> 20210902 ///
> 20210910 ///
> 20210916 ///
> 20210923 ///
> 20210930 ///
> 20211015 ///
> 20211021 ///
> 20211104 ///
> 20211119 ///
> 20211221 ///
> 20220108 ///
> 20220114 ///
> 20220121 ///
> 20220204 ///
> 20220218 ///
> 20220321 ///
> 20220408 ///
> 20220506 ///
> 20220610 ///
> 20220719 ///
> 20220912 ///
> 20221024 ///
> 20221118 ///
> 20221216
{txt}
{com}. 
. 
. 
. foreach update of local list {c -(}
{txt}  2{com}. 
.         use "IHME all countries `update'.dta", clear
{txt}  3{com}.         
.         keep location_name 
{txt}  4{com}.         
.         rename location_name country
{txt}  5{com}.                 
.         contract country
{txt}  6{com}.         
.         drop _freq
{txt}  7{com}.                 
.         rename country country`update'
{txt}  8{com}.         
.         gen counter = _n
{txt}  9{com}.         
.         save "IHME `update' countries.dta", replace
{txt} 10{com}. 
. {c )-}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200325 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200325 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200326 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200326 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200327 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200327 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200329 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200329 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200330 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200330 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200331 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200331 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200401 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200401 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200405 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200405 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200407 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200407 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200408 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200408 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200410 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200410 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200413 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200413 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200417 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200417 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200421 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200421 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200422 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200422 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200427 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200427 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200428 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200428 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200429 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200429 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200504 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200504 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200510 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200510 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200512 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200512 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200520 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200520 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200525 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200525 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200526 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200526 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200529 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200529 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200605 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200605 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200608 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200608 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200610 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200610 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200615 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200615 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200625 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200625 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200629 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200629 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200707 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200707 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200714 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200714 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200722 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200722 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200730 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200730 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200806 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200806 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200821 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200821 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200827 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200827 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200903 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200903 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200911 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200911 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200918 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200918 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20200924 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20200924 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201002 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201002 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201009 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201009 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201015 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201015 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201022 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201022 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201029 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201029 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201112 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201112 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201119 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201119 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201203 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201203 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201210 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201210 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201217 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201217 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20201223 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20201223 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210115 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210115 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210122 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210122 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210128 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210128 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210204 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210204 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210212 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210212 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210220 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210220 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210225 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210225 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210306 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210306 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210311 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210311 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210317 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210317 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210325 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210325 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210401 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210401 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210409 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210409 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210416 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210416 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210423 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210423 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210506 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210506 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210514 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210514 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210521 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210521 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210528 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210528 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210604 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210604 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210610 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210610 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210618 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210618 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210625 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210625 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210702 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210702 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210715 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210715 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210723 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210723 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210730 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210730 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210806 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210806 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210820 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210820 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210826 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210826 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210902 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210902 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210910 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210910 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210916 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210916 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210923 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210923 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20210930 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20210930 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20211015 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211015 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20211021 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211021 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20211104 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211104 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20211119 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211119 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20211221 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20211221 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220108 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220108 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220114 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220114 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220121 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220121 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220204 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220204 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220218 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220218 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220321 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220321 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220408 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220408 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220506 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220506 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220610 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220610 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220719 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220719 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20220912 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20220912 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20221024 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221024 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20221118 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221118 countries.dta{rm}
saved
{p_end}
{res}{txt}{p 0 4 2}
(file {bf}
IHME 20221216 countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME 20221216 countries.dta{rm}
saved
{p_end}

{com}. *
. 
. 
. 
. use "IHME 20200325 countries.dta" 
{txt}
{com}. 
. 
. foreach update of local list {c -(}
{txt}  2{com}. 
.         merge m:m counter using "IHME `update' countries.dta"
{txt}  3{com}.         
.         drop _merge
{txt}  4{com}. 
. {c )-}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}              29
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}              29{txt}  (_merge==2)

{col 5}Matched{col 30}{res}               1{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              30{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               1{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              30{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               1{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              31{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               2{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              32{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              33{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              33{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              33{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              33{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              33{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}              16
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}              16{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              34{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               3{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              50{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               2{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              53{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               1{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              55{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              56{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              55{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              55{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              55{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}              56{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}              99
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}              99{txt}  (_merge==2)

{col 5}Matched{col 30}{res}              56{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             155{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}              12
{txt}{col 9}from master{col 30}{res}              12{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             143{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}              12
{txt}{col 9}from master{col 30}{res}              12{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             143{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             153{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               1{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             155{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             155{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             156{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               2{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             156{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               5
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               5{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             158{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               1{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               0
{txt}{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             162{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             161{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               1
{txt}{col 9}from master{col 30}{res}               1{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             161{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               6
{txt}{col 9}from master{col 30}{res}               0{txt}  (_merge==1)
{col 9}from using{col 30}{res}               6{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             164{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             168{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               5
{txt}{col 9}from master{col 30}{res}               5{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             165{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             167{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             167{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               2
{txt}{col 9}from master{col 30}{res}               2{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             168{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               7
{txt}{col 9}from master{col 30}{res}               7{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             163{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             167{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               4
{txt}{col 9}from master{col 30}{res}               4{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             166{txt}  (_merge==3)
{col 5}{hline 41}
{res}
{txt}{col 5}Result{col 33}Number of obs
{col 5}{hline 41}
{col 5}Not matched{col 30}{res}               3
{txt}{col 9}from master{col 30}{res}               3{txt}  (_merge==1)
{col 9}from using{col 30}{res}               0{txt}  (_merge==2)

{col 5}Matched{col 30}{res}             167{txt}  (_merge==3)
{col 5}{hline 41}

{com}. *
. 
. 
. order counter
{txt}
{com}. 
. qui compress 
{txt}
{com}. 
. save "IHME countries.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME countries.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME countries.dta{rm}
saved
{p_end}

{com}. 
. 
. *
. 
. 
. 
. 
. 
. * determine earliest date each country was present (date_present_first) 
. * dates on which each country was absent (after their first presence)(date_absent_1*)
. 
. use "IHME countries.dta", clear 
{txt}
{com}. 
. rename counter obs_no
{res}{txt}
{com}. 
. rename (country*) (countries*)
{res}{txt}
{com}. 
. * use -fillin- in a long file:
. 
. * https://www.statalist.org/forums/forum/general-stata-discussion/general/1687043-how-to-rearrange-the-values-of-string-variables-according-to-a-criterion
. 
. reshape long countries, i(obs_no) j(str_date) string
{txt}(j = 20200325 20200326 20200327 20200329 20200330 20200331 20200401 20200405 20200407 20200408 20200410 20200413 20200417 20200421 20200422 20200427 20200428 20200429 20200504 20200510 20200512 20200520 20200525 20200526 20200529 20200605 20200608 20200610 20200615 20200625 20200629 20200707 20200714 20200722 20200730 20200806 20200821 20200827 20200903 20200911 20200918 20200924 20201002 20201009 20201015 20201022 20201029 20201112 20201119 20201203 20201210 20201217 20201223 20210115 20210122 20210128 20210204 20210212 20210220 20210225 20210306 20210311 20210317 20210325 20210401 20210409 20210416 20210423 20210506 20210514 20210521 20210528 20210604 20210610 20210618 20210625 20210702 20210715 20210723 20210730 20210806 20210820 20210826 20210902 20210910 20210916 20210923 20210930 20211015 20211021 20211104 20211119 20211221 20220108 20220114 20220121 20220204 20220218 20220321 20220408 20220506 20220610 20220719 20220912 20221024 20221118 20221216)

Data{col 36}Wide{col 43}->{col 48}Long
{hline 77}
Number of observations     {res}         170   {txt}->   {res}18,190      
{txt}Number of variables        {res}         108   {txt}->   {res}3           
{txt}j variable (107 values)                   ->   {res}str_date
{txt}xij variables:
{res}countries20200325 countries20200326 ... countries20221216{txt}->{res}countries
{txt}{hline 77}

{com}. gen int real_date = daily(str_date, "YMD")
{txt}
{com}. assert missing(str_date) == missing(real_date)
{txt}
{com}. format real_date %td
{txt}
{com}. drop str_date
{txt}
{com}. 
. rename countries country
{res}{txt}
{com}. drop if missing(country)
{txt}(4,635 observations deleted)

{com}. fillin country real_date
{txt}
{com}. rename _fillin absent
{res}{txt}
{com}. drop obs_no
{txt}
{com}. 
. by country (real_date), sort: egen date_present_first = min(cond(!absent, real_date, .))
{txt}
{com}. format date_present_first %td
{txt}
{com}. 
. by country (real_date): gen absent_dates = ///
>     cond(absent, string(real_date, "%tdCCYYNNDD"), "") if _n == 1
{txt}(18,445 missing values generated)

{com}. by country (real_date): replace absent_dates = ///
>     absent_dates[_n-1] + cond(absent, " " + string(real_date, "%tdCCYYNNDD"), "") ///
>     if _n > 1
{txt}(18,338 real changes made)

{com}. by country (real_date): replace absent_dates = absent_dates[_N]
{txt}(6,181 real changes made)

{com}. split absent_dates, gen(date_absent)
{res}variables created as string: 
{txt}{col 1}date_absent1{col 15}date_abse~19{col 29}date_abse~37{col 43}date_abse~55{col 57}date_abse~73{col 71}date_abse~91
{col 1}date_absent2{col 15}date_abse~20{col 29}date_abse~38{col 43}date_abse~56{col 57}date_abse~74{col 71}date_abse~92
{col 1}date_absent3{col 15}date_abse~21{col 29}date_abse~39{col 43}date_abse~57{col 57}date_abse~75{col 71}date_abse~93
{col 1}date_absent4{col 15}date_abse~22{col 29}date_abse~40{col 43}date_abse~58{col 57}date_abse~76{col 71}date_abse~94
{col 1}date_absent5{col 15}date_abse~23{col 29}date_abse~41{col 43}date_abse~59{col 57}date_abse~77{col 71}date_abse~95
{col 1}date_absent6{col 15}date_abse~24{col 29}date_abse~42{col 43}date_abse~60{col 57}date_abse~78{col 71}date_abse~96
{col 1}date_absent7{col 15}date_abse~25{col 29}date_abse~43{col 43}date_abse~61{col 57}date_abse~79{col 71}date_abse~97
{col 1}date_absent8{col 15}date_abse~26{col 29}date_abse~44{col 43}date_abse~62{col 57}date_abse~80{col 71}date_abse~98
{col 1}date_absent9{col 15}date_abse~27{col 29}date_abse~45{col 43}date_abse~63{col 57}date_abse~81{col 71}date_abse~99
{col 1}date_abse~10{col 15}date_abse~28{col 29}date_abse~46{col 43}date_abse~64{col 57}date_abse~82{col 71}date_abs~100
{col 1}date_abse~11{col 15}date_abse~29{col 29}date_abse~47{col 43}date_abse~65{col 57}date_abse~83{col 71}date_abs~101
{col 1}date_abse~12{col 15}date_abse~30{col 29}date_abse~48{col 43}date_abse~66{col 57}date_abse~84{col 71}date_abs~102
{col 1}date_abse~13{col 15}date_abse~31{col 29}date_abse~49{col 43}date_abse~67{col 57}date_abse~85{col 71}date_abs~103
{col 1}date_abse~14{col 15}date_abse~32{col 29}date_abse~50{col 43}date_abse~68{col 57}date_abse~86{col 71}date_abs~104
{col 1}date_abse~15{col 15}date_abse~33{col 29}date_abse~51{col 43}date_abse~69{col 57}date_abse~87{col 71}date_abs~105
{col 1}date_abse~16{col 15}date_abse~34{col 29}date_abse~52{col 43}date_abse~70{col 57}date_abse~88{col 71}date_abs~106
{col 1}date_abse~17{col 15}date_abse~35{col 29}date_abse~53{col 43}date_abse~71{col 57}date_abse~89
{col 1}date_abse~18{col 15}date_abse~36{col 29}date_abse~54{col 43}date_abse~72{col 57}date_abse~90

{com}. drop absent_dates
{txt}
{com}. isid country real_date, sort
{txt}(data already sorted by {bf:country real_date})

{com}. 
. * 
. 
. 
. gen year = year(real_date)
{txt}
{com}. gen month = month(real_date)
{txt}
{com}. gen day = day(real_date)
{txt}
{com}. tostring year month day, replace
{txt}year was {res:float} now {res:str4}
month was {res:float} now {res:str2}
day was {res:float} now {res:str2}

{com}. replace month = "01" if month == "1"
{txt}(1,044 real changes made)

{com}. replace month = "02" if month == "2"
{txt}(1,044 real changes made)

{com}. replace month = "03" if month == "3"
{txt}(1,914 real changes made)

{com}. replace month = "04" if month == "4"
{txt}(2,958 real changes made)

{com}. replace month = "05" if month == "5"
{txt}(2,088 real changes made)

{com}. replace month = "06" if month == "6"
{txt}(1,914 real changes made)

{com}. replace month = "07" if month == "7"
{txt}(1,566 real changes made)

{com}. replace month = "08" if month == "8"
{txt}(1,044 real changes made)

{com}. replace month = "09" if month == "9"
{txt}(1,740 real changes made)

{com}. replace day = "01" if day == "1"
{txt}(348 real changes made)

{com}. replace day = "02" if day == "2"
{txt}(522 real changes made)

{com}. replace day = "03" if day == "3"
{txt}(348 real changes made)

{com}. replace day = "04" if day == "4"
{txt}(870 real changes made)

{com}. replace day = "05" if day == "5"
{txt}(348 real changes made)

{com}. replace day = "06" if day == "6"
{txt}(870 real changes made)

{com}. replace day = "07" if day == "7"
{txt}(348 real changes made)

{com}. replace day = "08" if day == "8"
{txt}(696 real changes made)

{com}. replace day = "09" if day == "9"
{txt}(348 real changes made)

{com}. 
. gen blockdate_string = year + month + day
{txt}
{com}. destring blockdate_string, gen(blockdate)
{txt}blockdate_string: all characters numeric; blockdate {res}generated {txt}as {res}long
{txt}
{com}. drop year month day blockdate_string
{txt}
{com}. order blockdate, before(real_date)
{txt}
{com}. 
. rename blockdate update_date_block
{res}{txt}
{com}. rename real_date update_date_real
{res}{txt}
{com}. 
. 
. 
. 
. 
. 
. 
. gen year = year(date_present_first)
{txt}
{com}. gen month = month(date_present_first)
{txt}
{com}. gen day = day(date_present_first)
{txt}
{com}. tostring year month day, replace
{txt}year was {res:float} now {res:str4}
month was {res:float} now {res:str2}
day was {res:float} now {res:str2}

{com}. replace month = "01" if month == "1"
{txt}(0 real changes made)

{com}. replace month = "02" if month == "2"
{txt}(535 real changes made)

{com}. replace month = "03" if month == "3"
{txt}(107 real changes made)

{com}. replace month = "04" if month == "4"
{txt}(3,531 real changes made)

{com}. replace month = "05" if month == "5"
{txt}(2,461 real changes made)

{com}. replace month = "06" if month == "6"
{txt}(10,486 real changes made)

{com}. replace month = "07" if month == "7"
{txt}(642 real changes made)

{com}. replace month = "08" if month == "8"
{txt}(107 real changes made)

{com}. replace month = "09" if month == "9"
{txt}(535 real changes made)

{com}. replace day = "01" if day == "1"
{txt}(0 real changes made)

{com}. replace day = "02" if day == "2"
{txt}(0 real changes made)

{com}. replace day = "03" if day == "3"
{txt}(535 real changes made)

{com}. replace day = "04" if day == "4"
{txt}(0 real changes made)

{com}. replace day = "05" if day == "5"
{txt}(0 real changes made)

{com}. replace day = "06" if day == "6"
{txt}(0 real changes made)

{com}. replace day = "07" if day == "7"
{txt}(3,317 real changes made)

{com}. replace day = "08" if day == "8"
{txt}(0 real changes made)

{com}. replace day = "09" if day == "9"
{txt}(0 real changes made)

{com}. 
. gen date_present_first_block = year + month + day
{txt}
{com}. destring date_present_first_block, replace
{txt}date_present_first_block: all characters numeric; {res}replaced {txt}as {res}long
{txt}
{com}. drop year month day 
{txt}
{com}. order date_present_first_block, before(date_present_first)
{txt}
{com}. rename date_present_first date_present_first_real
{res}{txt}
{com}. 
. rename country loc_grand_name 
{res}{txt}
{com}. 
. *
. 
. 
. **********************************************
. **********************************************
. 
. * change ihme country names to location_name country names
. 
. replace loc_grand_name = "Bolivia" if loc_grand_name == "Bolivia (Plurinational State of)"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Cape Verde" if loc_grand_name == "Cabo Verde"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "China" if loc_grand_name == "China (without Hong Kong and Macao)"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Congo DR" if loc_grand_name == "Democratic Republic of the Congo"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Cote d'Ivoire" if loc_grand_name == "Côte d'Ivoire"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Guinea Bissau" if loc_grand_name == "Guinea-Bissau"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Hong Kong" if loc_grand_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Iran" if loc_grand_name == "Iran (Islamic Republic of)"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Korea North" if loc_grand_name == "Korea, Democratic People's Republic of"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Korea South" if loc_grand_name == "Republic of Korea"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Macao" if loc_grand_name == "Special Administrative Region of China"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Moldova" if loc_grand_name == "Republic of Moldova"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Russia" if loc_grand_name == "Russian Federation"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Syria" if loc_grand_name == "Syrian Arab Republic"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Taiwan" if loc_grand_name == "Taiwan (Province of China)"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "United States of America" if loc_grand_name == "United States"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "United States of America" if loc_grand_name == "US"
{txt}(0 real changes made)

{com}. replace loc_grand_name = "Venezuela" if loc_grand_name == "Venezuela (Bolivarian Republic of)"
{txt}(0 real changes made)

{com}. 
. 
. isid loc_grand_name update_date_block, sort
{txt}(data now sorted by {bf:loc_grand_name update_date_block})

{com}. 
. 
. 
. qui compress
{txt}
{com}. 
. save "IHME countries long.dta", replace
{txt}{p 0 4 2}
(file {bf}
IHME countries long.dta{rm}
not found)
{p_end}
{p 0 4 2}
file {bf}
IHME countries long.dta{rm}
saved
{p_end}

{com}. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. 
. **********************
. 
. view "log CovidLongitudinal IHME.smcl"
{txt}
{com}. 
. log close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}/Users/farshadpourmalek/Downloads/CovidLongitudinal-main/code/download/IHME/log CovidLongitudinal IHME.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}27 Aug 2023, 16:05:54
{txt}{.-}
{smcl}
{txt}{sf}{ul off}